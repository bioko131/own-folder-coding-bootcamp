var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Browser=function(e){return e.isChrome=navigator.userAgent.indexOf("Chrome")!==-1,e.isSafari=navigator.userAgent.indexOf("Safari")!==-1&&!e.isChrome,e.isMobileSafari=e.isSafari&&navigator.userAgent.indexOf(" Mobile/")!==-1,e.isMac=navigator.platform.indexOf("Mac")!==-1,e.isIE="Microsoft Internet Explorer"===navigator.appName,e.isIE8=e.isIE&&navigator.userAgent.indexOf("MSIE 8")!==-1,e.isAndroid=/Silk|Android/i.test(navigator.userAgent),e.isWebkit=/webkit/i.test(navigator.userAgent),e.isFirefox=/firefox/i.test(navigator.userAgent),e.isIE11=navigator.userAgent.indexOf("Trident/")!==-1,e.isEdge=navigator.userAgent.indexOf("Edge/")!==-1,e.isMobileOrTablet=e.isAndroid||e.isMobileSafari,e.isTouchSupported="ontouchstart"in window||window.navigator.msMaxTouchPoints,e.isWin7=/Windows NT 6\.1/.test(navigator.userAgent),e.isCssSupported=function(e){var t=document.body||document.documentElement,o=t.style,n=["Moz","webkit","Webkit","Khtml","O","ms"],r=!1;return"string"==typeof o[e]||(e=e.charAt(0).toUpperCase()+e.substr(1),_.each(n,function(t){"string"!=typeof o[t+e]&&"string"!=typeof o[String.format("-{0}-",t)+e.toLowerCase()]||(r=!0)}),r)},e.inIframe=function(){try{return window.self!==window.top}catch(e){return!0}},e.supportsVideo=function(e){var t=!1,o=document.createElement("video");return o.canPlayType&&o.canPlayType(e).replace(/no/,"")&&(t=!0),t},e.flashEnabled=function(){var e,t=Panopto.Core.StringHelpers.parseQueryString(window.location.search.slice(1));try{e=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(t){e=navigator.mimeTypes&&void 0!=navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin}return e&&"true"!==t[Panopto.Core.Constants.IgnoreFlashParamKey]},e.fullscreenApiSupported=_.any(["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],function(e){return"function"==typeof document[e]}),e.fullscreenEnabled=Boolean(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled),e.fullscreenEvent=function(e){$(document).on("fullscreenchange webkitfullscreenchange mozfullscreenchange",function(){var t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;e(!!t)})},e.isSilverlightSupported=function(){return!e.isChrome&&!e.isEdge&&!e.isFirefox},e}(Panopto.Core.Browser||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Configuration=function(e){return _.templateSettings={interpolate:/\<\@\=(.+?)\@\>/g,escape:/\<\@\-(.+?)\@\>/g,evaluate:/\<\@(.+?)\@\>/g},$.datepicker.setDefaults($.datepicker.regional[""]),e}(Panopto.Core.Configuration||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=function(e){return e.Types={Undefined:"undefined"},e.ClickedClass="clicked",e.DisabledClass="disabled",e.InactiveClass="inactive",e.EllipsisClass="ellipsis",e.NoTooltipClass="no-tooltip",e.HighlightedClass="highlighted",e.PlaceholderClass="placeholder",e.HoveringClass="hovering",e.EditingClass="editing",e.ModalSpinningClass="spinning",e.SelectedClass="selected",e.ExpandedClass="expanded",e.ErrorClass="error",e.MaterialIconsClass="material-icons",e.CanvasFont="10px Segoe UI, Helvetica, sans-serif",e.CanvasFontColor="#464646",e.AriaExpandedAttribute="aria-expanded",e.InitAttribute="data-init",e.EmptyGuid="00000000-0000-0000-0000-000000000000",e.MaxSQLDate=new Date("12/31/9999 23:59:59 UTC"),e.Win32EpochDate=new Date("1/1/1601 00:00:00 UTC").getTime(),e.HitMatcher=/<span class="match">(.*?)<\/span>/,e.SafeBreakMatcher=/CF63758C-0661-4168-B6C1-0424769D7915/,e.UrlMatcher=/^https?:\/\//,e.ByteResourceKey="Bytes_{0}",e.DefaultMaxRating=5,e.PollStatusTime=5e3,e.CompletedExpiration=6,e.SessionListContextResultsCharacterLimit=70,e.AppDeliveryIdParameter="d",e.AppStartSecondsParameter="st",e.AppFolderIdParameter="f",e.AppSessionIdParameter="s",e.AppInviteTokenParameter="tid",e.AppActionTypeParameter="a",e.AppRecordAction="record",e.AppBrowseAction="browse",e.AppPlayAction="play",e.FolderIdParameter="folderID",e.ExternalContextParamKey="externalID",e.ItemNameParameter="title",e.ProviderParamKey="instance",e.IgnoreFlashParamKey="ignoreflash",e.CsrfTokenCookieName="csrfToken",e.CsrfTokenHeaderName="X-Csrf-Token",e.MaxGuidsInUrl=50,e.ViewerSpecificEmbedHeight=480,e.ViewerSpecificEmbedWidth=720,e.BlankPageUrl="about:blank",e.FolderUrl="{0}/Pages/Sessions/List.aspx?folderID={1}",e.LoginUrl="{0}/Pages/Auth/Login.aspx",e.ShareUrl="http://support.panopto.com/{0}/{1}",e.EmbeddedFolderSupportUrl="http://support.panopto.com/documentation/video-management/embedded-playlist-widget",e.EmbeddedSessionSupportUrl="http://support.panopto.com/documentation/video-management/embedding-session-mp4",e.InternalMembershipProviderType=0,e.InternalMembershipProviderName="panoptointernal",e.FadeOutSpeed=300,e.ActiveUserTimeout=5e3,e.MessageTimeout=1e4,e.MaxSuggestionResults=50,e.MinSearchCharacters=2,e.TimelineChunkMultiplier=1e7,e.MaxTimelineZoom=60*e.TimelineChunkMultiplier,e.TimelineZoomFactor=1.2,e.SnapTolerance=10,e.AudioIconCode="&#xE029;",e.DocumentIconCode="&#xE415;",e.LinkIconCode="&#xE157",e.ObjectVideoIconCode="&#xE04B;",e.ScreenIconCode="&#xE30A;",e.SessionIconCode="&#xE04B;",e.SlideIconCode="&#xE3B6;",e.QuestionListIconCode="&#xE862",e.YouTubeIconCode="&#xE639",e}(Panopto.Core.Constants||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Key=function(e){return e.Tab=9,e.Enter=13,e.Shift=16,e.Ctrl=17,e.Esc=27,e.Space=32,e.UpArrow=38,e.DownArrow=40,e.LeftArrow=37,e.RightArrow=39,e.PageUp=33,e.PageDown=34,e.Home=36,e.End=35,e.Asterisk=56,e.Zero=48,e.One=49,e.Two=50,e.Three=51,e.Four=52,e.Five=53,e.Six=54,e.Seven=55,e.Eight=56,e.Nine=57,e.C=67,e.F=70,e.M=77,e.S=83,e.Y=89,e.Z=90,e.KeypadAsterisk=106,e.KeypadPlus=107,e.KeypadMinus=109,e.Period=190,e.ForwardSlash=191,e.Plus=Panopto.Core.Browser.isFirefox?61:187,e.Minus=Panopto.Core.Browser.isFirefox?173:189,e}(Panopto.Core.Key||{}),Panopto.Core.MouseButton=function(e){return e.Left=1,e.Middle=2,e.Right=3,e}(Panopto.Core.MouseButton||{}),Panopto.Core.DeviceMediaType=function(e){return e.Unknown=0,e.DV=1,e.HDV=2,e.Video=3,e.Audio=4,e.Screen=5,e.File=6,e}(Panopto.Core.DeviceMediaType||{}),Panopto.Core.StatsReportType=function(e){return e.FolderUsage=0,e.SessionUsage=1,e.UserViewingUsage=2,e.UserCreationUsage=3,e.LastLoginTime=4,e.SessionsViewsByUsers=5,e}(Panopto.Core.StatsReportType||{}),Panopto.Core.RemoteRecorderState=function(e){return e.Stopped=0,e.Previewing=1,e.Recording=2,e.Paused=3,e.Faulted=4,e.Disconnected=5,e.RecorderRunning=6,e}(Panopto.Core.RemoteRecorderState||{}),Panopto.Core.PasswordValidationStatus=function(e){return e.Valid=0,e.RegexFailure=1,e.PasswordTooShort=2,e.PasswordMissingNonAlphanumericChars=3,e.PasswordInHistory=4,e.UsedUsername=5,e}(Panopto.Core.PasswordValidationStatus||{}),Panopto.Core.MajorSupportArea=function(e){return e.None="None",e.Admin="Admin",e.Editor="Editor",e.Folders="Folders",e.Groups="Groups",e.Login="Login",e.Recorder="Recorder",e.Settings="Settings",e.Upload="Upload",e.Viewer="Viewer",e.Silverlight="Silverlight",e}(Panopto.Core.MajorSupportArea||{}),Panopto.Core.MinorSupportArea=function(e){return e.None="None",e.Branding="Branding",e.ContractUsage="ContractUsage",e.CreateSite="CreateSite",e.Licenses="Licenses",e.IdentityProviders="IdentityProviders",e.RemoteRecorders="RemoteRecorders",e.Settings="Settings",e.Status="Status",e.Transcription="Transcription",e.Usage="Usage",e.Users="Users",e.Cookies="Cookies",e.BasicRecording="BasicRecording",e.RecorderConfig="RecorderConfig",e.RecordingStatus="RecordingStatus",e.Sharing="Sharing",e.Safari="Safari",e.Bookmarks="Bookmarks",e.Comments="Comments",e.Notes="Notes",e.Questions="Questions",e.SecureBrowsers="SecureBrowsers",e.Chrome="Chrome",e}(Panopto.Core.MinorSupportArea||{}),Panopto.Core.SettingInputType=function(e){return e.SingleLine="SingleLine",e.MultiLine="MultiLine",e.Password="Password",e.DropDown="DropDown",e.Reset="Reset",e.Numeric="Numeric",e}(Panopto.Core.SettingInputType||{}),Panopto.Core.AccessRoleType=function(e){return e.Enumerate="Enumerate",e.ViewInfo="ViewInfo",e.Preview="Preview",e.Record="Record",e.EditConfiguration="EditConfiguration",e.EditAccessEntries="EditAccessEntries",e.ViewSchedule="ViewSchedule",e.ViewScheduleDetails="ViewScheduleDetails",e.EditSchedule="EditSchedule",e}(Panopto.Core.AccessRoleType||{}),Panopto.Core.EventTargetType=function(e){return e.Null=0,e.PowerPoint=1,e.ObjectVideo=2,e.VirtualVideo=3,e.Notes=4,e.TagSet=5,e.Transcript=6,e.PDF=7,e.MachineTranscript=8,e.VideoThumbnail=9,e.Primary=10,e.UserCreatedTranscript=11,e.Comments=12,e.Bookmarks=13,e.Questions=14,e.OcrOutput=15,e}(Panopto.Core.EventTargetType||{}),Panopto.Core.EventType=function(e){return e.Label=0,e.SlideChange=1,e.Note=2,e.Bookmark=3,e.Caption=4,e.Comment=5,e.SpeechRecognition=6,e.OcrRecognition=7,e}(Panopto.Core.EventType||{}),Panopto.Core.FolderType=function(e){return e.Normal=0,e.Sandbox=1,e.SandboxRoot=2,e.SandboxArchiveRoot=3,e}(Panopto.Core.FolderType||{}),Panopto.Core.ErrorCode=function(e){return e.Success=0,e.SiteDisabled=1,e.LoginRequired=2,e.AccessRequired=3,e.PodcastRequired=4,e.InvalidUrl=5,e.InvalidDelivery=6,e.UnknownError=7,e.NotInAvailabilityWindow=8,e.InvalidFormatForSSL=9,e}(Panopto.Core.ErrorCode||{}),Panopto.Core.FolderSet=function(e){return e.AllSessionCreationFolders=0,e.AllFolders=1,e.AllFolderCreationFolders=2,e.ExplicitCreatorFolders=3,e}(Panopto.Core.FolderSet||{}),Panopto.Core.StreamType=function(e){return e.Unknown=0,e.PrimaryVideo=1,e.SecondaryVideo=2,e.SecondaryPresentation=3,e}(Panopto.Core.StreamType||{}),Panopto.Core.UploadStatus=function(e){return e.Uploading=0,e.UploadComplete=1,e.UploadCancelled=2,e.Processing=3,e.Complete=4,e.ProcessingError=5,e.DeletingFiles=6,e.Deleted=7,e.DeletingError=8,e}(Panopto.Core.UploadStatus||{}),Panopto.Core.QuestionType=function(e){return e.TrueFalse=0,e.MultipleChoice=1,e.MultipleSelect=2,e}(Panopto.Core.QuestionType||{}),Panopto.Core.MediaFileType=function(e){return e.unknown=0,e.ism=1,e.mp3=2,e.mp4=3,e.mov=4,e.wmv=5,e.avi=6,e.manifest=7,e.hist=8,e.wav=9,e.packedraw=10,e.hls=11,e.rawsample=12,e.m4a=13,e.m4v=14,e}(Panopto.Core.MediaFileType||{}),Panopto.Core.InvocationType=function(e){return e.None=0,e.VideoPodcastDownload=1,e.AudioPodcastDownload=2,e.VideoPodcastStreaming=4,e.AudioPodcastStreaming=8,e.VideoPodcastSyndicated=16,e.AudioPodcastSyndicated=32,e.WebViewer=64,e.EmbedViewer=128,e.MobileApplication=256,e.WebViewerBroadcast=512,e.TabletDownload=1024,e.MobileWebBroadcast=2048,e.EmbedBroadcast=4096,e.MobileApplicationBroadcast=8192,e.AndroidApplication=16384,e.AndroidApplicationBroadcast=32768,e.SocialEmbed=65536,e.All=2147483647,e}(Panopto.Core.InvocationType||{}),Panopto.Core.StreamRequestStartReason=function(e){return e.Unknown=0,e.Unexpected=1,e.Start=2,e.Resume=3,e.Seek=4,e.NewSpeed=5,e}(Panopto.Core.StreamRequestStartReason||{}),Panopto.Core.StreamRequestStopReason=function(e){return e.Unknown=0,e.Unexpected=1,e.End=2,e.Pause=3,e.Seek=4,e.SpeedChange=5,e.PlayerClose=6,e}(Panopto.Core.StreamRequestStopReason||{}),Panopto.Core.ViewerLogEntryType=function(e){return e.UserInitiatedSync=1,e.StreamDesync=2,e.StreamSync=3,e.StreamChange=4,e.PlayStateChange=5,e.PositionSet=6,e.PlaybackSpeedChange=7,e.QualityChange=8,e.FullscreenChange=9,e}(Panopto.Core.ViewerLogEntryType||{}),Panopto.Core.ViewerPlayState=function(e){return e.Playing=1,e.Paused=2,e.Stopped=3,e.Buffering=4,e}(Panopto.Core.ViewerPlayState||{}),Panopto.Core.NavBarSection=function(e){return e.None=0,e.Folders=1,e.Admin=2,e.MultiSiteAdmin=3,e}(Panopto.Core.NavBarSection||{}),Panopto.Core.PlayableObjectType=function(e){return e.Video=0,e.Playlist=1,e.Shortcut=2,e}(Panopto.Core.PlayableObjectType||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Extensions=function(e){return e.superior=function(e,t){var o=e[t];return function(){return o.apply(e,arguments)}},e.base=function(t){var o={};for(var n in t)t.hasOwnProperty(n)&&"function"==typeof t[n]&&(o[n]=e.superior(t,n));return o},String.prototype.format||(String.prototype.format=function(){var e=arguments;return 1===arguments.length&&$.isArray(arguments[0])&&(e=arguments[0]),this.replace(/{(\d+)}/g,function(t,o){return"undefined"!=typeof e[o]?e[o]:t})}),String.prototype.replaceAll=function(e,t){var o=new RegExp(e,"g");return this.replace(o,t)},String.prototype.repeat||(String.prototype.repeat=function(e){for(var t="",o=this.valueOf();e>0;)1&e&&(t+=o),e>>=1,o+=o;return t}),Math.clamp=function(e,t,o){return Math.min(Math.max(e,t),o)},Date.prototype.toWCFString=function(){return"/Date({0})/".format(this.getTime())},Date.prototype.toISOString||(Date.prototype.toISOString=function(){var e=function(e){return e<10?"0"+e:e};return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}),_.findIndex||(_.findIndex=function(e,t){for(var o=0;o<e.length;o++)if(t(e[o]))return o}),_.findLastIndex||(_.findLastIndex=function(e,t){for(var o=e.length-1;o>=0;o--)if(t(e[o]))return o}),e}(Panopto.Core.Extensions||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.JobQueue=function(e){e=e||{};var t=e.maxDegreeOfParallelism||4,o=e.maxAttempts||3,n=!!e.autoStart,r=!1,a={},i=[],s=[],c=[],l=0,p={},d=0,u=function(){return l++},f=function(){return!_.isEmpty(a)},m=function(e){return a[e]=a[e]||[]},v=function(){var e=_.keys(a),t=e.length?_.min(e):null,o=a[t].shift();return a[t].length||delete a[t],o},C=function(){if(f()||i.length){var e;for(r=!0;f()&&i.length<t;)e=v(),P(e)||(!o||e.attempts<o?(i.push(e),e.complete=_.partial(function(e,t){P(e)||(t||(e.attempts++,m(e.priority).push(e)),i=_.reject(i,function(t){return t.id==e.id}),_.defer(C))},e),e.cancel=_.partial(function(e){i=_.reject(i,function(t){return t.id==e.id}),e.onCancel&&e.onCancel(),_.defer(C)},e),e.attempt(e.complete)):(e.onFailure&&e.onFailure(),_.defer(C)))}else r&&(r=!1,s=c=[],_.each(p,function(e){e()}))},P=function(e){return s.indexOf(e.id)>-1||c.indexOf(e.correlationId)>-1};this.isRunning=function(){return r},this.getMaxDegreeOfParallelism=function(){return t},this.getMaxAttempts=function(){return o},this.hasQueuedJobs=f,this.emptyQueue=function(){a={}},this.queueJob=function(e){var t=u(),o=Number(e.priority)||0,r={id:t,attempt:e.attempt,onCancel:e.onCancel,onFailure:e.onFailure,correlationId:String(e.correlationId),priority:o,attempts:0};return m(r.priority).push(r),n&&C(),t},this.doJobs=C,this.cancelJob=function(e){e=Number(e),s.indexOf(e)===-1&&s.push(e);var t=_.findWhere(i,{id:e});t&&t.cancel()},this.cancelCorrelatedJobs=function(e){e=String(e),c.indexOf(e)===-1&&c.push(e);var t=_.where(i,{correlationId:e});_.each(t,function(e){e.cancel()})},this.completeCorrelatedJobs=function(e,t){e=String(e);var o=_.where(i,{correlationId:e});_.each(o,function(e){e.complete(t)})},this.addOnComplete=function(e){return p[d]=e,d++},this.removeOnComplete=function(e){delete p[e]}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.LogMode=function(e){return e.Playback="playback",e.All="all",e}(Panopto.Core.LogMode||{}),Panopto.Core.Logger=function(e,t){var o;return $(document).ready(function(){o=Panopto.Core.StringHelpers.parseQueryString(window.location.search.slice(1)).logmode}),{log:function(e,n){var r,a,i,s;if(window.console&&(o===t.All||o===n)){o===t.All&&(e="{0} ({1})".format(e,n));try{throw Error()}catch(e){r=e}try{a=r.stack.split("\n")[Panopto.Core.Browser.isFirefox?1:3],i=a.substring(a.lastIndexOf("/")+1,a.indexOf(".js")+3),a=a.substr(0,a.lastIndexOf(":")),s=a.substr(a.lastIndexOf(":")+1,a.length),console.log("{0} {1}: {2}".format(i,s,e))}catch(t){console.log(e)}}}}}(Panopto.Core.Logger||{},Panopto.Core.LogMode);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.CancellableRequest=function(e){this.cancel=e||function(){}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Analytics=Panopto.Core.Analytics||{},Panopto.Core.StreamRequestStartReason=Panopto.Core.StreamRequestStartReason||{},Panopto.Core.ViewerPlayState=Panopto.Core.ViewerPlayState||{},Panopto.Core.Analytics.PlaybackLogger=function(e,t,o){o=o||Panopto.Core.ServiceInterface.AnalyticsIngest.addStreamRequests;var n,r,a,i,s,c,l={ValidSpanThreshold:1,RealTimeJumpThreshold:1,UpdateSpanInterval:100,PostSpansInterval:3e4,EventNamespace:"logger"},p=[],d=!1,u=function(e){return e.secondsListened>=l.ValidSpanThreshold},f=function(o){n||(n={invocationId:t,playbackSpeed:e.playSpeed(),streamId:e.streamId(),startPosition:Math.max(0,e.position()),timestamp:new Date,secondsListened:0,secondsRejected:0,startReason:o||Panopto.Core.StreamRequestStartReason.Unknown,stopReason:null,lastUpdateTime:new Date,updatesRejected:0,lastRecordedPosition:null})},m=function(e){n&&u(n)&&(n.stopReason=e||Panopto.Core.StreamRequestStopReason.Unknown,p.push(n)),n=void 0},v=function(){var t,o,r,a=new Date;if(n&&(t=n.lastRecordedPosition?n.secondsListened+e.position()-n.lastRecordedPosition:e.position()-n.startPosition)){if(o=(a.getTime()-n.lastUpdateTime.getTime())/1e3,r=o*e.playSpeed()+l.RealTimeJumpThreshold,t>=n.secondsListened&&t<n.secondsListened+r)n.secondsListened=t;else{var i=0;i=t<n.secondsListened?n.secondsListened-t:t-(n.secondsListened+(r-l.RealTimeJumpThreshold)),n.secondsRejected+=i,n.updatesRejected+=1}n.updatesRejected&&(n.lastRecordedPosition=Math.max(0,e.position())),n.lastUpdateTime=a}},C=function(e){e=_.defaults(e||{},{isUnloading:!1});var t,r=n&&u(n)&&n.secondsListened!==n.recordedSecondsListened;d||(t=p.concat(r?[n]:[]),t.length&&(d=!0,r&&(n.recordedSecondsListened=n.secondsListened),o(t,function(e){t[t.length-1].id=e},function(){r&&(n=void 0,f(Panopto.Core.StreamRequestStartReason.Unexpected))},function(){_.each(t,function(e){var t=p.indexOf(e);t>=0&&p.splice(t,1)}),d=!1},e.isUnloading)))};return{start:function(){i=e.onSeek(function(){m(Panopto.Core.StreamRequestStopReason.Seek),f(Panopto.Core.StreamRequestStartReason.Seek)}),s=e.onSpeedChange(function(){m(Panopto.Core.StreamRequestStopReason.SpeedChange),f(Panopto.Core.StreamRequestStartReason.NewSpeed)}),c=e.onPlayStateChangeLog(function(e,t){e===Panopto.Core.ViewerPlayState.Playing&&t===Panopto.Core.ViewerPlayState.Paused?m(Panopto.Core.StreamRequestStopReason.Pause):e===Panopto.Core.ViewerPlayState.Paused&&t===Panopto.Core.ViewerPlayState.Playing?f(Panopto.Core.StreamRequestStartReason.Resume):e===Panopto.Core.ViewerPlayState.Stopped&&t===Panopto.Core.ViewerPlayState.Playing?f(Panopto.Core.StreamRequestStartReason.Start):t===Panopto.Core.ViewerPlayState.Stopped&&m(Panopto.Core.StreamRequestStopReason.End)}),r=setInterval(v,l.UpdateSpanInterval),a=setInterval(C,l.PostSpansInterval),n=void 0,p.length=0,f(Panopto.Core.StreamRequestStartReason.Start),$(window).on("beforeunload."+l.EventNamespace,function(){m(Panopto.Core.StreamRequestStopReason.PlayerClose),C({isUnloading:!0})})},stop:function(){r&&clearInterval(r),a&&clearInterval(a),i&&e.offSeek(i),playerSpeedHandle&&e.offSpeedChange(playerSpeedHandle),c&&e.offPlayStateChangeLog(c),$(window).off("beforeunload."+l.EventNamespace),m(Panopto.Core.StreamRequestStopReason.End),C()}}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.CookieHelpers=function(e){return e.setCookie=function(e,t,o){var n=new Date,r="";o&&(n.setTime(n.getTime()+24*o*60*60*1e3),r="; expires="+n.toGMTString()),document.cookie=e+"="+t+r+"; path=/"},e.getCookie=function(e){for(var t,o=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(t=n[r];" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(o))return t.substring(o.length,t.length)}return null},e.deleteCookie=function(t){t&&e.setCookie(t,"",-1)},e.setUserCookie=function(t,o,n,r){var a=JSON.parse(e.getCookie(t))||{};a[o]=n,e.setCookie(t,JSON.stringify(a),r)},e.getUserCookie=function(t,o){var n,r={},a=e.getCookie(t);return a&&(r=JSON.parse(a)),n=void 0===r[o]?null:r[o]},e}(Panopto.Core.CookieHelpers||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.ElementHelpers=function(e){var t=Panopto.Core.Constants,o="pointer-event";return e.clampSliderValue=function(e,t){return Math.clamp(t,e.slider("option","min"),e.slider("option","max"))},e.measureText=function(e,t){var o,n;return $("body").append("<div id='ruler'></div>"),n=$("#ruler"),n.css("display","inline-block"),n.css("font-size",e.css("font-size")),n.css("font-family",e.css("font-family")),n.text(t),o=n.width(),n.remove(),o},e.inputEllipsis=function(t,o,n){for(var r=1e3,a=!1;e.measureText(t,o)>t.width()&&r--;)a=!0,o=o.substring(0,o.length-(n.length+1)).concat(n);return{text:o,ellipsied:a}},e.silenceInputValuePropertyChange=function(e,t){if(e instanceof HTMLInputElement&&"onpropertychange"in e){var o=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");Object.defineProperty(e,"value",{get:function(){return o.get.call(this)},set:function(e){t(e),o.set.call(this,e)}})}},e.verticalEllipsis=function(e,t){_.each(e,function(e){var o=$(e),n=parseInt(o.css("min-height"),10),r=Math.max(parseInt(o.css("max-height"),10),n),a=function(e,n){var i,s;e=e||o.text(),e&&o[0].scrollHeight>r?(s=_.last(e.trim().split(" ")),e=e.substr(0,e.lastIndexOf(s)).trim(),o.text(e),a(e,!0)):n&&e.length>t.length&&(i=e.slice(0,e.length-t.length-1)+t,o.text(i))};a()})},e.toggleEnabledButton=function(e,t){e.prop("disabled",!t),e.toggleClass("disabled",!t)},e.putFocusIntoModal=function(e){var t="modal-focus";e.prop("tabindex",0).addClass(t).focus(),e.one("blur",function(){e.removeAttr("tabindex").removeClass(t)})},e.removePointerEvents=function(e,t){e.css("pointer-events","none"),_.each(t,function(t){e.on(t+"."+o,function(o){var n=$.Event(t);n.pageX=o.pageX,n.pageY=o.pageY,e.toggle(!1),$(document.elementFromPoint(o.pageX,o.pageY)).trigger(n),e.toggle(!0),o.stopPropagation(),o.preventDefault()})})},e.reattachPointerEvents=function(e){e.css("pointer-events",""),e.off("."+o)},e.toggleHidden=function(e,t){e.css("visibility",t?"hidden":"visible")},$(document).on("mouseenter."+t.EllipsisClass,"."+t.EllipsisClass,function(){var e=$(this),o=null;e.hasClass(t.NoTooltipClass)||((this.offsetWidth<this.scrollWidth||this.offsetHeight<this.scrollHeight)&&(o=jQuery.trim(e.text())),e.attr("title",o))}),e}(Panopto.Core.ElementHelpers||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.ImageHelpers=function(e){return e.saltImageUrl=function(e){return e.substring(0,e.lastIndexOf("=")+1)+Math.random()},e.bufferAndReplaceImageUrl=function(e,t,o,n){n=n||function(){};var r=function(e,t){e.is("img")?e.attr("src",t):e.css("background-image","url({0})".format(t)).css("z-index",e.css("z-index"))},a=function(e){return e.substring(0,e.lastIndexOf("=")+1)+Math.random()};if(e.length){var i=o||a(e.attr("src"));t.load(function(){t.unbind("load"),r(e,i),n(this)}).attr("src",i)}},e.queueLoad=function(e,t){if(e.length>0){var o=new Panopto.Core.JobQueue({maxDegreeOfParallelism:t,maxAttempts:1,autoStart:!0}),n=[],r=setInterval(function(){var t=_.groupBy(n,function(e){return 0!==e.width||0!==e.height});n=t[!1]||[],_.each(t[!0],function(e){var t=$(e).data("jobId");o.cancelJob(t)}),n.length||o.hasQueuedJobs()||(clearInterval(r),e.removeData("jobId"))},250);_.each(e,function(e){var t=function(t){n.push(e);var o=$(e);o.on("load error",function(){n.splice(n.indexOf(e),1),t(!0)}),o.attr("src",o.data("src"))},r=o.queueJob({attempt:t});$(e).data("jobId",r)})}},e.getAspectRatio=function(e,t){var o=new Image;o.onload=function(){t(o.width/o.height||1)},o.onerror=function(){t(1)},o.src=e},e}(Panopto.Core.ImageHelpers||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.StringHelpers=function(e){var t=Panopto.Core.Constants;e.parseBoolean=function(e){return"true"===String(e).toLowerCase()};var o=/(.*)\.(.*)/;return e.serializeObjectToString=function(e,t,o,n){var r="",a=function(e,o,r){o=n?encodeURIComponent(o):o,e=n?encodeURIComponent(e):e,r.push(t.format(o,e))};if(e&&"object"==typeof e){var i=[];_.each(e,function(e,t){_.isArray(e)?_.each(e,function(e){a(e,t,i)}):a(e,t,i)}),r=i.join(o)}return r},e.serializeObjectToQueryString=function(t){return e.serializeObjectToString(t,"{0}={1}","&",!0)},e.serializeObjectToInitParams=function(t){return e.serializeObjectToString(t,"{0}={1}",",",!1)},e.addQueryParameter=function(t,o){var n=e.serializeObjectToQueryString(o),r=t.indexOf("?")===-1?"?":"&";return t+r+n},e.setQueryParameters=function(t,o){var n=document.createElement("a");n.href=t;var r=e.parseQueryString(n.search,!0);return _.extend(r,o),n.search=e.serializeObjectToQueryString(r),n.href},e.convertFragmentToQuery=function(e){var t=e.indexOf("?")===-1?"?":"&";return e.replace("#",t)},e.replaceQueryString=function(t,o){var n=t.indexOf("?"),r=n>=0?t.substr(0,n):t;return r+"?"+e.serializeObjectToQueryString(o)},e.parseQueryString=function(e,t,o){var n,r,a={};if("string"==typeof e){0!==e.indexOf("?")&&0!==e.indexOf("#")||(e=e.substring(1)),n=e.split("&");for(var i=0;i<n.length;i++)r=n[i].split("="),t&&(r=_.map(r,decodeURIComponent)),r[0]&&(o?a[r[0].toLowerCase()]=r[1]:a[r[0]]=r[1])}return a},e.getMajorVersion=function(e){var t=e.lastIndexOf(".");return e.substring(0,t)},e.getHelpUrl=function(t,o,n){var r=e.getMajorVersion(t);return n?Panopto.Core.Constants.ShareUrl.format(r,"{0}/{1}".format(o,n)):Panopto.Core.Constants.ShareUrl.format(r,o)},e.convertValueToLocalizedString=function(e,t){var o=parseFloat(e);if(o.toString()===e)return o.toLocaleString();var n=Date.parse(e);if(!isNaN(n)){var r=new Date(n),a={weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short",localeMatcher:"lookup"};try{o=r.toLocaleDateString(t,a)}catch(e){o=r.toLocaleDateString()}return o}return e},e.displayStringFromResourceString=function(t,o,n,r){if(null!==t&&0===t.indexOf(o)){var a=t.split(","),i=a[0].trim().slice(o.length+1);if(t=r[i]||"",a.length>1){var arguments=$.map(a.slice(1),function(t){return e.convertValueToLocalizedString($.trim(t),n)});t=t.format(arguments)}}return t},e.readableByteCount=function(e,o,n){if(!e)return"0";var r=[o[t.ByteResourceKey.format("B")],o[t.ByteResourceKey.format("KB")],o[t.ByteResourceKey.format("MB")],o[t.ByteResourceKey.format("GB")],o[t.ByteResourceKey.format("TB")],o[t.ByteResourceKey.format("PB")],o[t.ByteResourceKey.format("EB")]],a=1024,i=Math.floor(Math.log(e)/Math.log(a)),s=Math.round(e/Math.pow(a,i)*10)/10;return(n?s.toFixed(1):s)+" "+r[i]},e.readableUploadProgress=function(t,o,n,r){var a=e.readableByteCount(t,n,!0),i=e.readableByteCount(o,n);return a.substr(a.indexOf(" ")+1)===i.substr(i.indexOf(" ")+1)&&(a=a.substring(0,a.indexOf(" "))),n[r].format(a,i)},e.getProviderForUser=function(e){var t=null;return e&&e.userKey&&e.userKey.indexOf("\\")>0&&(t=Panopto.user.userKey.split("\\")[0]),t},e.cleanIllegaljQueryChars=function(e){var t=["@","\\?","\\\\","{","}",":","&","#"," ","\\(","\\)"];return _.each(t,function(t){e=e.replaceAll(t,"")}),e},e.escapeRegex=function(e){return e.replace(/[ \- \[ \] { } ( ) * + ? . , \\ \^ $ | # \s ]/g,"\\$&")},e.lowerCaseFirstCharacter=function(e){var t=e;return _.isString(e)&&e.length&&(t=e[0].toLowerCase()+e.slice(1)),t},e.parseFilename=function(e){var t=e.match(o);return t.length?t[1]:e},e.parseExtension=function(e){var t=e.match(o);return t.length?t[2].toLowerCase():""},e}(Panopto.Core.StringHelpers||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.TextHelpers=function(e){var t=Panopto.Core.Constants,o=function(e){return e.innerHTML.replace(/&amp;/g,"&")};return e.appendText=function(e,t){e.appendChild(document.createTextNode(t))},e.highlightMatches=function(t,n,r,a){a=a||{};var i,s,c;return t&&n&&r?(_.isRegExp(n)||(s=a.caseSensitive?"":"i",n=new RegExp(Panopto.Core.StringHelpers.escapeRegex(n),s)),c=document.createElement("div"),e.cleanTextWithReplacement(t,c,n,function(e){return $("<span>").addClass(r).text(e[0]).get(0)}),i=o(c)):i=_.escape(t),i},e.cleanTextWithHighlighting=function(n,r){r=r||document.createElement("div");var a=new RegExp(t.HitMatcher.source+"|"+t.SafeBreakMatcher.source);return e.cleanTextWithReplacement(n,r,a,function(e){return e[0]===t.SafeBreakMatcher.source?$("<br>")[0]:$("<span>").addClass("match").text(e[1])[0]}),o(r)},e.cleanTextWithoutHighlighting=function(n,r){return r=r||document.createElement("div"),e.cleanTextWithReplacement(n,r,t.HitMatcher,function(e){return document.createTextNode(e[1])}),o(r)},e.trimTextToMatch=function(o,n){if(o=e.cleanTextWithHighlighting(o),o&&o.length>n){var r=0,a=new RegExp(t.HitMatcher.source),i=a.exec(o);o="";var s=RegExp.leftContext,c=!1;for(i.index+i[1].length>n&&(s=s.substring(RegExp.leftContext.indexOf(" ",i.index+i[1].length-n+2)+1),c=!0),c&&(o+="…"),o+=s,r+=o.length,o+=i[0],r+=i[1].length,s=RegExp.rightContext,c=!1;i=a.exec(s);)r+RegExp.leftContext.length+i[1].length<=n?(o+=RegExp.leftContext+i[0],r+=RegExp.leftContext.length+i[1].length,s=RegExp.rightContext):(c=!0,s=RegExp.leftContext);var l=s.substring(0,s.lastIndexOf(" ",n-r-2));o+=l,(l!==s||c)&&(o+="…")}return o},e.cleanTextWithReplacement=function(t,o,n,r){var a;for(o.innerHTML="";a=n.exec(t);)RegExp.leftContext&&e.appendText(o,RegExp.leftContext),t=RegExp.rightContext,o.appendChild(r(a));t&&e.appendText(o,t)},e.addMultilineStringToElement=function(e,t){for(var o=e.replace("\r\n","\n"),n=o.split("\n"),r=0;r<n.length;r++)$.trim(n[r]).length&&(t.appendChild(document.createTextNode(n[r])),r<n.length-1&&t.appendChild(document.createElement("br")))},e.innerText=function(e){return e=e||"",$("<span>"+e+"</span>").text()},e.hasHtmlTags=function(e){var t=/<\s*[a-zA-Z]+[^>]*>/g;return e.search(t)>=0},e.hasMatch=function(e){var o=new RegExp(t.HitMatcher.source),n=o.exec(e);return null!==n},e.urlsToLinks=function(e,t){t=t||"<a href='<@= word @>' target='_blank'><@= word @></a>";var o=e.split(" ");return o=_.map(o,function(e){return e.match(Panopto.Core.Constants.UrlMatcher)?_.template(t,{word:e}):e}),o.join(" ")},e.displayLineBreaks=function(e){return e.replace(/(?:\r\n|\r|\n)/g,"<br />")},e}(Panopto.Core.TextHelpers||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.TimeHelpers=function(e){return e.formatWin32EpochTimeToDate=function(e){var t=new Date(Panopto.Core.Constants.Win32EpochDate);return t.setSeconds(e),moment(t).isDST()&&t.setHours(t.getHours()+1),t},e.dateToWin32EpochTime=function(e){return(e.getTime()-Panopto.Core.Constants.Win32EpochDate)/1e3},e.currentWin32EpochTime=function(){return e.dateToWin32EpochTime(new Date)},e.formatTime=function(e,t,o,n,r,a,i){var s="";return i&&(s+=".",s+=("0".repeat(i)+Math.round(n/Math.pow(10,3-i))).slice(-i)),s=("0"+o).slice(-2)+s,e||a?(s=("0"+t).slice(-2)+r+s,s=e+r+s):s=t+r+s,s},e.toLocalPanoptoTime=function(t,o){var n=e.adjustForDST(t,o);return moment(moment(t).utcOffset(n).format("YYYY-MM-DD HH:mm")).toDate()},e.fromLocalPanoptoTime=function(t,o){var n=e.adjustForDST(t,o);if(t){var r=moment(t).format("YYYY-MM-DD HH:mm");r+=" "+n,t=moment(r,"YYYY-MM-DD HH:mm Z").toDate()}return t},e.adjustForDST=function(e,t){var o=parseInt(t.totalHours,10),n=t.supportsDST&&moment(e).isDST()?o+1:o,r=("0"+Math.abs(n)).slice(-2),a=n<0?"-":"+",i=t.baseUtcOffset.slice(-6);return a+r+i},e.formatDuration=function(t,o,n,r){t=r?t:Math.round(t);var a=t<0,i=moment.duration(Math.abs(t),"seconds"),s=e.formatTime(i.hours(),i.minutes(),i.seconds(),i.milliseconds(),o,n,r);return a&&e.durationFromFormattedString(s,o)?"-"+s:s},e.validateFormattedDuration=function(e,t,o){var n=new RegExp("^-?[0-9]*:[0-5][0-9]:[0-5][0-9]"+(o?"(.[0-9]{0,"+o+"})?":"")+"$");return e=e.replaceAll(t,":"),n.test(e)},e.durationFromFormattedString=function(e,t){
var o=e.split(".")[1];return o&&(e+="0".repeat(3-o.length)),moment.duration(e.replaceAll(t,":")).asSeconds()},e.utcDateToFormattedString=function(e,t){return moment.utc(e).local().locale(Panopto.lang).format(t)},e}(Panopto.Core.TimeHelpers||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UrlHelpers=function(e){var t=function(e){var t=document.createElement("a");return t.href=e,t};return e.getHost=function(e){return t(e).hostname},e.getProtocol=function(e){return t(e).protocol},e.removeParams=function(){window.history&&window.history.replaceState&&window.history.replaceState("","",document.location.pathname)},e.getStateURL=function(e,t){var o,n,r=e,a=[];if("object"==typeof t){r+="#";for(var i in t)null!==t[i]&&(o=Sys.Serialization.JavaScriptSerializer.serialize(t[i]),n=i+"="+encodeURIComponent(o),a.push(n));r+=a.join("&")}return r},e}(Panopto.Core.UrlHelpers||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Logic=Panopto.Core.Logic||{},Panopto.Core.Logic.Timeline=Panopto.Core.Logic.Timeline||{},Panopto.Core.Logic.Timeline.CutEditor=function(e){var t=function(t,o){return _.filter(e,function(e){return e.targetId===t&&e.targetType===o})},o=function(e,t){return t.end()>=e.start&&t.start<=e.end()},n=function(e,t){var o=Math.max(e.end(),t.end());t.start=Math.min(e.start,t.start),t.duration=o-t.start},r=function(r,a,i,s){var c=Panopto.Core.ServiceInterface.Rest.Objects.Cut({targetId:i,targetType:s,start:r,duration:a-r});_.each(t(i,s),function(t){o(t,c)&&(n(t,c),e.splice(e.indexOf(t),1))}),e.push(c),e.sort(function(e,t){return e.start-t.start})},a=function(o,n,r){var a;a=_.find(t(n,r),function(e){return e.start===o}),a&&e.splice(e.indexOf(a),1)},i=function(o,n){_.each(t(o,n),function(t){e.splice(e.indexOf(t),1)})};return{addCut:r,removeCut:a,removeAll:i,cuts:function(t){return t?void(e=t):e}}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Logic=Panopto.Core.Logic||{},Panopto.Core.Logic.Timeline=Panopto.Core.Logic.Timeline||{},Panopto.Core.Logic.Timeline.Timeline=function(e,t){var o=Panopto.Core.Logic.Timeline.TimelineElement;t=t||[];var n,r,a=[],i=function(e){var t=e,o=_.find(a,function(e){return e.length()>t||void(t-=e.length())});return{element:o,offset:t}},s=function(e,t){var o=e,n=[];return t>0&&_.find(a,function(e){return e.length()>o&&n.push(e),o-=e.length(),o+t<=0}),n},c=function(e){var t,o,n=-1,r=i(e),s=r.element,c=r.offset;return s?(o=a.indexOf(s),0===c?n=o:c===s.length()?n=o+1:(t=s.split(c),n=o+1,a.splice(n,0,t))):0===c&&(n=a.length),n},l=function(e,t){return c(e),c(e+t),s(e,t)},p=function(t){var o,r=t.start,a=_.find(e,function(e){return t.targetType===Panopto.Core.ServiceInterface.Rest.Objects.TypeName.Stream&&t.targetId===e.id});a&&(r+=a.absoluteStart-n),o=l(r,t.duration),_.each(o,function(e){a?e.remove(a):e.clear()})},d=function(e){var t=l(e.absoluteStart-n,e.duration),o=0;_.each(t,function(t){t.add(e,o),o+=t.length()})},u=function(){a.length=0,n=_.min(_.pluck(e,"absoluteStart")),r=_.max(_.map(e,function(e){return e.absoluteEnd()})),a.push(o(r-n)),_.each(e,d),_.each(t,p)},f=function(){return _.reduce(a,function(e,t){return e+t.toString()+"\n"},"")},m=function(){return _.findIndex(a,function(e){return e.containsPrimary()})},v=function(){return _.findLastIndex(a,function(e){return e.containsPrimary()})};return u(),{reset:function(o,n){e=o,t=n,u()},elements:function(){return a},toString:f,firstPrimaryIndex:m,lastPrimaryIndex:v}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Logic=Panopto.Core.Logic||{},Panopto.Core.Logic.Timeline=Panopto.Core.Logic.Timeline||{},Panopto.Core.Logic.Timeline.StreamReference=function(e,t){return{stream:e,offset:t,toString:function(){return"[Stream '{0}' at {1}]".format(e.id,t)}}},Panopto.Core.Logic.Timeline.TimelineElement=function(e){var t=Panopto.Core.Logic.Timeline.TimelineElement,o=Panopto.Core.Logic.Timeline.StreamReference,n=[],r=function(e){return _.find(n,function(t){return t.stream.id===e})},a=function(){return _.any(n,function(e){return e.stream.isPrimary})},i=function(e,t){n.push(o(e,t))},s=function(e){n=_.reject(n,function(t){return t.stream.id===e.id})},c=function(){n.length=0},l=function(o){var r=t(e-o);return _.each(n,function(e){r.add(e.stream,e.offset+o)}),e=o,r},p=function(){return"{0} {1}".format(e,_.reduce(n,function(e,t){return e+t.toString()+" "},""))};return{length:function(){return e},streams:function(){return n},getStreamById:r,containsPrimary:a,add:i,remove:s,clear:c,split:l,toString:p}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=Panopto.Core.ServiceInterface.Rest.Api||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Access=function(e,t,o){var n="Access";return e.getAccess=function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,paramsObj:e},function(e,t,n){r&&r(o.PagingResponse(e,n,o.Access))},a,i)},e.deleteAccess=function(e,r,a,i){t.makeCall(o.HttpMethods.Delete,{serviceName:n,id:e},r,a,i)},e.batchDelete=function(e,r){t.makeChunkedDeleteCalls(function(e,r,a,i){t.makeCall(o.HttpMethods.Delete,{serviceName:n,paramsObj:{ids:e},path:t.BatchPath},r,a,i)},e,r)},e.createAccess=function(e,r,a,i){t.makeCall(o.HttpMethods.Post,{serviceName:n,data:e.toModel()},function(e){r(o.Access(e))},a,i)},e.batchCreate=function(e,r,a,i,s,c){var l={};r&&(l.content=a),t.makeCall(o.HttpMethods.Post,{serviceName:n,path:t.BatchPath,data:_.map(e,function(e){return e.toModel()}),paramsObj:l},function(e){i(Panopto.Core.ServiceInterface.Rest.Objects.BatchResult(e,o.Access))},s,c)},e.readReceiverSuggestions=function(e,r,a,i,s){t.makeCall(o.HttpMethods.Post,{serviceName:n,path:"receiverSuggestions",data:e,paramsObj:{pageSize:r}},function(e,t,n){a&&a(_.map(e,function(e){return o[e.TypeName](e)}))},i,s)},e}(Panopto.Core.ServiceInterface.Rest.Access||{},Panopto.Core.ServiceInterface.Rest.Api,Panopto.Core.ServiceInterface.Rest.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.PublicAPI=Panopto.Core.ServiceInterface.PublicAPI||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.AccessManagement=function(e,t,o){var n="AccessManagement";return e.getSelfUserAccessDetails=function(e,r,a){t.ajax(n,"GetSelfUserAccessDetails",{},t.Versions.V42,function(t){e(o.UserAccessDetails(t))},r,a)},e}(Panopto.Core.ServiceInterface.AccessManagement||{},Panopto.Core.ServiceInterface.PublicAPI,Panopto.Core.ServiceInterface.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.AnalyticsIngest=function(e,t){var o="application/json; charset=utf-8",n=function(e){return"{0}://{1}{2}/Services/Analytics.svc/{3}".format(Panopto.Core.ServiceInterface.uriScheme,window.location.host,Panopto.Core.ServiceInterface.baseUrl,e)},r=function(e,t,r,a,i,s){var c;window.location.protocol!==Panopto.Core.ServiceInterface.uriScheme&&(c={withCredentials:!0}),$.ajax({type:"POST",url:n(e),contentType:o,data:JSON.stringify(t),dataType:"json",success:r,error:a,complete:i,xhrFields:c,async:!s})},a=function(e){return{ID:e.id||0,InvocationID:e.invocationId,PlaybackSpeed:e.playbackSpeed,StreamID:e.streamId,StartPosition:e.startPosition,StartReason:e.startReason,StopReason:e.stopReason,SecondsListened:e.secondsListened,SecondsRejected:e.secondsRejected,TimeStamp:e.timestamp.toWCFString(),ClientTimeStamp:e.timestamp.toWCFString(),UpdatesRejected:e.updatesRejected}};return e.addStreamRequests=function(e,t,i,s,c){var l="AddStreamRequests",p={streamRequests:_.map(e,a)},d=!1;if(c&&navigator.sendBeacon)try{d=navigator.sendBeacon(n(l),new Blob([JSON.stringify(p)],{type:o}))}catch(e){}if(!d){var u=!!c;r(l,p,t,i,s,u)}},e}(Panopto.Core.ServiceInterface.AnalyticsIngest||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.WCFRest=Panopto.Core.ServiceInterface.WCFRest||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=Panopto.Core.ServiceInterface.Rest.Api||{},Panopto.Core.ServiceInterface.WCFRest.AnalyticsReports=function(e,t){var o="{0}/Services/".format(Panopto.appRoot),n="AnalyticsReports.svc";return e.queueReport=function(e,r,a,i){t.makeCall(Panopto.Core.ServiceInterface.Rest.Objects.HttpMethods.Get,{alternateUrl:o,serviceName:n,path:"QueueReport",paramsObj:e},r,a,i)},e}(Panopto.Core.ServiceInterface.WCFRest.AnalyticsReports||{},Panopto.Core.ServiceInterface.Rest.Api);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.PublicAPI=Panopto.Core.ServiceInterface.PublicAPI||{},Panopto.Core.ServiceInterface.Auth=function(e,t){var o="Auth";return e.getAuthenticatedUrl=function(e,n,r,a){t.ajax(o,"GetAuthenticatedUrl",{targetUrl:e},t.Versions.V42,n,r,a)},e}(Panopto.Core.ServiceInterface.Auth||{},Panopto.Core.ServiceInterface.PublicAPI);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.WCFRest=Panopto.Core.ServiceInterface.WCFRest||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=Panopto.Core.ServiceInterface.Rest.Api||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.WCFRest.DataCS=function(e,t,o){var n=function(e,n,r,a,i){t.makeCall(o.HttpMethods.Post,{alternateUrl:String.format("{0}/Services/",Panopto.appRoot),serviceName:"Data.svc",path:e,data:n},r,a,i)};return e.getSessions=function(e,t,r,a){n("GetSessions",{queryParameters:e},function(e){t(_.map(e.d.Results,o.Session.fromSessionRow))},r,a)},e.getFolders=function(e,t,r,a){n("GetFolders",{queryParameters:e},function(e){t(_.map(e.d.Results,o.Folder.fromFolderRow))},r,a)},e.submitViewerClientLog=function(e,t,o,r){n("SubmitViewerClientLog",{log:e.toModel()},t,o,r)},e}(Panopto.Core.ServiceInterface.WCFRest.DataCS||{},Panopto.Core.ServiceInterface.Rest.Api,Panopto.Core.ServiceInterface.Rest.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=Panopto.Core.ServiceInterface.Rest.Api||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.FolderAccessItems=function(e,t,o){var n="FolderAccessItems",r="{0}/IsInheritingAccess/{1}";return e.getOne=function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,id:e},function(e){r&&r(o.FolderAccessItem(e))},a,i)},e.getMany=function(e,r){t.makeChunkedGetCalls(function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,paramsObj:{ids:e}},r,a,i)},e,r,o.FolderAccessItem)},e.validateCreate=function(e,r,a,i){t.makeCall(o.HttpMethods.Post,{serviceName:n,data:e.toModel(),paramsObj:{validateOnly:!0}},function(e){r&&r(o.FolderAccessItem(e))},a,i)},e.create=function(e,r,a,i){t.makeCall(o.HttpMethods.Post,{serviceName:n,data:e.toModel()},function(e){r&&r(o.FolderAccessItem(e))},a,i)},e.saveOne=function(e,r,a,i){t.makeCall(o.HttpMethods.Put,{serviceName:n,data:e.toModel()},function(e){r&&r(o.FolderAccessItem(e))},a,i)},e.saveMany=function(e,r,a,i){t.makeCall(o.HttpMethods.Put,{serviceName:n,path:t.BatchPath,data:_.map(e,function(e){return e.toModel()})},function(e){r&&r(Panopto.Core.ServiceInterface.Rest.Objects.BatchResult(e,o.FolderAccessItem))},a,i)},e.saveIsInheritingAccess=function(e,a,i,s,c,l){t.makeCall(o.HttpMethods.Post,{serviceName:n,path:r.format(e,a),data:_.map(i,function(e){return e.id})},function(e){s&&s(o.FolderAccessItem(e))},c,l)},e}(Panopto.Core.ServiceInterface.Rest.FolderAccessItems||{},Panopto.Core.ServiceInterface.Rest.Api,Panopto.Core.ServiceInterface.Rest.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=Panopto.Core.ServiceInterface.Rest.Api||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Sort=Panopto.Core.ServiceInterface.Rest.Sort||{},Panopto.Core.ServiceInterface.Rest.Folders=function(e,t,o,n){var r="Folders",a="myFolder",i="personal/{0}";return e.Sort={Recent:"RecentlyUsed"},e.getOne=function(e,n,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:r,id:e},function(e){n&&n(o.Folder(e))},a,i)},e.getFolders=function(e,n,a,i){var s={serviceName:r,paramsObj:e};t.makeCall(o.HttpMethods.Get,s,function(e,t,r){n&&n(o.PagingResponse(e,r,o.Folder))},a,i)},e.getAllFolders=function(o,n,r){t.getAll(function(t,o,n){e.getFolders(t,o,n)},{},n,r)},e.getMyFolder=function(e,n,i){var s={serviceName:r,path:a};t.makeCall(o.HttpMethods.Get,s,function(t){e&&e(o.Folder(t))},n,i)},e.createPersonalFolder=function(e,n,a,s){var c={serviceName:r,path:i.format(e)};t.makeCall(o.HttpMethods.Post,c,function(e){n&&n(o.Folder(e))},a,s)},e.archivePersonalFolder=function(e,n,a,s){var c={serviceName:r,path:i.format(e)};t.makeCall(o.HttpMethods.Delete,c,function(e){n&&n(e)},a,s)},e.get=function(e,n,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:r,paramsObj:e},function(e,t,r){n(o.PagingResponse(e,r,o.Folder))},a,i)},e.getRecentlyUsed=function(t,o,n,r,a){e.get({pageSize:t,sort:e.Sort.Recent,sortDescending:!0,folderSet:o},n,r,a)},e}(Panopto.Core.ServiceInterface.Rest.Folders||{},Panopto.Core.ServiceInterface.Rest.Api,Panopto.Core.ServiceInterface.Rest.Objects,Panopto.Core.ServiceInterface.Rest.Sort);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=Panopto.Core.ServiceInterface.Rest.Api||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Groups=function(e,t,o){var n="Groups",r="members";return e.saveGroup=function(e,r,a,i){e.id?t.makeCall(o.HttpMethods.Put,{serviceName:n,data:e.toModel()},r,a,i):t.makeCall(o.HttpMethods.Post,{serviceName:n,data:e.toModel()},r,a,i)},e.batchSave=function(e,r,a,i,s){t.makeCall(o.HttpMethods.Post,{serviceName:n,path:t.BatchPath,data:_.map(e,function(e){return e.toModel()}),paramsObj:{validateOnly:r}},function(e){a(Panopto.Core.ServiceInterface.Rest.Objects.BatchResult(e,o.Group))},i,s)},e.getGroups=function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,paramsObj:e},function(e,t,n){r(o.PagingResponse(e,n,o.Group))},a,i)},e.addMembers=function(e,a,i,s,c){t.makeCall(o.HttpMethods.Post,{serviceName:n,id:e,path:r,data:a},function(e){i(Panopto.Core.ServiceInterface.Rest.Objects.BatchResult(e,o.User))},s,c)},e.deleteGroup=function(e,r,a,i){t.makeCall(o.HttpMethods.Delete,{serviceName:n,id:e},r,a,i)},e.deleteGroups=function(e,r){t.makeChunkedDeleteCalls(function(e,r,a,i){t.makeCall(o.HttpMethods.Delete,{serviceName:n,path:t.BatchPath,paramsObj:{ids:e}},r,a,i)},e,r)},e.getGroup=function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,id:e},function(e){r(o.Group(e))},a,i)},e.getGroupMembers=function(e,a,i,s,c){t.makeCall(o.HttpMethods.Get,{serviceName:n,id:e,path:r,paramsObj:a},function(e,t,n){i(o.PagingResponse(e,n,o.User))},s,c)},e.removeGroupMember=function(e,a,i,s,c){var l=String.format("{0}/{1}",r,a);t.makeCall(o.HttpMethods.Delete,{serviceName:n,id:e,path:l},i,s,c)},e}(Panopto.Core.ServiceInterface.Rest.Groups||{},Panopto.Core.ServiceInterface.Rest.Api,Panopto.Core.ServiceInterface.Rest.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.MembershipProviders=function(e,t,o){return serviceName="membershipProviders",e.getAllProviders=function(e,n,r,a){t.makeCall(o.HttpMethods.Get,{serviceName:serviceName},function(t){if(n){var r=_.map(t,function(t){return o.MembershipProvider(t,e)});n(r)}},r,a)},e}(Panopto.Core.ServiceInterface.Rest.MembershipProviders||{},Panopto.Core.ServiceInterface.Rest.Api,Panopto.Core.ServiceInterface.Rest.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.MultipartUploadManagement=function(e){var t=function(){var e=function(e){var t={},o=e.split(String.fromCharCode(10));return _.each(o,function(e){var o=e.trim().split(":");o.length>1&&(t[o[0].trim()]=o.slice(1).join(":").trim())}),t},t=function(t,o){var n=[t.status,t.statusText].join(" "),r=t.responseText?(new DOMParser).parseFromString(t.responseText,"application/xml"):"",a=e(t.getAllResponseHeaders());o(n,r,a)};return function(e,o,n,r,a,i){var s=$.ajax({url:o,type:e,data:n,processData:!1,xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&r&&e.upload.addEventListener("progress",r,!1),e},success:function(e,o,n){a&&t(n,function(e,t,o){a(t,o)})},error:function(e,t,o){i&&"abort"!==t&&i(e,t,o)}});return new Panopto.Core.CancellableRequest(function(){s.abort()})}}(),o=function(e,o,n,r){var i=a(o);return t("POST",e+"/"+i,void 0,null,function(e){n(e.getElementsByTagName("UploadId")[0].childNodes[0].nodeValue,e)},r)},n=function(e,o,n,r,i,s,c){var l=(r-1)*n,p=o.slice(l,l+n),d=new Panopto.Core.CancellableRequest,u=a(o.name),f=new FileReader;return f.onload=function(o){var n=[e,"/",u,"?partNumber=",r].join("");d=t("PUT",n,o.target.result,i,function(e,t){s(p.size,t.ETag)},c)},f.readAsArrayBuffer(p),new Panopto.Core.CancellableRequest(function(){f&&f.readyState===FileReader.LOADING&&f.abort(),d.cancel()})},r=function(e,o,n,r,i,s){for(var c=a(o),l=[e,"/",c,"?uploadId=",n].join(""),p=1;p<r.length;p++)r[p]=["<Part><PartNumber>",p,"</PartNumber><ETag>",r[p],"</ETag></Part>"].join("");return t("POST",l,["<CompleteMultipartUpload>",r.join(""),"</CompleteMultipartUpload>"].join(""),null,function(e,t){i(e)},s)},a=function(e){return e.replace(/[^\w .]/g,"_")};return e.openUpload=o,e.uploadSlice=n,e.closeUpload=r,e.cleanFilename=a,e}(Panopto.Core.ServiceInterface.MultipartUploadManagement||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.MultipartUploadManager=function(e){var t=function(e){var t,o,n,r=function(){t=0,o=0,n=0};return r(),e.confidenceThreshold=3,e.getEffectiveByterate=function(){return 1e3*t},e.resetEffectiveByterate=r,e.logTransfer=function(e,r){t=(t*o+e)/(o+r),o+=r,n++},e.predictRemainingSeconds=function(t){return t&&n>=e.confidenceThreshold?t/e.getEffectiveByterate():-1},e}(t||{}),o=1,n=5242880;e.fileSliceSize=e.fileSliceSize||n;var r={},a=new Panopto.Core.JobQueue({maxDegreeOfParallelism:2}),i=function(e,t,o){var n=new Panopto.Core.CancellableRequest;a.queueJob({correlationId:e.fileId,attempt:function(o){n=Panopto.Core.ServiceInterface.MultipartUploadManagement.openUpload(e.uploadUri,"",function(n){e.uploadId=n,t(e),o(!0)},function(){o()})},onFailure:o,onCancel:function(){n.cancel()}})},s=function(t,n,r,i,s,c,l){var p=new Panopto.Core.CancellableRequest;a.queueJob({priority:o,correlationId:t.fileId,attempt:function(o){r(),p=Panopto.Core.ServiceInterface.MultipartUploadManagement.uploadSlice(t.uploadUri,t.file,e.fileSliceSize,n,i,function(e,t){s(e,t),o(!0)},function(){c(),o()})},onFailure:l,onCancel:function(){p.cancel()}})},c=function(e,t,o,n){var r=new Panopto.Core.CancellableRequest;a.queueJob({correlationId:e.fileId,attempt:function(n){r=Panopto.Core.ServiceInterface.MultipartUploadManagement.closeUpload(e.uploadUri,e.file.name,e.uploadId,t,function(){o(e.fileId),n(!0)},function(){n()})},onFailure:n,onCancel:function(){r.cancel()}})};return e.queueUpload=function(o,n,a,l){i(o,function(o){r[o.fileId]=o.file.size;for(var i=Math.ceil(o.file.size/e.fileSliceSize),p=0,d=0,u=[],f=1;f<=i;f++)!function(e){var f,m=0;s(o,e,function(){f=new Date},function(e){var a=e.loaded-m;m=e.loaded;var i=new Date-f;f=new Date,t.logTransfer(a,i),d+=a,r[o.fileId]-=a,n(d)},function(t,n){u[e]=n,p++,p===i&&c(o,u,function(e){delete r[o.fileId],a(e)},l)},function(){r[o.fileId]+=m,d-=m,m=0,n(d)},l)}(f)},l)},e.upload=function(){a.isRunning()||a.doJobs()},e.cancelUpload=function(e){a.isRunning()&&a.cancelCorrelatedJobs(e)},e.resetTimer=function(){t.resetEffectiveByterate()},e.predictRemainingSeconds=function(e){return Math.round(t.predictRemainingSeconds(r[e])/a.getMaxDegreeOfParallelism())},e.isRunning=function(){return a.isRunning()},e}(Panopto.Core.ServiceInterface.MultipartUploadManager||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=Panopto.Core.ServiceInterface.Rest.Api||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.PlaylistAccessItems=function(e,t,o){var n="PlaylistAccessItems";return e.create=function(e,r,a,i){t.makeCall(o.HttpMethods.Post,{serviceName:n,data:playlistAccessItemObj.toModel()},function(e){r&&r(o.PlaylistAccessItem(e))},a,i)},e.getOne=function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,id:e},function(e){r&&r(o.PlaylistAccessItem(e))},a,i)},e.getMany=function(e,r){t.makeChunkedGetCalls(function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,paramsObj:{ids:e}},r,a,i)},e,r,o.PlaylistAccessItem)},e}(Panopto.Core.ServiceInterface.Rest.PlaylistAccessItems||{},Panopto.Core.ServiceInterface.Rest.Api,Panopto.Core.ServiceInterface.Rest.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=Panopto.Core.ServiceInterface.Rest.Api||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Playlists=function(e,t,o){var n="Playlists";return e.create=function(e,r,a,i){t.makeCall(o.HttpMethods.Post,{serviceName:n,data:e.toModel()},function(e){r&&r(o.Playlist(e))},a,i)},e.getOne=function(e){t.makeCall(o.HttpMethods.Get,{serviceName:n,id:e.id},function(t){e.onSuccess&&e.onSuccess(o.Playlist(t))},e.onFailure,e.onComplete)},e.getMany=function(e,r){t.makeChunkedGetCalls(function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,paramsObj:{ids:e}},r,a,i)},e,r,o.Playlist)},e.update=function(e,r,a,i){t.makeCall(o.HttpMethods.Put,{serviceName:n,data:e.toModel()},function(e){r(o.Playlist(e))},a,i)},e.deletePlaylist=function(e,r,a,i){t.makeCall(o.HttpMethods.Delete,{serviceName:n,id:e},r,a,i)},e}(Panopto.Core.ServiceInterface.Rest.Playlists||{},Panopto.Core.ServiceInterface.Rest.Api,Panopto.Core.ServiceInterface.Rest.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.PublicAPI=function(e){return e.Versions={V42:"4.2",V46:"4.6"},e.ajax=function(e,t,o,n,r,a,i){r=r||function(){},a=a||function(){},i=i||function(){};var s=function(e){r(e.d)};$.ajax({type:"POST",url:"{0}/PublicAPI/{1}/{2}.svc/json/{3}".format(Panopto.Core.ServiceInterface.baseUrl,n,e,t),data:JSON.stringify(o),contentType:"application/json; charset=utf-8",dataType:"json",success:s,error:a,complete:i,xhrFields:{withCredentials:!0}})},e}(Panopto.Core.ServiceInterface.PublicAPI||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Recorder=function(e,t){var o=function(e,t,o,n){var r=function(e){o&&o(e.d)},a=function(e){n&&n(JSON.stringify(e))};$.ajax({type:"POST",url:"{0}/Services/Recorder.asmx/{1}".format(Panopto.Core.ServiceInterface.baseUrl,e),contentType:"application/json; charset=utf-8",data:JSON.stringify(t),dataType:"json",success:r,error:a})};return t.SessionIdPair=function(e){return{sessionId:e.publicID,deliveryId:e.deliveries[0].PublicID}},e.getDeliveryIdsFromSessionIds=function(e,n,r){o("GetSessions",{sessionIDs:e},function(e){var o=_.map(e,t.SessionIdPair);n(o)},r)},e.getBroadcastData=function(e,n,r,a){o("GetBroadcastData",{sessionPublicID:e,cutoff:n},function(e){r(e.ViewerCount,_.map(e.Questions,t.RecorderQuestion))},a)},e.logout=function(e,t){o("Logout",void 0,e,t)},e.hasWriteAccessToFolder=function(e,t,n){o("GetWriteableSessionGroup",{sessionGroupId:e},t,n)},e.getFirstWriteableFolder=function(e,t){o("GetSessionGroups",void 0,function(t){var o;t&&t.length>0&&(o=t[0].publicID),e&&e(o)},t)},e.addSession=function(e,t,n,r,a){var i={sessionGroupID:e,sessionName:t,bBroadcast:n};o("AddSession",i,function(e){if(r){var t=e?e.publicID:null;r(t)}},a)},e}(Panopto.Core.ServiceInterface.Recorder||{},Panopto.Core.ServiceInterface.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=Panopto.Core.ServiceInterface.Rest.Api||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.RecorderScheduleEntries=function(e,t,o){var n="RecorderScheduleEntries";return e.save=function(e,r,a,i,s){t.makeCall(e.id?o.HttpMethods.Put:o.HttpMethods.Post,{serviceName:n,paramsObj:{resolveConflicts:r},data:e.toModel()},function(e){a&&a(o.recorderScheduleEntry(e))},i,s)},e.getRecorderScheduleEntries=function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,paramsObj:e},function(e){r&&r(_.map(e,o.recorderScheduleEntry))},a,i)},e}(Panopto.Core.ServiceInterface.Rest.RecorderScheduleEntries||{},Panopto.Core.ServiceInterface.Rest.Api,Panopto.Core.ServiceInterface.Rest.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.PublicAPI=Panopto.Core.ServiceInterface.PublicAPI||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.RemoteRecorderManagement=function(e,t,o){var n="RemoteRecorderManagement";return e.getRemoteRecorders=function(e,r,a,i){t.ajax(n,"GetRemoteRecordersById",{remoteRecorderIds:e},t.Versions.V42,function(e){r(_.map(e,o.RemoteRecorder))},a,i)},e.getRemoteRecorder=function(t,o,n,r){e.getRemoteRecorders([t],function(e){o(e[0])},n,r)},e}(Panopto.Core.ServiceInterface.RemoteRecorderManagement||{},Panopto.Core.ServiceInterface.PublicAPI,Panopto.Core.ServiceInterface.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=Panopto.Core.ServiceInterface.Rest.Api||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.RemoteRecorders=function(e,t,o){var n="remoteRecorders",r="updatelastaccessed";return e.getSuggestions=function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,paramsObj:{query:e}},function(e){r(_.map(e,o.RemoteRecorder))},a,i)},e.updateTimeZone=function(e,r,a,i){t.makeCall(o.HttpMethods.Put,{serviceName:n,data:e.toModel()},function(e){r&&r(o.RemoteRecorder(e))},a,i)},e.updateLastAccessed=function(e,a,i,s){t.makeCall(o.HttpMethods.Post,{serviceName:n,id:e,path:r},a,i,s)},e.getRemoteRecorders=function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{paramsObj:e,serviceName:n},function(e,t,n){r(o.PagingResponse(e,n,o.RemoteRecorder))},a,i)},e.getRemoteRecorder=function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,id:e},function(e){r(o.RemoteRecorder(e))},a,i)},e}(Panopto.Core.ServiceInterface.Rest.RemoteRecorders||{},Panopto.Core.ServiceInterface.Rest.Api,Panopto.Core.ServiceInterface.Rest.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=function(e){var t=function(e){var t=e.alternateUrl||"{0}/Api/".format(Panopto.appRoot),o=e.paramsObj?"?"+Panopto.Core.StringHelpers.serializeObjectToQueryString(e.paramsObj):"",n=e.id?"/"+e.id:"",r=e.path?"/"+e.path:"",a=e.serviceName||"";return"{0}{1}{2}{3}{4}".format(t,a,n,r,o)},o=function(e,t,o,n){e.success=t||function(){},e.error=o||function(){},e.complete=n||function(){},e.contentType=e.contentType||"application/json; charset=utf-8",e.dataType=e.dataType||"json",e.xhrFields=e.xhrFields||{withCredentials:!0},e.data=e.data?JSON.stringify(e.data):e.data,$.ajax(e)};return e.makeCall=function(e,n,r,a,i,s){o({type:e,url:t(n),data:n.data,headers:n.headers,async:!s},r,a,i)},e.sendBeacon=function(e){var o=new Blob([JSON.stringify(e.data)],{type:"application/json; charset=utf-8"});navigator.sendBeacon(t(e),o)},e.makeChunkedIdCalls=function(e,t,o,n){var r,a,i=[],s=[],c=[],l=function(e){var t=[],o=function(e){e.length&&(t.push(_.first(e,Panopto.Core.Constants.MaxGuidsInUrl)),o(_.rest(e,Panopto.Core.Constants.MaxGuidsInUrl)))};return o(e),t},p=function(){a||o(i,s,c)};r=l(t),a=r.length,p(),_.each(r,function(t){e(t,function(e){n(e,i,s),a-=1,p()},function(e){c.push(e),a-=1,p()})})},e.makeChunkedDeleteCalls=function(t,o,n){e.makeChunkedIdCalls(t,o,n,function(e,t,o){var n=Panopto.Core.ServiceInterface.Rest.Objects.BatchResult(e,function(e){return e});_.each(n.succeeded,function(e){t.push(e)}),_.each(n.failed,function(e){o.push(e)})})},e.makeChunkedGetCalls=function(t,o,n,r){e.makeChunkedIdCalls(t,o,n,function(e,t){var o=_.map(e,r);_.each(o,function(e){t.push(e)})})},e.getAll=function(e,t,o,n){var r=[],a=0,i=function(){e(_.extend(t,{page:a}),function(e){r=r.concat(e.results),e.hasMorePages?(a++,i()):o(r)},n)};i()},e.ResponseCountKey="Total-Count",e.HasMorePagesKey="Has-More-Pages",e.BatchPath="batch",e.LastModified="Last-Modified",e.IfUnmodifiedSince="If-Unmodified-Since",e}(Panopto.Core.ServiceInterface.Rest.Api||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.PublicAPI=Panopto.Core.ServiceInterface.PublicAPI||{},Panopto.Core.ServiceInterface.PublicAPI.Services=function(e){var t=function(e,t,o,n,r,a){$.ajax({url:t,type:e,headers:o,data:n,contentType:"application/json; charset=utf-8",success:function(e,t,o){r&&r(e,o)},error:function(e,t,o){a&&a(e,t,o)}})},o=function(e){return _.map(e,function(e){return e.State=Panopto.Core.ServiceInterface.Objects.SessionState[e.State],new Panopto.Core.ServiceInterface.Objects.Session(e)})};return e.getSessions=function(e,n,r,a){t("GET","{0}/PublicAPI/4.1/Sessions?id={1}&fields={2}".format(Panopto.Core.ServiceInterface.baseUrl,e.join(","),n.join(",")),{Pragma:"no-cache"},null,function(e,t){var n=o(e);r(n,t)},a)},e.getSessionsMany=function(e,n,r,a){t("POST","{0}/PublicAPI/4.1/SessionsMany?fields={1}".format(Panopto.Core.ServiceInterface.baseUrl,n.join(",")),{Pragma:"no-cache"},JSON.stringify({ids:e
}),function(e,t){var n=o(e);r(n,t)},a)},e}(Panopto.Core.ServiceInterface.PublicAPI.Services||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=Panopto.Core.ServiceInterface.Rest.Api||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.SessionAccessItems=function(e,t,o){var n="SessionAccessItems";return e.create=function(e,r,a,i){t.makeCall(o.HttpMethods.Post,{serviceName:n,data:sessionAccessItemObj.toModel()},function(e){r&&r(o.SessionAccessItem(e))},a,i)},e.getOne=function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,id:e},function(e){r&&r(o.SessionAccessItem(e))},a,i)},e.getMany=function(e,r){t.makeChunkedGetCalls(function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,paramsObj:{ids:e}},r,a,i)},e,r,o.SessionAccessItem)},e}(Panopto.Core.ServiceInterface.Rest.SessionAccessItems||{},Panopto.Core.ServiceInterface.Rest.Api,Panopto.Core.ServiceInterface.Rest.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=Panopto.Core.ServiceInterface.Rest.Api||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.SessionChangeSets=function(e,t,o){var n="SessionChangeSets";return e.get=function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,paramsObj:{sessionId:e,isCommitted:!1}},function(e,t,n){r&&r(o.PagingResponse(e,n,o.SessionChangeSet))},a,i)},e.save=function(e,r,a,i){t.makeCall(e.id?o.HttpMethods.Put:o.HttpMethods.Post,{serviceName:n,data:e.toModel()},function(e){r&&r(o.SessionChangeSet(e))},a,i)},e.deleteChangeSet=function(e,r,a,i,s){t.makeCall(o.HttpMethods.Delete,{serviceName:n,id:e},r,a,i,s)},e.commitChanges=function(e,r,a,i){t.makeCall(o.HttpMethods.Post,{serviceName:n,id:e.id,data:e.toModel(),path:"commitChanges"},function(e){r&&r(o.SessionChangeSet(e))},a,i)},e.updateOwner=function(e,r,a,i,s){t.makeCall(o.HttpMethods.Post,{serviceName:n,id:e,path:"updateOwner",data:{ownerId:r}},function(e){a&&a(o.SessionChangeSet(e))},i,s)},e}(Panopto.Core.ServiceInterface.Rest.SessionChangeSets||{},Panopto.Core.ServiceInterface.Rest.Api,Panopto.Core.ServiceInterface.Rest.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=Panopto.Core.ServiceInterface.Rest.Api||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.SessionLists=function(e,t,o){var n="SessionLists",r="items/{0}",a="GetItemsWithAccessIssues",i="FixItemsWithAccessIssues",s="items",c="ViewableItemsOnly",l="EmbedViewableItemsOnly",p="Items.BuiltInGroupAccess";return e.HomePageListId="homePage",e.UnpublishedHomePageListId="homePageUnpublished",e.create=function(e,r,a,i){var s=o.SessionList({specialType:e}),c={serviceName:n,data:s.toModel()};t.makeCall(o.HttpMethods.Post,c,function(e){r&&r(o.SessionList(e))},a,i)},e.getOne=function(r,a,i,s,c){var l=a.includeEmbedViewableOnly,p=a.includeViewableOnly||a.includeItems&&r===e.HomePageListId,d=a.includeItems&&!p&&!l,u={serviceName:n,id:r,paramsObj:e.createIncludeParamsObj(d,p,l,a.includeBuiltInGroupAccess)};t.makeCall(o.HttpMethods.Get,u,function(e){i&&i(o.SessionList(e))},s,c)},e.getSessionLists=function(e,r,a,i){var s={serviceName:n,paramsObj:e};t.makeCall(o.HttpMethods.Get,s,function(e){r&&r(_.map(e,o.SessionList))},a,i)},e.update=function(e,r,a,i){var s={serviceName:n,id:e.id,data:e.toModel()};t.makeCall(o.HttpMethods.Put,s,function(e){r&&r(o.SessionList(e))},a,i)},e.copyTo=function(n,r,a,i,s,c){var l=e.createUpdateDateOptions(a);l.id=n,l.paramsObj.sourceId=r,t.makeCall(o.HttpMethods.Put,l,function(e){i&&i(o.SessionList(e))},s,c)},e.getItems=function(a,i,s,c,l){var p={serviceName:n,id:a,path:r.format(""),paramsObj:e.createIncludeParamsObj(!0,!1,!1,i.includeBuiltInGroupAccess)};p.paramsObj.PageSize=i.pageSize,t.makeCall(o.HttpMethods.Get,p,function(e){s&&s(_.map(e,o.Session))},c,l)},e.insertItem=function(n,a,i,s,c,l,p){var d=e.createUpdateDateOptions(a);d.id=n,d.path=r.format(s),d.data=i.toModel(),t.makeCall(o.HttpMethods.Put,d,function(e){c&&c(moment.utc(e).toDate())},l,p)},e.moveItem=function(n,a,i,s,c,l,p){var d=e.createUpdateDateOptions(a);d.id=n,d.path=r.format(i),d.paramsObj.destinationIndex=s,t.makeCall(o.HttpMethods.Put,d,function(e){c&&c(moment.utc(e).toDate())},l,p)},e.deleteItem=function(n,a,i,s,c,l){var p=e.createUpdateDateOptions(a);p.id=n,p.path=r.format(i),t.makeCall(o.HttpMethods.Delete,p,function(e){s&&s(moment.utc(e).toDate())},c,l)},e.createUpdateDateOptions=function(e){lastModifiedMoment=moment(e);var t={};t[Panopto.Core.ServiceInterface.Rest.Api.IfUnmodifiedSince]=lastModifiedMoment.toISOString();var o={serviceName:n,headers:t,paramsObj:{updateDate:lastModifiedMoment.toISOString()}};return o},e.createIncludeParamsObj=function(e,t,o,n){return paramsObj={},e?paramsObj={"collections[0].name":s}:t?paramsObj={"collections[0].name":c}:o&&(paramsObj={"collections[0].name":l}),(e||t||o)&&n&&(paramsObj["names[0]"]=p),paramsObj},e.GetItemsWithAccessIssues=function(e){var r={serviceName:n,id:e.id,path:a};t.makeCall(o.HttpMethods.Get,r,function(t){e.onSuccess&&e.onSuccess(_.map(t,o.Access))},e.onFailure||$.noop,e.onComplete||$.noop)},e.FixAccessIssues=function(e){var r={serviceName:n,id:e.id,path:i};t.makeCall(o.HttpMethods.Put,r,function(t){e.onSuccess&&e.onSuccess(t)},e.onFailure,e.onComplete)},e}(Panopto.Core.ServiceInterface.Rest.SessionLists||{},Panopto.Core.ServiceInterface.Rest.Api,Panopto.Core.ServiceInterface.Rest.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.PublicAPI=Panopto.Core.ServiceInterface.PublicAPI||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.SessionManagement=function(e,t,o){var n="SessionManagement";return e.addSession=function(e,r,a,i,s,c){t.ajax(n,"AddSession",{name:e,folderId:r,isBroadcast:a},t.Versions.V42,function(e){i(o.Session(e))},s,c)},e.deleteSessions=function(e,o,r,a){t.ajax(n,"DeleteSessions",{sessionIds:e},t.Versions.V42,o,r,a)},e.deleteSession=function(t,o,n,r){e.deleteSessions([t],o,n,r)},e.updateSessionName=function(e,o,r,a,i){t.ajax(n,"UpdateSessionName",{sessionId:e,name:o},t.Versions.V42,r,a,i)},e.updateSessionDescription=function(e,o,r,a,i){t.ajax(n,"UpdateSessionDescription",{sessionId:e,description:o},t.Versions.V42,r,a,i)},e.moveSessions=function(e,o,r,a,i){t.ajax(n,"MoveSessions",{sessionIds:e,folderId:o},t.Versions.V42,r,a,i)},e.moveSession=function(t,o,n,r,a){e.moveSessions([t],o,n,r,a)},e.getSessions=function(e,r,a,i){t.ajax(n,"GetSessionsById",{sessionIds:e},t.Versions.V42,function(e){r(_.map(e,o.Session))},a,i)},e.getSession=function(t,o,n,r){e.getSessions([t],function(e){o(e[0])},n,r)},e.addFolder=function(e,r,a,i,s,c){t.ajax(n,"AddFolder",{name:e,parentFolder:r,isPublic:a},t.Versions.V42,function(e){i(o.Folder(e))},s,c)},e.getFoldersList=function(e,r,a,i,s){t.ajax(n,"GetFoldersList",{request:e,searchQuery:r},t.Versions.V42,function(e){a(_.map(e.Results,o.Folder),e.TotalNumberResults)},i,s)},e.getCreatorFoldersList=function(e,r,a,i,s){t.ajax(n,"GetCreatorFoldersList",{request:e,searchQuery:r},t.Versions.V46,function(e){a(_.map(e.Results,o.Folder),e.TotalNumberResults)},i,s)},e.getFoldersById=function(e,r,a,i){t.ajax(n,"GetFoldersById",{folderIds:e},t.Versions.V42,function(e){r(_.map(e,o.Folder))},a,i)},e}(Panopto.Core.ServiceInterface.SessionManagement||{},Panopto.Core.ServiceInterface.PublicAPI,Panopto.Core.ServiceInterface.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=Panopto.Core.ServiceInterface.Rest.Api||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Sessions=function(e,t,o){var n="Sessions",r="streams",a="cuts",i="events",s="slideDecks",c="questionLists";return e.create=function(e,r,a,i){t.makeCall(o.HttpMethods.Post,{serviceName:n,data:e.toModel()},function(e){r&&r(o.Session(e))},a,i)},e.getOne=function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,id:e},function(e){r&&r(o.Session(e))},a,i)},e.getMany=function(e,r){t.makeChunkedGetCalls(function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,paramsObj:{ids:e}},r,a,i)},e,r,o.Session)},e.update=function(e,r,a,i){t.makeCall(o.HttpMethods.Put,{serviceName:n,data:e.toModel()},function(e){r(o.Session(e))},a,i)},e.getStreams=function(e,a,i,s,c){t.makeCall(o.HttpMethods.Get,{serviceName:n,id:e,path:r,paramsObj:a},function(e,t,n){i(o.PagingResponse(e,n,o.Stream))},s,c)},e.getAllStreams=function(o,n,r){t.getAll(function(t,n,r){e.getStreams(o,t,n,r)},{},n,r)},e.getCuts=function(e,r,i,s,c){t.makeCall(o.HttpMethods.Get,{serviceName:n,id:e,path:a,paramsObj:r},function(e,t,n){i(o.PagingResponse(e,n,o.Cut))},s,c)},e.getAllCuts=function(o,n,r){t.getAll(function(t,n,r){e.getCuts(o,t,n,r)},{},n,r)},e.getEvents=function(e,r,a,s,c){t.makeCall(o.HttpMethods.Get,{serviceName:n,id:e,path:i,paramsObj:r},function(e,t,n){a(o.PagingResponse(e,n,o.Event))},s,c)},e.getAllEvents=function(o,n,r,a){t.getAll(function(t,n,r){e.getEvents(o,t,n,r)},n,r,a)},e.getSlideDecks=function(e,r,a,i,c){t.makeCall(o.HttpMethods.Get,{serviceName:n,id:e,path:s,paramsObj:r},function(e,t,n){a(o.PagingResponse(e,n,o.SlideDeck))},i,c)},e.getAllSlideDecks=function(o,n,r){t.getAll(function(t,n,r){e.getSlideDecks(o,t,n,r)},{},n,r)},e.getQuestionLists=function(e,r,a,i,s){t.makeCall(o.HttpMethods.Get,{serviceName:n,id:e,path:c,paramsObj:r},function(e,t,n){a(o.PagingResponse(e,n,o.QuestionList))},i,s)},e.getAllQuestionLists=function(o,n,r){t.getAll(function(t,n,r){e.getQuestionLists(o,t,n,r)},{},n,r)},e.deleteSession=function(e,r,a,i){t.makeCall(o.HttpMethods.Delete,{serviceName:n,id:e},r,a,i)},e}(Panopto.Core.ServiceInterface.Rest.Sessions||{},Panopto.Core.ServiceInterface.Rest.Api,Panopto.Core.ServiceInterface.Rest.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.SessionUploadManagement=function(e){var t=function(e,t,o,n,r,a){var i=$.ajax({url:t,type:e,data:JSON.stringify(n),headers:o,cache:!1,processData:!1,success:function(e,t,o){r&&r(e,o)},error:function(e,t,o){a&&"abort"!==t&&a(e,t,o)}});return new Panopto.Core.CancellableRequest(function(){i.abort()})},o="http://localhost",n="/Panopto/PublicAPI/REST/",r={"Accept-Language":"en-US,en;q=0.8,zh-CN;q=0.6,zh;q=0.4,fr;q=0.2,ko;q=0.2,es;q=0.2",Accept:"application/json, text/javascript, */*; q=0.01","Content-Type":"application/json; charset=utf-8","Cache-Control":"no-cache"},a=function(e,a,i){var s={SessionID:e.sessionId,UploadTarget:e.filename,StreamStartTime:["/Date(",e.startTime.getTime(),")/"].join(""),UserFilename:e.filename};return e.streamType&&(s.StreamType=e.streamType),t("POST",[o,n,"upload"].join(""),r,s,a,i)},i=function(e,a,i){var s=_.extend(e,{State:Panopto.Core.UploadStatus.UploadComplete});return t("PUT",[o,n,"upload/",e.ID].join(""),r,s,a,i)},s=function(e,a,i){return t("GET",[o,n,"upload/",e].join(""),r,"",a,i)},c=function(e,a,i){return t("DELETE",[o,n,"upload/",e].join(""),r,"",a,i)},l=function(e,a,i){return t("GET",[o,n,"session/",e,"/uploads"].join(""),r,"",a,i)};return e.setHost=function(e){o=e},e.openUpload=a,e.closeUpload=i,e.getUpload=s,e.deleteUpload=c,e.getUploads=l,e}(Panopto.Core.ServiceInterface.SessionUploadManagement||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=Panopto.Core.ServiceInterface.Rest.Api||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.SlideDecks=function(e,t,o){var n="SlideDecks",r="slides";return e.getSlides=function(e,a,i,s,c){t.makeCall(o.HttpMethods.Get,{serviceName:n,id:e,path:r,paramsObj:a},function(e,t,n){i(o.PagingResponse(e,n,o.Slide))},s,c)},e.getAllSlides=function(o,n,r){t.getAll(function(t,n,r){e.getSlides(o,t,n,r)},{},n,r)},e}(Panopto.Core.ServiceInterface.Rest.SlideDecks||{},Panopto.Core.ServiceInterface.Rest.Api,Panopto.Core.ServiceInterface.Rest.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=Panopto.Core.ServiceInterface.Rest.Api||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Streams=function(e,t,o){var n="Streams";return e.getHistogram=function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,id:e,path:"histogram"},r,a,i)},e}(Panopto.Core.ServiceInterface.Rest.Streams||{},Panopto.Core.ServiceInterface.Rest.Api,Panopto.Core.ServiceInterface.Rest.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.PublicAPI=Panopto.Core.ServiceInterface.PublicAPI||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.UserManagement=function(e,t,o){var n="UserManagement";return e.getUsers=function(e,r,a,i){t.ajax(n,"GetUsers",{userIds:e},t.Versions.V42,function(e){r(_.map(e,o.User))},a,i)},e.getUser=function(t,o,n,r){e.getUsers([t],function(e){o(e[0])},n,r)},e}(Panopto.Core.ServiceInterface.UserManagement||{},Panopto.Core.ServiceInterface.PublicAPI,Panopto.Core.ServiceInterface.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Api=Panopto.Core.ServiceInterface.Rest.Api||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Users=function(e,t,o){var n="Users";return e.getSuggestions=function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,path:"suggestions",paramsObj:e},function(e){r(_.map(e,Panopto.Core.ServiceInterface.Rest.Objects.User))},a)},e.getUser=function(e,r,a,i){t.makeCall(o.HttpMethods.Get,{serviceName:n,id:e},function(e){r(o.User(e))},a,i)},e.changeForgottonPassword=function(e,r,a,i,s){t.makeCall(o.HttpMethods.Post,{serviceName:n,id:e,path:"passwordReset",data:r},a,i,s)},e.joinGroups=function(e,t,o,n,r){var a=t.length,i=!1;_.each(t,function(t){Panopto.Core.ServiceInterface.Rest.Groups.addMembers(t.id,[e],function(){},function(){i=!0},function(){a--,a||(i?n&&n():o&&o(),r&&r())})})},e}(Panopto.Core.ServiceInterface.Rest.Users||{},Panopto.Core.ServiceInterface.Rest.Api,Panopto.Core.ServiceInterface.Rest.Objects);var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.Access=function(e){var t={};return t.id=e.id||e.Id,t.isEditable=e.isEditable||e.IsEditable,t.name=e.name||e.Name,t.role="number"==typeof e.role?e.role:e.Role,t.item=e.item||(e.Item?Panopto.Core.ServiceInterface.Rest.Objects[e.Item.TypeName](e.Item):null),t.receiver=e.receiver||(e.Receiver?Panopto.Core.ServiceInterface.Rest.Objects[e.Receiver.TypeName](e.Receiver):null),t.isInherited=e.isInherited||e.IsInherited,t.typeName=e.typeName||e.TypeName,t.toModel=function(){return{Id:t.id,Name:t.name,Role:t.role,Item:t.item.toModel(),Receiver:t.receiver.toModel(),TypeName:t.typeName}},t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.AccessItem=function(e){var t=function(e){var t={},o=_.values(Panopto.Core.AccessRoleType);return _.each(o,function(e){t[e]=!1}),_.each(e,function(e){t[o[e-1]]=!0}),t};return{builtInGroupAccess:e.BuiltInGroupAccess?Panopto.Core.ServiceInterface.Rest.Objects.Access(e.BuiltInGroupAccess):null,builtInGroupShareOptions:_.map(e.BuiltInGroupShareOptions,Panopto.Core.ServiceInterface.Rest.Objects.Access),parent:e.Parent?Panopto.Core.ServiceInterface.Rest.Objects.Folder(e.Parent):null,isInheritingAccess:e.IsInheritingAccess,inheritableAncestor:e.InheritableAncestor?Panopto.Core.ServiceInterface.Rest.Objects.FolderAccessItem(e.InheritableAncestor):null,accessRoleTypes:t(e.AccessRoleTypes)}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Objects.ApprovalActionType=function(e){return e.Request=0,e.Cancel=1,e.Clear=2,e.Approve=3,e.Reject=4,e}(Panopto.Core.ServiceInterface.Objects.ApprovalActionType||{}),Panopto.Core.ServiceInterface.Objects.ApprovalResult=function(e){return e.Success=0,e.NoAccess=1,e.ApprovalsDisabledForFolder=2,e.InvalidTransition=3,e.ApprovalStateChanged=4,e.NoPrimaryStream=5,e.UnknownError=6,e}(Panopto.Core.ServiceInterface.Objects.ApprovalResult||{}),Panopto.Core.ServiceInterface.Objects.ApprovalState=function(e){var t=Panopto.Core.ServiceInterface.Objects.ApprovalActionType;return{actionId:e.ApprovalActionId,actionType:"number"==typeof e.ApprovalActionType&&e.ApprovalActionType!==t.Clear?e.ApprovalActionType:t.Cancel,message:e.Message,username:e.Username,isPublisherAction:e.IsPublisherAction,date:e.ActionDate?moment.utc(e.ActionDate).toDate():new Date,availableActions:e.AvailableActions||[],result:e.Status}},Panopto.Core.ServiceInterface.Objects.ApprovalRequest=function(e,t,o,n){var r={};return r.deliveryId=e,"undefined"!=typeof o&&(r.currentApprovalState=t,r.approvalAction=o,r.message=n),r};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Objects.BatchOperationsResults=function(e){return{itemFailedCount:e.ItemFailedCount,itemResults:_.map(e.ItemResults,function(e){return Panopto.Core.ServiceInterface.Objects.BatchOperationsResult(e)})}},Panopto.Core.ServiceInterface.Objects.BatchOperationsResult=function(e){return{deliveryId:e.DeliveryID,description:e.Description,message:e.Message,newSessionID:e.NewSessionID,succeeded:e.Succeeded}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.Cut=function(e){var t={};return t.id=e.Id||e.id||_.uniqueId("cut"),t.targetType=e.TargetType||e.targetType,t.targetId=e.TargetId||e.targetId,t.start="number"==typeof e.Start?e.Start:e.start,t.duration="number"==typeof e.Duration?e.Duration:e.duration,t.toModel=function(){return{Id:t.id,TargetType:t.targetType,TargetId:t.targetId,Start:t.start,Duration:t.duration}},t.copy=function(){return Panopto.Core.ServiceInterface.Rest.Objects.Cut(t)},t.end=function(){return t.start+t.duration},t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.Event=function(e){var t={},o=window.location.protocol+"//",n=/^.*?:\/\//;return t.id=e.Id||e.id||_.uniqueId("event"),t.name=e.Name||e.name,t.sessionId=e.SessionId||e.sessionId,t.streamId=e.StreamId||e.streamId,t.type="number"==typeof e.Type?e.Type:e.type,t.metadata=e.Metadata||e.metadata,t.timelineTime="number"==typeof e.TimelineTime?e.TimelineTime:e.timelineTime,t.creationTime="number"==typeof e.CreationTime?e.CreationTime:e.creationTime,t.relativeTime="number"==typeof e.RelativeTime?e.RelativeTime:e.relativeTime,t.channel=e.Channel||e.channel,t.creator=e.Creator?Panopto.Core.ServiceInterface.Rest.Objects.User(e.Creator):e.creator,t.thumbnailUrl=e.ThumbnailUrl||e.thumbnailUrl,t.link=e.Link||e.link,t.slideUrl=e.SlideUrl||e.slideUrl,t.isDefaultThumbnail=e.IsDefaultThumbnail||e.isDefaultThumbnail,t.slideId=e.SlideId||e.slideId,t.slideDeckId=e.SlideDeckId||e.slideDeckId,t.link=t.link?o+t.link.replace(n,""):t.link,t.toModel=function(){var e=t.link?t.link.replace(n,""):t.link;return{Id:t.id,Name:t.name,SessionId:t.sessionId,StreamId:t.streamId,Type:t.type,Metadata:t.metadata,TimelineTime:t.timelineTime,RelativeTime:t.relativeTime,Channel:t.channel,Link:e,IsDefaultThumbnail:t.isDefaultThumbnail,ThumbnailUrl:t.thumbnailUrl,SlideUrl:t.slideUrl,SlideId:t.slideId,SlideDeckId:t.slideDeckId}},t.copy=function(){return Panopto.Core.ServiceInterface.Rest.Objects.Event(t)},t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Objects.Folder=function(e){var t={id:e.Id,name:e.Name,description:e.Description,childFolders:e.ChildFolders,parentFolder:e.ParentFolder,isPublic:e.IsPublic,sessions:e.Sessions,presenters:e.Presenters};return t},Panopto.Core.ServiceInterface.Objects.ListFoldersRequest=function(e){return{Pagination:{MaxNumberResults:e.maxResults,PageNumber:e.pageNumber},SortBy:e.sortBy,SortIncreasing:e.sortIncreasing,ParentFolderId:e.parentFolderId,PublicOnly:e.publicOnly,WildcardSearchNameOnly:e.wildcardSearchNameOnly}},Panopto.Core.ServiceInterface.Rest.Objects.Folder=function(e){var t={id:e.Id,name:e.Name,isEditable:e.IsEditable,isDropbox:e.IsDropbox,folderType:e.FolderType,parent:e.Parent?Panopto.Core.ServiceInterface.Rest.Objects.Folder(e.Parent):null,userCanCreateFolders:e.UserCanCreateFolders,userCanCreateSessions:e.UserCanCreateSessions,isEnumerable:e.IsEnumerable,hasAccessibleChildren:e.HasAccessibleChildren,typeName:e.TypeName,sessionCount:e.SessionCount};return t.toModel=function(){return{Id:t.id,Name:t.name,Parent:t.parent?t.parent.toModel():null,TypeName:t.typeName}},t},Panopto.Core.ServiceInterface.Rest.Objects.Folder.fromFolderRow=function(e){var t=Panopto.Core.ServiceInterface.Rest.Objects.Folder({Id:e.ID,Name:Panopto.Core.TextHelpers.cleanTextWithoutHighlighting(e.Name),FolderType:e.FolderType,IsDropbox:e.IsDropbox,TypeName:Panopto.Core.ServiceInterface.Rest.Objects.TypeName.Folder});return e.ParentFolderId&&(t.parent=Panopto.Core.ServiceInterface.Rest.Objects.Folder({Id:e.ParentFolderId,Name:Panopto.Core.TextHelpers.cleanTextWithoutHighlighting(e.ParentFolderName),TypeName:Panopto.Core.ServiceInterface.Rest.Objects.TypeName.Folder})),t},Panopto.Core.ServiceInterface.Rest.Objects.Folder.SortOrder=function(e){e.Name=0,e.Depth=1,e.RecentlyUsed=2;var t=_.invert(e);return e.getName=function(e){return t[e]},e}(Panopto.Core.ServiceInterface.Rest.Objects.Folder.SortOrder||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.FolderAccessItem=function(e){var t=Panopto.Core.ServiceInterface.Rest.Objects.AccessItem(e);return t.id=e.Id,t.name=e.Name,t.isApprovalRequired=e.IsApprovalRequired,t.arePublishersEditable=e.ArePublishersEditable,t.typeName=e.TypeName,t.isDropbox=e.IsDropbox,t.embedViewTag=e.EmbedViewTag,t.viewUri=e.ViewUri,t.inheritingDescendants=_.map(e.InheritingDescendants,Panopto.Core.ServiceInterface.Rest.Objects.Folder),t.isEditable=e.IsEditable,t.folderType=e.FolderType,t.toModel=function(){return{Id:t.id,Name:t.name,Parent:t.parent?t.parent.toModel():null,IsInheritingAccess:t.isInheritingAccess,IsApprovalRequired:t.isApprovalRequired,TypeName:t.typeName}},t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.FolderFilter=function(e){var t={},o=["parentId","folderSet","searchTerm","includeMyFolder","includePersonalFolders"];return _.each(o,function(o){_.isUndefined(e[o])||(t[o]=e[o])}),t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.Group=function(e){var t={};return t.externalId=e.externalId||e.ExternalId,t.id=e.id||e.Id,t.isPrivate=e.isPrivate||e.IsPrivate,t.memberCount="number"==typeof e.memberCount?e.memberCount:e.MemberCount,t.name=e.name||e.Name,t.ownerId=e.ownerId||e.OwnerId,t.ownerName=e.ownerName||e.OwnerName,t.provider=e.provider||e.Provider?Panopto.Core.ServiceInterface.Rest.Objects.MembershipProvider(e.provider||e.Provider):null,t.isEditable=e.isEditable||e.IsEditable,t.isAccessEditable=e.isAccessEditable||e.IsAccessEditable,t.typeName=e.typeName||e.TypeName,t.builtInType=e.builtInType||e.BuiltInType,t.save=function(e,o,n){Panopto.Core.ServiceInterface.Rest.Groups.saveGroup(t,e,o,n)},t.deleteGroup=function(e,o,n){Panopto.Core.ServiceInterface.Rest.Groups.deleteGroup(t.id,e,o,n)},t.addMembers=function(e,o,n,r){Panopto.Core.ServiceInterface.Rest.Groups.addMembers(t.id,_.map(e,function(e){return e.toModel()}),o,n,r)},t.removeMember=function(e,o,n,r){Panopto.Core.ServiceInterface.Rest.Groups.removeGroupMember(t.id,e,o,n,r)},t.searchForNewMember=function(e,o,n,r){Panopto.Core.ServiceInterface.Rest.Users.getSuggestions({searchTerm:e,isNotInGroup:t.id},o,n,r)},t.validate=function(e){var o=[];return t.name||o.push(e.Groups_Create_ErrorNoName),!t.externalId&&t.provider&&t.provider.name!==Panopto.Core.Constants.InternalMembershipProviderName&&o.push(e.Group_Create_ErrorNoExternalId),t.name&&Panopto.Core.TextHelpers.hasHtmlTags(t.name)&&o.push(e.Groups_HtmlNameError),t.externalId&&Panopto.Core.TextHelpers.hasHtmlTags(t.externalId)&&o.push(e.Groups_HtmlExternalIdError),o},t.isEqual=function(e){return t.externalId===e.externalId&&t.id===e.id&&t.isPrivate===e.isPrivate&&t.memberCount===e.memberCount&&t.name===e.name&&t.ownerId===e.ownerId&&t.ownerName===e.ownerName&&(!t.provider&&!e.provider||t.provider&&e.provider&&t.provider.name===e.provider.name)&&t.type===e.type},t.toModel=function(){return{ExternalId:t.externalId,Id:t.id,IsPrivate:t.isPrivate,MemberCount:t.memberCount,Name:t.name,OwnerId:t.ownerId,OwnerName:t.ownerName,Provider:t.provider?{Name:t.provider.name}:null,BuiltInType:t.builtInType,TypeName:t.typeName}},t},Panopto.Core.ServiceInterface.Rest.Objects.BuiltInGroupType=function(e){return e.None=0,e.AllUsers=1,e.Public=2,e}(Panopto.Core.ServiceInterface.Rest.Objects.BuiltInGroupType||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.HttpMethods=function(e){return e.Put="PUT",e.Post="POST",e.Get="GET",e.Delete="DELETE",e}(Panopto.Core.ServiceInterface.Rest.Objects.HttpMethods||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.HttpStatusCode=function(e){return e.BadRequest=400,e.Unauthorized=401,e.NotFound=404,e.InternalError=500,e}(Panopto.Core.ServiceInterface.Rest.Objects.HttpStatusCode||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.MembershipProvider=function(e,t){return{name:e.name||e.Name,isInternal:e.isInternal||e.IsInternal,description:e.description||e.Description,typeName:e.typeName||e.TypeName}},Panopto.Core.ServiceInterface.Rest.Objects.InternalProvider=function(e){return Panopto.Core.ServiceInterface.Rest.Objects.MembershipProvider({name:Panopto.Core.Constants.InternalMembershipProviderName,description:Panopto.Core.Constants.InternalMembershipProviderName,isInternal:!0},e)};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.PagingParameters=function(e){var t={},o=["page","pageSize","sort","secondarySort","sortDescending","secondarySortDescending","computeTotalCount","computeHasMorePages"];return _.each(o,function(o){_.isUndefined(e[o])||(t[o]=e[o])}),t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.Playlist=function(e){var t=Panopto.Core.ServiceInterface.Rest.Objects.AccessItem(e);return t.id=e.Id||e.id,t.name=e.Name||e.name,t.viewerUri=e.ViewerUri||e.viewerUri,t.embedViewerTag=e.EmbedViewerTag||e.embedViewerTag,t.typeName=e.TypeName||e.typeName,t.description=e.Description||e.description,t.status="number"==typeof e.Status?e.Status:e.status,t.startTime=moment(e.StartTime).toDate()||e.startTime,t.duration="number"==typeof e.Duration?e.Duration:e.duration,t.thumbUrl=e.ThumbUrl||e.thumbUrl,t.sessionListId=e.SessionListId||e.sessionListId,t.toModel=function(){return{Id:t.id,Name:t.name,TypeName:t.typeName,Parent:t.parent?t.parent.toModel():null,Description:t.description,SessionListId:t.sessionListId}},t},Panopto.Core.ServiceInterface.Rest.Objects.Playlist.fromSessionRow=function(e){
return Panopto.Core.ServiceInterface.Rest.Objects.Playlist({Id:e.DeliveryID,Name:Panopto.Core.TextHelpers.cleanTextWithoutHighlighting(e.SessionName),ViewerUri:e.ViewerUrl,TypeName:Panopto.Core.ServiceInterface.Rest.Objects.TypeName.Playlist})};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.PlaylistAccessItem=function(e){var t=Panopto.Core.ServiceInterface.Rest.Objects.AccessItem(e);return t.id=e.Id,t.name=e.Name,t.viewerUri=e.ViewerUri,t.embedViewerTag=e.EmbedViewerTag,t.typeName=e.TypeName,t.toModel=function(){return{Id:t.id,Name:t.name,TypeName:t.typeName,Parent:t.parent?t.parent.toModel():null}},t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.Question=function(e){var t={};t.id=e.Id||e.id||_.uniqueId("question"),t.name=e.Name||e.name,t.explanation=e.Explanation||e.explanation,t.questionType="undefined"!=typeof e.QuestionType?e.QuestionType:e.questionType;var o=e.Options?e.Options:e.options;return t.options=_.map(o,Panopto.Core.ServiceInterface.Rest.Objects.QuestionOption),t.toModel=function(){return{Id:t.id,Name:t.name,Explanation:t.explanation,QuestionType:t.questionType,Options:_.map(t.options,function(e){return e.toModel()})}},t.copy=function(){return Panopto.Core.ServiceInterface.Rest.Objects.Question(t)},t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.QuestionList=function(e){var t={};t.id=e.Id||e.id||_.uniqueId("questionList"),t.name=e.Name||e.name,t.sessionId=e.SessionId||e.sessionId,t.sessionRelativeTime="undefined"!=typeof e.SessionRelativeTime?e.SessionRelativeTime:e.sessionRelativeTime,t.isSessionPlaybackBlocking=e.IsSessionPlaybackBlocking||e.isSessionPlaybackBlocking,t.allowRetake=e.AllowRetake||e.allowRetake,t.showFinalGrade=e.ShowFinalGrade||e.showFinalGrade,t.allowReview=e.AllowReview||e.allowReview;var o=e.Questions?e.Questions:e.questions;return t.questions=_.map(o,Panopto.Core.ServiceInterface.Rest.Objects.Question),t.toModel=function(){return{Id:t.id,Name:t.name,SessionId:t.sessionId,SessionRelativeTime:t.sessionRelativeTime,IsSessionPlaybackBlocking:t.isSessionPlaybackBlocking,AllowRetake:t.allowRetake,ShowFinalGrade:t.showFinalGrade,AllowReview:t.allowReview,Questions:_.map(t.questions,function(e){return e.toModel()})}},t.copy=function(){return Panopto.Core.ServiceInterface.Rest.Objects.QuestionList(t)},t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.QuestionOption=function(e){var t={};return t.id=e.Id||e.id||_.uniqueId("questionOption"),t.name=e.Name||e.name,t.isCorrect=e.IsCorrect||e.isCorrect,t.toModel=function(){return{Id:t.id,Name:t.name,IsCorrect:t.isCorrect}},t.copy=function(){return Panopto.Core.ServiceInterface.Rest.Objects.QuestionOption(t)},t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Objects.RecorderQuestion=function(e){return{user:e.UserName,text:e.Data,time:e.AbsoluteTime}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.recorderScheduleEntry=function(e){var t={id:e.Id,name:e.Name,typeName:e.TypeName,isPrimaryRecorder:e.IsPrimaryRecorder,ownerId:e.OwnerId,recorderId:e.RecorderId,sessionId:e.SessionId,startTime:moment(e.StartTime).toDate(),duration:e.Duration};return t.toModel=function(){return{Id:t.id,Name:t.name,TypeName:t.typeName,IsPrimaryRecorder:t.isPrimaryRecorder,OwnerId:t.ownerId,RecorderId:t.recorderId,SessionId:t.sessionId,StartTime:t.startTime,Duration:t.duration}},t.isCurrentlyRecording=function(){var e=new Date;return e-t.startTime<1e3*t.duration&&t.startTime<e},t.currentUserHasWriteAccess=function(){return t.sessionId!==Panopto.Core.Constants.EmptyGuid},t.save=function(e,o,n,r){Panopto.Core.ServiceInterface.Rest.RecorderScheduleEntries.save(t,e,o,n,r)},t.updateDuration=function(e,o,n,r,a){t.duration=e,t.save(o,n,r,a)},t.getSession=function(e,o,n){Panopto.Core.ServiceInterface.Rest.Sessions.getOne(t.sessionId,e,o,n)},t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Objects.RemoteRecorder=function(e){var t={id:e.Id,name:e.Name};return t.toRestRemoteRecorder=function(){return Panopto.Core.ServiceInterface.Rest.Objects.RemoteRecorder({ID:t.id,Name:t.name})},t},Panopto.Core.ServiceInterface.Rest.Objects.RemoteRecorderQualitySetting=function(e){return{audioBitrate:e.AudioBitrate,frameRate:e.Framerate,mulipleBitrateCount:e.MulipleBitrateCount,pixelCount:e.PixelCount,videoBitrate:e.VideoBitrate}},Panopto.Core.ServiceInterface.Rest.Objects.RecordingDevice=function(e){var t={audioPreviewUrl:e.AudioPreviewUrl,id:e.DeviceId,height:e.Height,lastPreviewUpdate:moment(e.LastPreviewUpdateDateTime).toDate(),name:e.Name,record:e.Record,type:e.Type,videoPreviewUrl:e.VideoPreviewUrl,width:e.Width,missingData:e.MissingData};return t.shouldBePreviewed=function(){return!!t.videoPreviewUrl&&t.record&&(t.type===Panopto.Core.DeviceMediaType.DV||t.type===Panopto.Core.DeviceMediaType.HDV||t.type===Panopto.Core.DeviceMediaType.Video||t.type===Panopto.Core.DeviceMediaType.Screen)},t},Panopto.Core.ServiceInterface.Rest.Objects.RemoteRecorder=function(e){var t=Panopto.Core.ServiceInterface.Rest.Objects.AccessItem(e);return t.devices=_.map(e.Devices,Panopto.Core.ServiceInterface.Rest.Objects.RecordingDevice),t.id=e.Id,t.lastConnection=new Date(e.LastConnectionDateTime),t.name=Panopto.Core.TextHelpers.cleanTextWithoutHighlighting(e.Name),t.nextRecording=new Date(e.NextRecordingDateTime),t.primaryAudioDeviceId=e.PrimaryAudioDeviceId,t.primaryRecordingQualitySettings=e.primaryRecordingQualitySettings?Panopto.Core.ServiceInterface.Rest.Objects.RemoteRecorderQualitySetting(e.PrimaryRecordingQualitySettings):null,t.primaryVideoDeviceId=e.PrimaryVideoDeviceId,t.recordingType=e.RecordingType,t.secondaryRecordingQualitySettings=e.secondaryRecordingQualitySettings?Panopto.Core.ServiceInterface.Rest.Objects.RemoteRecorderQualitySetting(e.SecondaryRecordingQualitySettings):null,t.state=e.State,t.version=e.Version,t.timeZoneDisplayInfo=e.TimeZoneDisplayInfo?Panopto.Core.ServiceInterface.Rest.Objects.TimeZoneDisplayInfo(e.TimeZoneDisplayInfo):null,t.typeName=e.typeName||Panopto.Core.ServiceInterface.Rest.Objects.TypeName.RemoteRecorder,t.toModel=function(){return{Id:t.id,Name:t.name,TypeName:t.typeName,TimeZoneDisplayInfo:t.timeZoneDisplayInfo?t.timeZoneDisplayInfo.toModel():void 0}},t.getScheduleEntries=function(e,o,n){Panopto.Core.ServiceInterface.Rest.RecorderScheduleEntries.getRecorderScheduleEntries({endTimeAfter:(new Date).toISOString(),recorderId:t.id},e,o,n)},t.updateTimeZone=function(e,o,n){Panopto.Core.ServiceInterface.Rest.RemoteRecorders.updateTimeZone(t,e,o,n)},t.updateLastAccessed=function(e,o,n){Panopto.Core.ServiceInterface.Rest.RemoteRecorders.updateLastAccessed(t.id,e,o,n)},t.getConflicts=function(e,o,n,r){t.getScheduleEntries(function(t){var n=new Date;o(_.chain(t).sortBy("startTime").filter(function(t){return t.startTime<=e&&t.startTime>n}).value())},n,r)},t.getNextScheduledEntry=function(e,o,n){t.getScheduleEntries(function(t){var o=new Date;e(_.chain(t).sortBy("startTime").find(function(e){return e.startTime>=o}).value())},o,n)},t.getCurrentScheduledEntry=function(e,o,n){t.getScheduleEntries(function(t){e(_.find(t,function(e){return e.isCurrentlyRecording()}))},o,n)},t.isPreviewable=function(e){return t.state===Panopto.Core.RemoteRecorderState.Previewing||t.state===Panopto.Core.RemoteRecorderState.Recording||t.state===Panopto.Core.RemoteRecorderState.Paused||!!e&&t.state===Panopto.Core.RemoteRecorderState.Disconnected},t.isPreviewCensored=function(){var e=t.getPrimaryAudio();return t.isPreviewable()&&e&&!e.audioPreviewUrl&&!t.accessRoleTypes.Preview},t.getPrimaryVideo=function(){return _.findWhere(t.devices,{id:t.primaryVideoDeviceId})},t.getPrimaryAudio=function(){return _.findWhere(t.devices,{id:t.primaryAudioDeviceId})},t.defaultSessionTitle=function(){var e=moment();return"{0} {1} {2}".format(t.name,e.format("l"),e.format("LT"))},t.isRecording=function(){return t.state===Panopto.Core.RemoteRecorderState.Recording},t.startNewRecording=function(e,o,n,r,a,i){var s=e.title,c=e.folderId,l=e.isWebcast,p=e.duration,d=e.startTime||new Date,u=function(e,t,o){var n=Panopto.Core.ServiceInterface.Rest.Objects.Session({Name:s,TypeName:"Session",IsWebcast:l,Parent:{Id:c,TypeName:"Folder"}});Panopto.Core.ServiceInterface.Rest.Sessions.create(n,e,t,o)},f=function(e,n,r,a){var i=Panopto.Core.ServiceInterface.Rest.Objects.recorderScheduleEntry({Name:e.name,TypeName:"RecorderScheduleEntry",StartTime:d,Duration:p,IsPrimaryRecorder:!0,RecorderId:t.id,SessionId:e.id});Panopto.Core.ServiceInterface.Rest.RecorderScheduleEntries.save(i,o,n,r,a)};u(function(e){f(e,n,r,i)},a)},t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.RestColumns=function(e){return e.GroupColumns=["Name","OwnerName","MemberCount","ProviderName","ProviderId"],e}(Panopto.Core.ServiceInterface.Rest.Objects.RestColumns||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.ResultCode=function(e){return e.Success=0,e.NotFound=1,e.InvalidSource=2,e.InvalidPagingParameters=3,e.InvalidFilter=4,e.Unauthorized=5,e.InvalidMethod=6,e.InternalError=7,e.InvalidIncludeOptions=8,e.InvalidContext=9,e.PreconditionFailed=10,e.PreconditionRequired=11,e.AlreadyExists=12,e}(Panopto.Core.ServiceInterface.Rest.Objects.ResultCode||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.BatchResult=function(e,t){return t=t||function(e){return e},{succeeded:_.map(e.Succeeded,t),failed:_.map(e.Failed,function(e){return Panopto.Core.ServiceInterface.Rest.Objects.FailedItem(e,t)})}},Panopto.Core.ServiceInterface.Rest.Objects.FailedItem=function(e,t){return t=t||function(e){return e},{message:e.Message,resultCode:e.ResultCode,source:e.Source?t(e.Source):null}},Panopto.Core.ServiceInterface.Rest.Objects.RepositoryItemResult=function(e,t){return t=t||function(e){return e},{message:e.Message,resultCode:e.ResultCode,data:t(e.Data)}},Panopto.Core.ServiceInterface.Rest.Objects.PagingResponse=function(e,t,o){return{results:_.map(e,o),hasMorePages:"true"===(t.getResponseHeader(Panopto.Core.ServiceInterface.Rest.Api.HasMorePagesKey)||"").toLowerCase(),totalCount:parseInt(t.getResponseHeader(Panopto.Core.ServiceInterface.Rest.Api.ResponseCountKey)||"0",10)}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Objects.TaskState={WaitingForData:1,Unprocessed:0,PullingDataFromServer:8,Processing:2,Transferring:3,Failure:4,Complete:5,Delete:6,PermanentFailure:7,Cancelled:9},Panopto.Core.ServiceInterface.Objects.ServiceTaskTypes={Export:"4f783e75-8042-4d4c-9f95-9866ffafeb25",Merge:"f4622532-bc67-4e91-b98a-3a86abfcaee5",Copy:"1b535a55-869f-4571-8f03-6e75d84ed2de",MachineTranscription:"7af9ac6a-c412-42f9-a8a3-2ca8d845c7d9",MachineTranscription2:"812f640a-d95c-4a14-a13c-bac3c4f9197e",MachineTranscription3:"de1cca53-2476-4723-a9f6-820378ca3066",HumanTranscription:"32ea191b-2718-4fa0-9b94-433755e61c9b",TabletEncode:"027EAD9C-4A94-404D-BD72-45A3EBE6153E",BulkProvisioning:"62BA48F8-D1C5-4FB6-89C1-955D162C455F",UnisonEncode:"e5c27568-406a-4ae7-850f-63923ddbf8e9",UnisonPackaging:"C1776EA1-F296-4C5F-8A3D-77B109DB5F72",DeleteEncodings:"7974E568-E758-4D17-AEC6-10E3ED24512D",SlidePackaging:"569B1050-C57D-4917-B693-61973422F45A",MediaPackaging:"03475304-E5DE-4EBB-AC02-04B011013A8D",PodcastEncode:"56222A4D-6DBE-4607-9652-FDD94C7544D7",ViewerEncode:"79C49367-5B50-4DF3-9975-C81A64C3E786",FastPathViewerEncode:"6FC8AFFF-6D99-4A27-A7DC-83972A115CD2",DeleteUpload:"2BBD2E12-8B76-4E87-B9AA-131C19242C4A",TransferUpload:"0D3A8483-5CD7-4B5C-9081-39783DFC6B65",SendEmail:"B99C68F0-98C5-4f17-B443-6ED22EBD7C18",LegacyRecorderUpload:"4653131B-3AA3-4D65-97ED-472637C91F91",DeleteSessionFiles:"06367CAE-3850-4C86-8DB2-10171E7A33F2",BulkCopyFolderToSite:"E9DA9CD7-3DA1-40E8-8400-C756BC989098",ExternalContextsForUser:"9A30716D-6886-4EC6-AE24-C3F6ED37A8B2",TransferUpload:"0D3A8483-5CD7-4B5C-9081-39783DFC6B65",CompleteUpload:"C6572C65-1670-4A4C-B162-3D3A72889B09",EmbedTranscript:"7886EBFE-FABB-4D4E-A2FF-C9073739C644",ConvertToOnDemand:"65739A5A-08BE-448A-BAB3-1914AD21D0C6",DeleteBroadcastFiles:"68A9ABA2-2BC8-4727-852D-39C24AE95D63"},Panopto.Core.ServiceInterface.Objects.ServiceTaskResourceMapping=function(e){var t=function(e,t,o){return _.contains(t,e.taskName)&&_.contains(o,e.subState)},o=["Export","Merge","Copy","MachineTranscription","MachineTranscription2","MachineTranscription3","HumanTranscription","TabletEncode","BulkProvisioning","UnisonEncode","UnisonPackaging","DeleteEncodings","SlidePackaging","MediaPackaging","PodcastEncode","ViewerEncode","FastPathViewerEncode","DeleteUpload","TransferUpload","SendEmail","LegacyRecorderUpload","DeleteSessionFiles","BulkCopyFolderToSite","ExternalContextsForUser","EmbedTranscript","ConvertToOnDemand","DeleteBroadcastFiles"],n=["Merge"],r=["Copy"],a=["UnisonEncode","UnisonPackaging"],i=["Export"],s=["DeleteSessionFiles"],c={CommonTask_CheckedOutForProcessing:-1,CommonTask_TransferringFilesToTaskProcessor:-2,CommonTask_TransferringFilesToTaskProcessorFailed:-3,CommonTask_PerformingCoreProcessing:-4,CommonTask_PerformingCoreProcessingFailed:-5,CommonTask_PublishingTaskProcessingResults:-6,CommonTask_PublishingTaskProcessingResultsFailed:-7,CommonTask_ParsingServiceTaskDataFailed:-8,CommonTask_PublishingServiceTaskFile:-9,CommonTask_PublishingServiceTaskFileFailed:-10,CommonTask_TaskTimeOutDetected:-11,CommonTask_GraphHungWhileProcessingSourceContent:-100,CommonTask_PowerPointInitializationFailure:-200,CommonTask_PowerPointFileLoadFailure:-201,CommonTask_PowerPointImageExtractionFailure:-202,CommonTask_PowerPointTextExtractionFailure:-203},l={MergeTask_CreateRequested:1,MergeTask_CreateStreamRename:2,MergeTask_CreateEventTargetRename:3,MergeTask_CopyDataContentFailure:4,MergeTask_CopyWebContentFailure:5},p={CopyTask_CreateRequested:1,CopyTask_CopyDataContentFailure:2,CopyTask_CopyWebContentFailure:3},d={UnisonTask_PrimaryImportContainsNoAudioStream:1,UnisonTask_SecondaryImportContainsNoVideoStream:2,UnisonTask_CorruptOrInvalidInputFile:3,UnisonTask_SourceResolutionOutOfRange:4},u={ExportTask_ArchiveXMLCreationFailure:1,ExportTask_MoveWebContentFailure:2,ExportTask_MoveDataContentFailure:3,ExportTask_RemoteExportCopyLocalFailure:4,ExportTask_RemoteExportArchivingFailure:5,ExportTask_RemoteExportArchiveCopyFailure:6},f={DeleteSessionFilesTask_DeleteWebContentFailure:1,DeleteSessionFilesTask_DeleteDataContentFailure:2};return t(e,o,c)?_.invert(c)[e.subState]:t(e,n,l)?_.invert(l)[e.subState]:t(e,r,p)?_.invert(p)[e.subState]:t(e,a,d)?_.invert(d)[e.subState]:t(e,i,u)?_.invert(u)[e.subState]:t(e,s,f)?_.invert(f)[e.subState]:e.subState},Panopto.Core.ServiceInterface.Objects.DeliveryStatus=function(e){return{id:e.Key,status:e.Value}},Panopto.Core.ServiceInterface.Objects.ServiceTaskStatus=function(e){return{id:e.ID,relatedDeliveryID:e.RelatedDeliveryID,sessionID:e.SessionID,sourceFilename:e.SourceFilename,state:e.State,subState:e.SubState,progress:e.Progress,taskName:e.ServiceTaskTypeShortName,updatedDate:e.UpdatedDate,isError:function(){return this.state===Panopto.Core.ServiceInterface.Objects.TaskState.Failure||this.state===Panopto.Core.ServiceInterface.Objects.TaskState.PermanentFailure},isComplete:function(){return this.state===Panopto.Core.ServiceInterface.Objects.TaskState.Complete},isProcessing:function(){return this.state===Panopto.Core.ServiceInterface.Objects.TaskState.Processing}}},Panopto.Core.ServiceInterface.Objects.ServiceTaskQuery=function(e){return{Filters:{SessionIDs:e.filters.sessionIDs||[],DeliveryIDs:e.filters.deliveryIDs||[],IncludeDeliverySession:e.filters.includeDeliverySession||!1,ServiceTaskTypeIDs:e.filters.serviceTaskTypeIDs||[],MostRecentServiceTaskTypeIDs:e.filters.mostRecentServiceTaskTypeIDs,TaskStates:e.filters.taskStates||[]}}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Objects.Session=function(e){return{deliveryId:e.Id,sessionId:e.SessionId,name:e.Name,description:e.Description,date:Panopto.Core.TimeHelpers.dateToWin32EpochTime(moment(e.StartTime).toDate()),duration:e.Duration,thumbUrl:e.ThumbUrl?Panopto.Core.ServiceInterface.baseUrl+e.ThumbUrl.substring(e.ThumbUrl.indexOf("/",1)):null,state:e.State,creatorId:e.CreatorId,statusMessage:e.StatusMessage,viewerUrl:e.ViewerUrl,editorUrl:e.EditorUrl,viewable:e.State===Panopto.Core.ServiceInterface.Objects.SessionState.Complete,folder:{id:e.FolderId}}},Panopto.Core.ServiceInterface.Objects.SessionState=function(e){return e.Created=0,e.Scheduled=1,e.Recording=2,e.Broadcasting=3,e.Processing=4,e.Complete=5,e}(Panopto.Core.ServiceInterface.Objects.SessionState||{}),Panopto.Core.ServiceInterface.Rest.Objects.Session=function(e){var t=Panopto.Core.ServiceInterface.Rest.Objects.AccessItem(e);return t.id=e.Id||e.id,t.name=e.Name||e.name,t.viewerUri=e.ViewerUri||e.viewerUri,t.embedViewerTag=e.EmbedViewerTag||e.embedViewerTag,t.typeName=e.TypeName||e.typeName,t.isWebcast=e.IsWebcast||e.isWebcast,t.description=e.Description||e.description,t.status="number"==typeof e.Status?e.Status:e.status,t.startTime=moment(e.StartTime).toDate()||e.startTime,t.duration="number"==typeof e.Duration?e.Duration:e.duration,t.thumbUrl=e.ThumbUrl||e.thumbUrl,t.presenterFirstNames=e.PresenterFirstNames||e.presenterFirstNames,t.presenterLastNames=e.PresenterLastNames||e.presenterLastNames,t.mostRecentViewTime=e.MostRecentViewTime?moment(e.MostRecentViewTime).toDate():e.mostRecentViewTime,t.toModel=function(){return{Id:t.id,Name:t.name,TypeName:t.typeName,Parent:t.parent?t.parent.toModel():null,IsWebcast:t.isWebcast,Description:t.description,DefaultThumbnailTime:t.defaultThumbnailTime}},t.toSessionRow=function(){return{DeliveryID:t.id,Duration:t.duration,PresenterFirstNames:t.presenterFirstNames,PresenterLastNames:t.presenterLastNames,SessionName:t.name,Status:t.status,StartTime:t.startTime,ViewerUrl:t.viewerUri,ThumbUrl:t.thumbUrl}},t},Panopto.Core.ServiceInterface.Rest.Objects.Session.fromSessionRow=function(e){return Panopto.Core.ServiceInterface.Rest.Objects.Session({Id:e.DeliveryID,Name:Panopto.Core.TextHelpers.cleanTextWithoutHighlighting(e.SessionName),ViewerUri:e.ViewerUrl,TypeName:Panopto.Core.ServiceInterface.Rest.Objects.TypeName.Session})};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.SessionAccessItem=function(e){var t=Panopto.Core.ServiceInterface.Rest.Objects.AccessItem(e);return t.id=e.Id,t.name=e.Name,t.viewerUri=e.ViewerUri,t.embedViewerTag=e.EmbedViewerTag,t.typeName=e.TypeName,t.isWebcast=e.IsWebcast,t.toModel=function(){return{Id:t.id,Name:t.name,TypeName:t.typeName,Parent:t.parent?t.parent.toModel():null,IsWebcast:t.isWebcast}},t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.SessionChangeSet=function(e){var t=Panopto.Core.ServiceInterface.Rest.Objects,o={};return o.id=e.id||e.Id,o.sessionId=e.sessionId||e.SessionId,o.cutsToReplace=e.cutsToReplace||_.map(e.CutsToReplace,t.Cut),o.streamsToUpdate=e.streamsToUpdate||_.map(e.StreamsToUpdate,t.Stream),o.slideDecksToDelete=e.slideDecksToDelete||_.map(e.SlideDecksToDelete,t.SlideDeck),o.eventsToAdd=e.eventsToAdd||_.map(e.EventsToAdd,t.Event),o.eventsToUpdate=e.eventsToUpdate||_.map(e.EventsToUpdate,t.Event),o.eventsToDelete=e.eventsToDelete||_.map(e.EventsToDelete,t.Event),o.questionListRevisions=e.questionListRevisions||_.map(e.QuestionListRevisions,t.QuestionList),o.questionListIdsToDelete=e.questionListIdsToDelete||e.QuestionListIdsToDelete,o.updateDate=e.updateDate||moment.utc(e.UpdateDate).toDate(),o.ownerName=e.ownerName||e.OwnerName,o.ownerId=e.ownerId||e.OwnerId,o.toModel=function(){var e=function(e){return e.toModel()};return{Id:o.id,SessionId:o.sessionId,CutsToReplace:_.map(o.cutsToReplace,e),StreamsToUpdate:_.map(o.streamsToUpdate,e),SlideDecksToDelete:_.map(o.slideDecksToDelete,e),EventsToAdd:_.map(o.eventsToAdd,e),EventsToUpdate:_.map(o.eventsToUpdate,e),EventsToDelete:_.map(o.eventsToDelete,e),QuestionListRevisions:_.map(o.questionListRevisions,e),QuestionListIdsToDelete:o.questionListIdsToDelete}},o};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.SessionList=function(e){var t={};return t.id=e.id||e.Id,t.name=e.name||e.Name,t.items=e.items,t.typeName=e.typeName||e.TypeName,t.updateDate=e.updateDate||moment.utc(e.UpdateDate).toDate(),t.specialType="undefined"!=typeof e.specialType?e.specialType:e.SpecialType,!t.items&&e.Items&&(t.items=_.map(e.Items,Panopto.Core.ServiceInterface.Rest.Objects.Session)),t.toModel=function(){return{Id:t.id,Name:t.name,TypeName:t.typeName,SpecialType:t.specialType}},t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.Slide=function(e){var t={};return t.id=e.Id||e.id,t.name=e.Name||e.name,t.content=e.Content||e.content,t.slideDeckId=e.SlideDeckId||e.slideDeckId,t.slideNumber="number"==typeof e.SlideNumber?e.SlideNumber:e.slideNumber,t.imageUrl=e.ImageUrl||e.imageUrl,t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.SlideDeck=function(e){var t={};return t.id=e.Id||e.id,t.name=e.Name||e.name,t.toModel=function(){return{Id:t.id,Name:t.name}},t.copy=function(){return Panopto.Core.ServiceInterface.Rest.Objects.SlideDeck(t)},t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.Stream=function(e){var t={};switch(t.id=e.Id||e.id,t.url=e.Url||e.url,t.httpUrl=e.HttpUrl||e.httpUrl,t.absoluteStart="number"==typeof e.AbsoluteStart?e.AbsoluteStart:e.absoluteStart,t.duration="number"==typeof e.Duration?e.Duration:e.duration,t.isPrimary=e.IsPrimary||e.isPrimary,t.thumbnailUrlBase=e.ThumbnailUrlBase||e.thumbnailUrlBase,t.thumbnailInterval=e.ThumbnailInterval||e.thumbnailInterval,t.type="number"==typeof e.Type?e.Type:e.type,t.name=e.Name||e.name,t.type){case Panopto.Core.ServiceInterface.Rest.Objects.StreamContentType.Audio:t.iconCode=Panopto.Core.Constants.AudioIconCode;break;case Panopto.Core.ServiceInterface.Rest.Objects.StreamContentType.Screen:t.iconCode=Panopto.Core.Constants.ScreenIconCode;break;case Panopto.Core.ServiceInterface.Rest.Objects.StreamContentType.Camera:default:t.iconCode=Panopto.Core.Constants.ObjectVideoIconCode}return t.toModel=function(){return{Id:t.id,Url:t.url,HttpUrl:t.httpUrl,AbsoluteStart:t.absoluteStart,Duration:t.duration,IsPrimary:t.isPrimary,Name:t.name}},t.absoluteEnd=function(){return t.absoluteStart+t.duration},t.copy=function(){return Panopto.Core.ServiceInterface.Rest.Objects.Stream(t)},t},Panopto.Core.ServiceInterface.Rest.Objects.StreamContentType=function(e){return e.Audio=0,e.Screen=1,e.Slide=2,e.Camera=3,e}(Panopto.Core.ServiceInterface.Rest.Objects.StreamContentType||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.TimeZoneDisplayInfo=function(e){var t={baseUtcOffset:e.BaseUtcOffset,displayName:e.DisplayName,supportsDST:e.SupportsDST,totalHours:e.TotalHours};return t.toModel=function(){return{DisplayName:t.displayName}},t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Rest.Objects.TypeName=function(e){return e.Group="Group",e.User="User",e.Access="Access",e.Folder="Folder",e.FolderAccessItem="FolderAccessItem",e.RemoteRecorder="RemoteRecorder",e.Session="Session",e.SessionAccessItem="SessionAccessItem",e.Stream="Stream",e.Cut="Cut",e.Playlist="Playlist",e.PlaylistAccessItem="PlaylistAccessItem",e}(Panopto.Core.ServiceInterface.Rest.Objects.TypeName||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Rest=Panopto.Core.ServiceInterface.Rest||{},Panopto.Core.ServiceInterface.Rest.Objects=Panopto.Core.ServiceInterface.Rest.Objects||{},Panopto.Core.ServiceInterface.Objects.User=function(e){return{id:e.UserId,key:e.UserKey,firstName:e.FirstName,lastName:e.LastName}},Panopto.Core.ServiceInterface.Rest.Objects.User=function(e){var t={};return t.id=e.id||e.Id,t.key=e.key||e.Key,t.name=e.name||e.Name||e.Key,t.email=e.email||e.Email,t.typeName=e.typeName||e.TypeName,t.isExternalSuggestion=function(){return!t.id&&!t.email},t.isInviteRequest=function(){return!t.id&&!!t.email&&t.name&&t.name===t.email},t.joinGroups=function(e,o,n,r){Panopto.Core.ServiceInterface.Rest.Users.joinGroups(t,e,o,n,r)},t.getGroups=function(e,o,n,r){Panopto.Core.ServiceInterface.Rest.Groups.getGroups({MemberId:t.id,page:e},o,n,r)},t.leaveGroup=function(e,o,n,r){Panopto.Core.ServiceInterface.Rest.Groups.removeGroupMember(e,t.id,o,n,r)},t.toModel=function(){return{Id:t.id,Key:t.key,Name:t.name,Email:t.email,TypeName:t.typeName}},t};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Objects.UserAccessDetails=function(e){return{userId:e.UserId}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.ServiceInterface.Objects.ViewerClientLogEntry=function(e){var t={};return t.type="number"==typeof e.Type?e.Type:e.type,t.position="number"==typeof e.Position?e.Position:e.position,t.timestamp=e.Timestamp||e.timestamp,t.detail=e.Detail||e.detail,t.toModel=function(){return{Type:t.type,Position:t.position,Timestamp:t.timestamp,Detail:t.detail}},t},Panopto.Core.ServiceInterface.Objects.ViewerClientLog=function(e){var t={};return t.deliveryParams=e.DeliveryParams||e.deliveryParams,t.entries=_.map(e.Entries||e.entries||[],Panopto.Core.ServiceInterface.Objects.ViewerClientLogEntry),t.toModel=function(){return{DeliveryParams:t.deliveryParams,Entries:_.map(t.entries,function(e){return e.toModel()})}},t};var PanoptoTS;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(){}return e.toLogLine=function(e,t,o,n,r){return e+"\t"+t+"\t"+o+"\t"+n+(void 0!==r?"\t"+r:"")},e.fromLogLine=function(e){var t=e.split("\t"),o={source:t[0].toLowerCase(),time:parseInt(t[1]),playerName:t[2],type:t[3].toLowerCase(),value:t[4]};return o},e}();e.PlayerScriptEvent=t;var o;!function(e){e[e.LogInput="loginput"]="LogInput",e[e.LogOutput="logoutput"]="LogOutput",e[e.None="none"]="None",e[e.LogInputAndOutput="loginputandoutput"]="LogInputAndOutput"}(o=e.ViewerEventSource||(e.ViewerEventSource={}));var n;!function(e){e[e.Load="load"]="Load",e[e.Play="play"]="Play",e[e.Pause="pause"]="Pause",e[e.Stop="stop"]="Stop",e[e.Seek="seek"]="Seek",e[e.Speed="speed"]="Speed",e[e.Bitrate="bitrate"]="Bitrate",e[e.Fullscreen="fullscreen"]="Fullscreen",e[e.Volume="volume"]="Volume",
e[e.Mute="mute"]="Mute"}(n=e.ViewerEventType||(e.ViewerEventType={}))}(t=e.Test||(e.Test={}))}(t=e.Core||(e.Core={}))}(PanoptoTS||(PanoptoTS={}));var PanoptoTS;!function(e){var t;!function(e){var t;!function(e){var t=function(){function t(e){this.script=this.parseScriptBlob(e),this.playerNames=_.uniq(_.pluck(this.script,"playerName"))}return t.prototype.getPlayerNames=function(){return this.playerNames},t.prototype.start=function(e,t,n,r,a){var i={};_.each(t,function(e){var t=$.parseHTML("<div />");r.append(t),i[e]=new o(e,$(t),n)}),this.beginScript(e,i,a)},t.prototype.beginScript=function(e,t,o){var n,r,a=this,i=-1,s=function(){do i++;while(i<a.script.length&&(!t[a.script[i].playerName]||a.script[i].source!==e));i<a.script.length?c():o&&o()},c=function(){var e,o=a.script[i];n?e=o.time-n-((new Date).getTime()-r):(r=(new Date).getTime(),n=o.time,e=0),e>30?setTimeout(c,e-30):e>4?setTimeout(c):(t[o.playerName].runEvent(o,n-r),s())};s()},t.prototype.parseScriptBlob=function(t){return _.map(t.split("\n"),function(t){return e.PlayerScriptEvent.fromLogLine(t)})},t}();e.ScriptedViewer=t;var o=function(){function t(e,t,o){if("flowplayer"===o.toLowerCase())this.playerStub=new n(t);else if("video"===o.toLowerCase())this.playerStub=new r(t);else{if("panoptoflowplayer"!=o.toLowerCase())throw"Unknown player stub "+o;this.playerStub=new a(new Panopto.Viewer.Players.FlowPlayer("primary"==e.toLowerCase(),t))}this.playerName=e}return t.prototype.runEvent=function(t,o){switch(e.PlayerScriptEvent.toLogLine(t.source,o+(new Date).getTime(),t.playerName,t.type,t.value),t.type){case e.ViewerEventType.Load:this.playerStub.load(t.value);break;case e.ViewerEventType.Play:this.playerStub.play();break;case e.ViewerEventType.Pause:this.playerStub.pause();break;case e.ViewerEventType.Stop:this.playerStub.stop();break;case e.ViewerEventType.Seek:this.playerStub.seek(parseFloat(t.value)||0);break;case e.ViewerEventType.Speed:this.playerStub.speed(parseFloat(t.value)||0);break;case e.ViewerEventType.Bitrate:this.playerStub.bitrate(parseFloat(t.value)||0);break;case e.ViewerEventType.Fullscreen:this.playerStub.fullscreen("true"==t.value.toLowerCase());break;case e.ViewerEventType.Volume:this.playerStub.volume(parseFloat(t.value));break;case e.ViewerEventType.Mute:this.playerStub.mute("true"==t.value.toLowerCase())}},t}(),n=function(){function e(e){this.$element=e,this.ensureInitialized()}return e.prototype.load=function(t){var o={sources:[{src:t,type:t.indexOf(".m3u8")!==-1?e.HLSMimeType:e.MP4MimeType}]};this.api?this.api.load(o):this.api=flowplayer(this.$element,{clip:o})},e.prototype.play=function(){this.api.resume()},e.prototype.pause=function(){this.api.pause()},e.prototype.stop=function(){this.api.stop()},e.prototype.seek=function(e){this.api.seek(e||0)},e.prototype.speed=function(e){this.api.speed(e)},e.prototype.bitrate=function(e){},e.prototype.fullscreen=function(e){e!=this.api.isFullscreen&&this.api.fullscreen()},e.prototype.volume=function(e){this.api.volume(e/100)},e.prototype.mute=function(){this.api.mute(!0)},e.prototype.ensureInitialized=function(){flowplayer.conf.hlsjs||(flowplayer.conf.hlsjs={startLevel:"auto",safari:!0})},e}();n.MP4MimeType="video/mp4",n.HLSMimeType="application/x-mpegURL";var r=function(){function e(e){this.video=$.parseHTML("<video />")[0],e.append(this.video),this.hls=new Hls,this.hls.attachMedia(this.video)}return e.prototype.load=function(e){e.indexOf(".m3u8")?this.hls.loadSource(e):this.video.src=e},e.prototype.play=function(){this.video.play()},e.prototype.pause=function(){this.video.pause()},e.prototype.stop=function(){this.hls.stopLoad()},e.prototype.seek=function(e){this.video.currentTime=e},e.prototype.speed=function(e){this.video.playbackRate=e},e.prototype.bitrate=function(e){},e.prototype.fullscreen=function(e){e?this.video.requestFullscreen():this.video.stopFullscreen()},e.prototype.volume=function(e){this.video.volume=e/100},e.prototype.mute=function(){this.video.muted=!0},e}(),a=function(){function e(e){this.panoptoPlayer=e}return e.prototype.load=function(e){this.panoptoPlayer.content({url:e,isBroadcast:!1,isAudioOnly:!1})},e.prototype.play=function(){this.panoptoPlayer.playState(1)},e.prototype.pause=function(){this.panoptoPlayer.playState(2)},e.prototype.stop=function(){this.panoptoPlayer.playState(3)},e.prototype.seek=function(e){this.panoptoPlayer.position(e)},e.prototype.speed=function(e){this.panoptoPlayer.playSpeed(e)},e.prototype.bitrate=function(e){this.panoptoPlayer.bitrate(e)},e.prototype.fullscreen=function(e){this.panoptoPlayer.isFullscreen(e)},e.prototype.volume=function(e){this.panoptoPlayer.volume(e)},e.prototype.mute=function(e){this.panoptoPlayer.muted(e)},e}()}(t=e.Test||(e.Test={}))}(t=e.Core||(e.Core={}))}(PanoptoTS||(PanoptoTS={}));var PanoptoTS;!function(e){var t;!function(e){var t;!function(e){var t=function(){function t(){}return t.createLogger=function(r){if(!t.source){var a=Panopto.Core.StringHelpers.parseQueryString(window.location.search.slice(1),!1,!0);t.source=a.scriptmode?a.scriptmode.toString().toLowerCase():e.ViewerEventSource.None}return t.source!==e.ViewerEventSource.None?new o(t.source,r):new n},t}();e.ViewerScriptLoggerFactory=t;var o=function(){function t(e,t){this.scriptMode=e,this.playerName=t}return t.prototype.log=function(t,o,n){t!==this.scriptMode&&(this.scriptMode!=e.ViewerEventSource.LogInputAndOutput||t!=e.ViewerEventSource.LogInput&&t!=e.ViewerEventSource.LogOutput)||console.log(e.PlayerScriptEvent.toLogLine(t,(new Date).getTime(),this.playerName,o,n))},t}(),n=function(){function e(){}return e.prototype.log=function(e,t,o){},e}()}(t=e.Test||(e.Test={}))}(t=e.Core||(e.Core={}))}(PanoptoTS||(PanoptoTS={}));var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Accessibility=function(e){return e.slider=function(e,t,o){var n=e.find(".ui-slider-handle"),r="clicked";n.attr("role","slider"),n.attr("aria-label",o),n.attr("aria-valuemin",e.slider("option","min")),n.attr("aria-valuemax",e.slider("option","max")),n.attr("aria-valuenow",e.slider("option","value")),n.attr("aria-valuetext",t(e.slider("option","value"))),e.bind("slidechange",function(e,o){n.attr("aria-valuenow",o.value),n.attr("aria-valuetext",t(o.value))}),e.mousedown(function(){n.addClass(r)}),n.blur(function(){n.removeClass(r)}),n.keydown(function(e){e.keyCode>=37&&e.keyCode<=40&&e.stopPropagation()})},e.tab=function(e,t){var o=e.closest("[role=tablist]");return e.attr("role","tab"),e.attr("aria-controls",t[0].id),e.attr("aria-selected",!1),t.attr("role","tabpanel"),t.attr("aria-labelledby",e[0].id),{selected:function(t){if(e.attr("aria-selected",t),t){var n=o.find("[role=tab]");n.attr("tabindex","-1"),e.attr("tabindex","0")}}}},e.checkbox=function(e){e.keydown(function(t){t.keyCode===Panopto.Core.Key.Enter&&e.click()})},e}(Panopto.Core.UI.Accessibility||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Animations=function(e){return e.zoomInAndFade=function(e,t,o,n,r,a){a=a||{},a.fadeOutDuration=a.fadeOutDuration||350,a.fadeInDuration=a.fadeInDuration||600,a.zoomDuration=a.zoomDuration||450,a.targetsize=a.targetsize||.9,e.fadeOut(a.fadeOutDuration),n.fadeIn(a.fadeInDuration),o.zoomTo({root:t,targetsize:a.targetsize,duration:a.zoomDuration,animationendcallback:function(){r&&r()}})},e.zoomOutAndFade=function(e,t,o,n,r,a){a=a||{},a.fadeInDuration=a.fadeInDuration||400,a.fadeOutDuration=a.fadeOutDuration||250,a.zoomDuration=a.zoomDuration||550,a.targetsize=a.targetsize||.9,e.show().css("opacity",0),o.zoomTo({root:t,targetsize:a.targetsize,duration:50,animationendcallback:function(){e.animate({opacity:1},a.fadeInDuration),n.fadeOut(a.fadeOutDuration),t.zoomTo({root:t,targetsize:1,duration:a.zoomDuration,animationendcallback:function(){r&&r()}})}})},e}(Panopto.Core.UI.Animations||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.BatchHelpers=function(e){return e.errorTemplate=_.template("<div class='batch-error-text' style='display:none;'><div class='batch-error-message'><@= error.message @></div><@ if (error.retry) { @><a class='batch-error-retry' tabindex='0'><@= error.retryText @></a><span class='batch-error-retrying' style='display:none;'><@= error.retryingText @></span><@ } @><@ if (error.cancel) { @><a class='batch-error-cancel' tabindex='0'><@= error.cancelText @></a><@ } @></div>"),e.uploadRowTemplate=_.template("<@ _.each(files, function (file) { @><div class='batch-animate' style='display:none;'><div id='<@= file.Id @>' class='batch-row' tabindex='0'><div class='index-cell'><@= file.Index @></div><div class='processing-cell'></div><div class='check-cell'></div><div class='icon-cell ext-<@- file.Extension @>'></div><div class='name-cell'><input type='text' class='name-input' data-init='<@- file.Name @>' tabindex='0'></input><div class='total-bytes'><@= file.ReadableSize @></div><div class='progress-bar' style='display:none;'></div><div class='status-text ellipsis' style='display:none;'></div></div><div class='upload-action-list' style='display:none;'></div><div class='remove-cell' title='<@= Panopto.GlobalResources.BatchUpload_Remove @>' tabindex='0'></div><div class='spinner-cell' style='display:none;'></div></div></div><@ }); @>"),e.batchRowTemplate=_.template("<@ _.each(batchItems, function (batchItem, index) { @><div class='batch-animate'><div id='<@= batchItem.DeliveryID @>' class='batch-row' tabindex='0'><div class='index-cell'><@= index + 1 @></div><div class='check-cell'></div><div class='name-cell'><div class='name-text ellipsis'><@- Panopto.Core.TextHelpers.cleanTextWithoutHighlighting(batchItem.SessionName) @></div><div class='progress-bar' style='display:none;'></div></div><div class='remove-cell' data-id='<@= batchItem.DeliveryID @>' title='<@= Panopto.GlobalResources.BatchEdit_Remove @>' tabindex='0'></div></div></div><@ }); @>"),e.removeBatchItemRow=function(t,o,n,r){var a=$("#"+t),i=a.closest(".batch-animate");i.nextAll(".batch-animate").each(function(){var e=$(this).find(".index-cell");e.text(parseInt(e.text(),10)-1)}),i.animate({height:0,opacity:0},n,function(){i.remove(),r&&r()}),e.removeError(t,n,o)},e.renderFolderVisibility=function(e,t,o,n,r){var a="folderShareLink",i=$("#folderVisibility");r=r?r.replace(/&#39;/g,"'"):"",n=n?n.replace(/&#39;/g,"'"):"",o?(i.html(n.format("<a id='"+a+"' tabindex='0'>"+r+"</a>")),Panopto.Core.UI.Handlers.button($("#"+a),function(){parent.Panopto.Application.defaultInstance.updateState({modalPage:"FolderShare",modalHeader:Panopto.Core.TextHelpers.innerText(t),modalParams:Panopto.Core.StringHelpers.serializeObjectToQueryString({id:e})})})):i.text(n.format(r))},e.renderError=function(t,o,n,r){var a,i=$("#"+t),s=i.prev(".batch-error-text");o.retryText=o.retryText||Panopto.GlobalResources.BatchHelpers_Retry,o.retryingText=o.retryingText||Panopto.GlobalResources.BatchHelpers_Retrying,o.cancelText=o.cancelText||Panopto.GlobalResources.BatchHelpers_Cancel,i.toggleClass(n,!0,r),i.find(".spinner-cell").hide(),i.find("input").attr("disabled","disabled").toggleClass(n,!0,r),a=e.errorTemplate({error:o}),s.length?(s=s.replaceWith(a),s=i.prev(".batch-error-text"),s.show()):(s=i.before(a),s=i.prev(".batch-error-text"),s.fadeIn({duration:r,queue:!1}).css("display","none").slideDown(r)),o.retry&&Panopto.Core.UI.Handlers.button(s.find(".batch-error-retry"),function(e){$(e).hide(),s.find(".batch-error-cancel").hide(),s.find(".batch-error-retrying").show(),o.retry()}),o.cancel&&Panopto.Core.UI.Handlers.button(i.prev().find(".batch-error-cancel"),function(){e.removeError(t,r,n),o.cancel()})},e.removeError=function(e,t,o){var n=$("#"+e);n.hasClass(o)&&(n.toggleClass(o,!1,t),n.find("input").removeAttr("disabled").toggleClass(o,!1,t),n.prev(".batch-error-text").animate({height:0,opacity:0},t,function(){$(this).remove()}))},e}(Panopto.Core.UI.BatchHelpers||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Color=function(e){return e.parse=function(t){var o=[{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){var t=parseInt(e[1],16),o=t.toString(16);return 1==o.length&&(o="0"+o),o==e[1],[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],n=function(e){if(2==e.length){var t=parseInt(e,16),o=t.toString(16);return 1==o.length&&(o="0"+o),o==e}return!0},r=function(e){var t=e.r/255,o=e.g/255,n=e.b/255,r=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),a=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4),i=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4);return.2126*r+.7152*a+.0722*i},a=function(e,t){var o=r(e),n=r(t);return Math.abs((n+.05)/(o+.05))},i=function(t){t.sanitize=function(){this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:Math.round(this.r),this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:Math.round(this.g),this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:Math.round(this.b)},t.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},t.toRGBa=function(e){return"rgba("+this.r+", "+this.g+", "+this.b+", "+e+")"},t.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),o=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==o.length&&(o="0"+o),"#"+e+t+o},t.clone=function(){var e={};return e.r=this.r,e.g=this.g,e.b=this.b,e.ok=this.ok,i(e),e},t.getSafety=function(){var o=t.clone(),n=e.parse("ffffff"),r=a(o,n),i=4.5;if(r>=i)return o;for(;r<i;)o.r=Math.max(0,Math.floor(.99*o.r)),o.g=Math.max(0,Math.floor(.99*o.g)),o.b=Math.max(0,Math.floor(.99*o.b)),r=a(o,n);return o},t.multiply=function(e){var t={ok:!1};return this.ok&&(t=this.clone(),t.r=t.r*e,t.g=t.g*e,t.b=t.b*e,t.ok=!0,t.sanitize()),t}},s={};s.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();for(var c=0;c<o.length;c++){var l=o[c].re,p=o[c].process,d=l.exec(t),u=!/[g-z]/g.test(t);d&&n(d[1])&&n(d[2])&&n(d[3])&&(channels=p(d),s.r=channels[0],s.g=channels[1],s.b=channels[2],s.ok=u)}return i(s),s.sanitize(),s},e}(Panopto.Core.UI.Color||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.Key=Panopto.Core.Key||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Handlers=function(e){var t=Panopto.Core.Constants,o=Panopto.Core.Key;return e.key=function(e,t,o,n){n=n||{},n.keyEvent=n.keyEvent||"keydown",n.preserveExisting||e.unbind(n.keyEvent),e.bind(n.keyEvent,function(e){_.contains(o,e.keyCode)&&(n.allowDefault||e.preventDefault(),n.allowPropagation||e.stopPropagation(),t.call(n.context||this,this,e))})},e.button=function(n,r,a){a=a||{},a.preserveExisting||n.unbind("click mousedown blur"),n.click(function(e){a.allowDefault||e.preventDefault(),a.allowPropagation||e.stopPropagation(),r.call(a.context||this,this,e)}),e.key(n,r,[o.Enter].concat(a.allowDefaultSpaceBar?[]:[o.Space]),a),n.mousedown(function(){$(this).addClass(t.ClickedClass)}),n.blur(function(){$(this).removeClass(t.ClickedClass)})},e.hoverable=function(e,t){e.focus(function(){t(this,!0)}).blur(function(){t(this,!1)}),e.hover(function(){t(this,!0)},function(){t(this,!1)})},e.hoverableParent=function(e,t,o,n){n=n||{},o=o||function(e){t&&t.css("visibility",e?"visible":"hidden")},n.preserveExisting||e.unbind("mouseenter mouseleave focusin focusout"),e.hover(function(){o(!0)},function(){o(!1)}),e.focusin(function(){o(!0)}),e.focusout(function(){setTimeout(function(){e.find(document.activeElement).length||o(!1)},50)}),o(!1)},e.noLongerHoverableParent=function(e,t,o){e.unbind("mouseenter mouseleave focusin focusout"),t.css("visibility",o?"visible":"hidden")},e.hoverableChild=function(e,t,o,n){n=n||{},n.preserveExisting||t.unbind("mouseenter mouseleave focus blur"),t.focus(function(){o(!0)}).blur(function(){o(!1)}),t.hover(function(){o(!0)},function(){o(!1)})},e.focusOut=function(e,t){e.focusout(function(){_.defer(function(){e.is(document.activeElement)||e.find(document.activeElement).length||t()})})},e}(Panopto.Core.UI.Handlers||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=function(e){return e.AccessList=function(e,t,o,n,r){var a,i=n.availableRoles,s=n.accessHeader,c=n.usesReceiverSuggestions,l=n.applicationInstance,p=n.restSpinner,d=o.getAccessList,u=o.getSearchResult,f=_.template("<div class='error'><@= message @></div>"),m=_.template("<option value='<@= roleType @>'><@= roleName @></option>"),v=_.template("<div class='modal-title'><@= resources.title @></div><div class='access-container'><div class='no-results-message modal-setting modal-instructions' style='display: none'><@= resources.noResults @></div><div class='modal-instructions modal-setting access-instructions'><@= resources.instructions @></div><div class='access-table-wrapper' style='display: none'><table class='modal-table compact-table hover-feedback'><thead><tr><th><@= resources.name @></th><th><@ if (accessHeader === Panopto.Core.ServiceInterface.Rest.Objects.TypeName.Session) { @><@= resources.folder @><@ } else { @><@= resources.role @><@ } @></th><th class='remove-column'></th></tr></thead><tbody class='list-tbody'></tbody></table><div class='error-container error' style='display: none'></div></div><div class='loading-indicator' style='display: none'><@= resources.loading @></div></div><div class='search-container modal-section-break'><div class='access-title'><@= resources.grantDescription @></div><div class='message-list'></div><ul class='access-search'></ul><select class='access-roles' tabindex='0' style='display: none'></select><div class='submit-container' style='display: none'><div class='branded-gradient-button submit' tabindex='0'><@= resources.save @></div><div class='cancel' tabindex='0'><@= resources.cancel @></div></div></div>"),C="<tr class='access-row' data-row-id='<@= access.id @>'><td><@ if (typeName === Panopto.Core.ServiceInterface.Rest.Objects.TypeName.User) { @><div class='access-icon user'></div><@ } else if (typeName === Panopto.Core.ServiceInterface.Rest.Objects.TypeName.Group) { @><div class='access-icon group'></div><@ } @><@ if (Panopto.user.isAdmin) { @><a data-id='<@= item.id @>'data-name='<@- item.name @>'class='access-link'tabindex='0'title='<@- item.name @>'><@- item.name @></a><@ } else { @><span title='<@- item.name @>'><@- item.name @></span><@ } @></td><td><@ if (typeName === Panopto.Core.ServiceInterface.Rest.Objects.TypeName.Session) { @><@- item.parent.name @><@ } else { @><@= roleName @><@ } @></td><td class='remove-column'><@ if (access.isEditable) { @><a title='<@= resources.removeRow @>'data-id='<@= access.id @>'tabindex='0'alt='delete'class='remove-link remove-icon'></a><@ } @></td></tr>",P=[],h="Object already exists";$(v({resources:r,accessHeader:s})).appendTo(e);var I=e.find(".access-table-wrapper"),g=e.find("table"),S=e.find(".list-tbody"),b=e.find(".no-results-message"),y=e.find(".access-instructions"),R=e.find(".error-container"),T=e.find(".message-list"),w=e.find(".access-search"),k=e.find(".submit-container"),x=k.find(".cancel"),U=k.find(".submit"),O=e.find(".access-roles"),E=function(e,t){var o=function(e,t){var o=$(e).attr("data-id"),n=$(e).attr("data-name"),r=t===Panopto.Core.ServiceInterface.Rest.Objects.TypeName.User?Panopto.Core.StringHelpers.serializeObjectToInitParams({publicId:o}):Panopto.Core.StringHelpers.serializeObjectToInitParams({id:o}),a=t===Panopto.Core.ServiceInterface.Rest.Objects.TypeName.Folder||t===Panopto.Core.ServiceInterface.Rest.Objects.TypeName.FolderAccessItem?"FolderInfo":t===Panopto.Core.ServiceInterface.Rest.Objects.TypeName.Session||t===Panopto.Core.ServiceInterface.Rest.Objects.TypeName.SessionAccessItem?"SessionInfo":t===Panopto.Core.ServiceInterface.Rest.Objects.TypeName.RemoteRecorder?"RemoteRecorderPreview":t===Panopto.Core.ServiceInterface.Rest.Objects.TypeName.User?"UserInfo":"GroupInfo";l.updateState({modalPage:a,modalHeader:n,modalParams:r})},n=function(e){var o=$(e).attr("data-id");Panopto.Core.ServiceInterface.Rest.Access.deleteAccess(o,function(){t.find("[data-row-id='{0}']".format(o)).remove(),P=_.reject(P,function(e){return e.id===o}),D()},function(){alert(r.removalError)},p.showUntilComplete())};_.each(e,function(e){var a=c?e.receiver:e.item,i=c?e.receiver.typeName:e.item.typeName,s=$(_.template(C,{access:e,item:a,roleName:Panopto.Data.AclRoleType.getDisplayName(e.role),typeName:i,resources:r}));Panopto.Core.UI.Handlers.hoverableParent(s,null,function(e){s.toggleClass("hovering",e)}),s.appendTo(t),Panopto.Core.UI.Handlers.button(t.find(".access-row:last .remove-link"),function(e){confirm(r.confirmRemove)&&n(e)}),Panopto.user.isAdmin&&Panopto.Core.UI.Handlers.button(t.find(".access-row:last .access-link"),function(e){o(e,i)})})},D=function(){I.toggle(!!P.length),y.toggle(!!P.length),b.toggle(!P.length)},A=function(){return i.length>1?parseInt(O.val(),10):_.first(i)},M=function(){T.empty().hide(),clearTimeout(a)},j=function(e){switch(e){case Panopto.Data.AclRoleType.Viewer:return r.viewer;case Panopto.Data.AclRoleType.Creator:return r.creator;case Panopto.Data.AclRoleType.Publisher:return r.publisher;case Panopto.Data.AclRoleType.Admin:return r.admin}},N=function(e,o){M(),_.each(e.failed,function(e){var n;n=e.message===h?String.format(r.redundantError,t.name,j(o),e.source.item.name):e.source&&e.source.item?String.format(r.serverErrorAddingAccess,e.source.item.name):r.internalServerError,$(f({message:n})).appendTo(T)}),e.failed.length&&(T.show(),clearTimeout(a),a=setTimeout(function(){T.fadeOut(Panopto.Core.Constants.FadeOutSpeed,T.empty)},Panopto.Core.Constants.MessageTimeout))},F=function(){e.find(".access-row").remove(),H.start()},H=Panopto.Core.UI.Components.infiniteScroll(I,I,g.find(".loading-indicator"),d,{onSuccess:function(e,t){P=P.concat(e.results),0===t&&D(),E(e.results,S)},onFailure:function(){I.show(),R.show(),Panopto.Core.UI.Components.renderErrors(R,[r.serverError])},spinner:p.showUntilComplete}),L=Panopto.Core.UI.Components.tagSearch(w,u,{initialPlaceholder:r.initialPlaceholder},{onChange:function(e){k.toggle(!!e),M()}});return i.length>1&&_.each(i,function(e){$(m({roleType:e,roleName:j(e)})).appendTo(O),O.show()}),Panopto.Core.UI.Handlers.button(x,function(){L.clear()}),Panopto.Core.UI.Handlers.button(U,function(){var e=[],o=A();_.each(L.getModels(),function(n){var r=c?t:n,a=c?n:t;e.push(Panopto.Core.ServiceInterface.Rest.Objects.Access({item:r,receiver:a,role:o}))}),Panopto.Core.ServiceInterface.Rest.Access.batchCreate(e,!1,null,function(e){L.clear(),e.succeeded.length&&F(),N(e,o)},function(){alert(r.errorAddingAccess)},p.showUntilComplete())}),H.start(),{refresh:F}},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.UI.Components=function(e){var t=Panopto.Core.ServiceInterface.Objects,o=t.ApprovalActionType,n=t.ApprovalResult;return e.approvalStatus=function(e,r,a,i,s){var c="ApprovalStatus_Action_{0}",l="ApprovalStatus_Status_{0}",p="ApprovalStatus_Error_{0}",d="data-actionType",u="approval-action",f="instructions",m="ok-button",v="cancel-button",C="<@ _.each(actions, function (action) { @><a class='"+u+" <@= action.className @>' "+d+"='<@= action.type @>' tabindex='0'><@= action.name @></a><@ }); @>",P="<div class='"+f+"'></div><textarea tabindex='0'></textarea><div><a class='"+m+"' tabindex='0'>"+r.ApprovalStatus_OK+"</a><a class='"+v+"' tabindex='0'>"+r.ApprovalStatus_Cancel+"</a></div>",h="<div class='action-message'><@- state.message @></div><div class='action-user'><@= state.displayUser @></div>",I=a.$container,g=a.$statusText||$(),S=a.$metadata,b=a.$error,y=a.$actions,R=a.$messagePopup,T={},w=function(e,o,r){Panopto.Util.callWebMethod({methodName:e,params:o,onSuccess:function(e){T=t.ApprovalState(e),U(r)},onFailure:function(){T={availableActions:[],result:n.UnknownError},U(r)}})},k=function(o,n){w("UpdateApprovalState",t.ApprovalRequest(e,T.actionId,o,n))},x=function(e){var t=R.find("textarea");t.val(""),R.find("."+m).hide(),R.find("."+f).text((e===o.Reject?r.ApprovalStatus_Instructions_Reject:r.ApprovalStatus_Instructions_Resubmit)+":"),y.hide(),R.show(),Panopto.Core.UI.Handlers.button(R.find("."+m),function(){var o=Panopto.Core.TextHelpers.cleanTextWithoutHighlighting($.trim(t.val()));o&&k(e,o)})},U=function(e){var t,a,f=[];T.result===n.NoAccess||T.result===n.ApprovalsDisabledForFolder?I.hide():(t=r[l.format(_.invert(o)[T.actionType])],a=moment(Panopto.Core.TimeHelpers.toLocalPanoptoTime(T.date,i)).format("LLL"),g.text(T.actionType===o.Cancel?t:r.ApprovalStatus_StatusAndDate.format(t,a)),_.each(o,function(e,t){var n=e===o.Request&&T.actionType===o.Reject;_.contains(T.availableActions,e)&&f.push({type:e,name:r[c.format(n?"Resubmit":t)],className:t,requiresMessage:e===o.Reject||n})}),y.html(_.template(C,{actions:f})),Panopto.Core.UI.Handlers.button(y.find("."+u),function(e){var t=_.find(f,function(t){return t.type===parseInt($(e).attr(d),10)});t.requiresMessage?x(t.type):k(t.type)}),T.displayUser="{0}: {1}".format(T.isPublisherAction?r.ApprovalStatus_Role_Publisher:r.ApprovalStatus_Role_Owner,T.username),S.html(_.template(h,{state:T})),S.toggle(!!T.message),b.text(r[p.format(_.invert(n)[T.result])]||""),I.show(),R.hide(),y.show(),T.result!==n.Success||e||s())};R.html(P),Panopto.Core.UI.Handlers.button(R.find("."+v),function(){y.show(),R.hide()}),R.find("textarea").keyup(function(){var e=Panopto.Core.TextHelpers.cleanTextWithoutHighlighting($.trim($(this).val()));R.find("."+m).toggle(!!e)}),I.hide(),w("GetApprovalState",t.ApprovalRequest(e),!0)},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=function(e){return e.carousel=function(e,t){var o,n,r,a,i,s,c=e.find(".left-button"),l=e.find(".right-button"),p=e.find(".carousel"),d=e.find(".viewable-area"),u="not-selectable",f=0,m=function(){o=_.reduce(e.find(".selection"),function(e,t){return e+$(t).outerWidth(!0)},2),p.innerWidth(o),n=Math.clamp(o-d.width(),0,o),r=d.innerWidth()/2,a=-n},v=function(){return parseInt(p.css("left"),10)},C=function(){var e=v();l.toggleClass("shown",e!==a),c.toggleClass("shown",e!==f),i=d.offset().left,s=i-n,p.draggable("option","containment",[s,0,i,0])},P=function(e){var t=e?r:-r,o=function(){return p.css("left",Math.clamp(v()+t,a,f))};Panopto.Core.Browser.isCssSupported("transition")?(p.draggable("disable"),o().one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){p.draggable("enable"),p.css("transition","all 0s ease 0s"),C()}).css("transition",".2s")):(o(),C())};return m(),t.onModalResize.push(m),t.onModalResize.push(C),Panopto.Core.UI.Handlers.button(c,function(){P(!0)}),Panopto.Core.UI.Handlers.button(l,function(){P(!1)}),p.draggable({axis:"x",distance:10,start:function(){p.addClass(u)},stop:function(){p.removeClass(u),C()}}),C(),{refresh:function(){m(),C()},isSelectable:function(){return!p.hasClass(u)}}},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=function(e){return e.confirmDialog=function(e,t){var o="confirm-dialog",n="ok-button",r="cancel-button",a="<div class='confirm-wrapper'><div class='"+o+"'><div class='confirm-content'><@= content @></div><div class='confirm-buttons'><div class='confirm-button "+n+"' tabindex='0'><@= okText @></div><div class='confirm-button "+r+"' tabindex='0' style='display:none;'><@= cancelText @></div></div></div></div>";return{open:function(o,i,s,c){c=c||{},i.cancelHandler=i.cancelHandler||function(){},i.showHandler=i.showHandler||function(){e.show()},i.hideHandler=i.hideHandler||function(){e.hide()},e.html(_.template(a,{content:o,okText:c.okText||t.okText,cancelText:c.cancelText||t.cancelText})),e.keydown(function(e){e.stopPropagation()}),e.height(e.parent().height()),Panopto.Core.UI.Handlers.focusOut(e,function(){s?i.cancelHandler():i.okHandler(),i.hideHandler()}),Panopto.Core.UI.Handlers.button(e.find("."+n),function(){i.okHandler(),i.hideHandler()}),s&&(Panopto.Core.UI.Handlers.button(e.find("."+r),function(){i.cancelHandler(),i.hideHandler()}),e.find("."+r).show()),i.showHandler()},$getDialog:function(){return e.find("."+o)}}},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.DateFilter=function(e,t,o,n){o=o||{},n=n||{};var r,a,i=o.startDate||null,s=o.endDate||null,c=o.datepickerOptions||{},l=o.lang,p=n.changedDate||function(){},d="start-date-text-box",u="end-date-text-box",f="<div class='date-row'><div class='label'><@= resources.from @></div><input class='"+d+"' type='text'/></div><div class='date-row second-row'><div class='label'><@= resources.to @></div><input class='"+u+"' type='text'/></div>",m=function(){var e,t=r.datepicker("getDate"),o=a.datepicker("getDate");t&&o&&t>o&&(e=t,t=o,o=e,r.datepicker("setDate",t),a.datepicker("setDate",o)),p(t,o)},v=function(e,t){r.datepicker("option",e,t),a.datepicker("option",e,t)};return e.html(_.template(f,{resources:t})),r=e.find("."+d),a=e.find("."+u),Panopto.Core.UI.Components.datepicker(r,i,l),Panopto.Core.UI.Components.datepicker(a,s,l),_.each(_.pairs(c),function(e){v(e[0],e[1])}),r.on("change",function(){m()}),a.on("change",function(){m()}),{getStartDate:function(){return r.datepicker("getDate")},getEndDate:function(){return a.datepicker("getDate")},setStartDate:function(e){r.datepicker("setDate",e)},setEndDate:function(e){a.datepicker("setDate",e)},toggleDisableDates:function(e){r.prop("disabled",e),a.prop("disabled",e)}}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=function(e){return e.editableSetting=function(e,t,o,n){var r,a=o.revertSetting,i=o.saveSetting,s={PlaceholderClass:"prompt",ErrorResourceFormat:"Admin_Settings_Error_{0}"},c=_.template("<div class='editable-setting' datasetting-id='<@- item.Id @>' datasetting-originalvalue='<@- item.Value @>'><@ if (item.InputType === Panopto.Core.SettingInputType.MultiLine || item.InputType === Panopto.Core.SettingInputType.SingleLine) { @><textarea class='value-edit' tabindex='0' rows='4'><@- item.Value @></textarea><@ } else if (item.InputType === Panopto.Core.SettingInputType.Numeric || item.InputType === Panopto.Core.SettingInputType.Password) { @><input type=<@ if (item.InputType === Panopto.Core.SettingInputType.Password) { print('password'); } else { print('text'); } @> tabindex='0' class='value-edit' value='<@- item.Value @>'/><@ } else if (item.InputType === 'Boolean') { @><input type='checkbox' tabindex='0' class='value-edit' /><@ } else if (item.InputType === Panopto.Core.SettingInputType.DropDown) { @><select class='value-edit' tabindex='0'><@ _.each(item.PossibleValues, function (possValue) { @><option value='<@- possValue.Value @>' <@ if (possValue.Value === item.Value) { print('selected') } @>><@- possValue.Name @></option><@ }); @></select><@ } @><br /> <div class='edit-controls'><div class='save-edit active-edit' tabindex='0' style='display:none'><@= resources.Save @></div><div class='cancel-edit active-edit' tabindex='0' style='display:none'><@= resources.Cancel @></div><div class='revert-to-default-setting' tabindex='0' style='display:none'><@= resources.Admin_Settings_UseDefault @></div></div><div class='default-block'><div class='default-label'><@= resources.Admin_Settings_DefaultLabel @></div>&nbsp;<div class='default-value-display'><@- item.DefaultValueDisplay @></div><div class='default-value'><@- item.DefaultValue @></div></div><div class='error' style='display:none'></div></div>"),l=function(){
var e=r.find(".default-value").text(),t=r.find(".value-edit").val();r.find(".default-block").toggle(e!==t&&e.length>0),r.find(".revert-to-default-setting").toggle(e!==t),e.length||r.find(".revert-to-default-setting").text(n.Admin_Settings_ClearValue)},p=function(e){var t=n[s.ErrorResourceFormat.format(e)]||n.Admin_Settings_Error_UnknownError;r.find(".error").text(t).show(),d()},d=function(){var e=r.find(".value-edit");e.val(r.attr("datasetting-originalvalue")),m()},u=function(e){var t=r.find(".value-edit");r.attr("datasetting-originalvalue",e.Value),t.val(e.Value),l(),m()},f=function(){var e={settingId:r.attr("datasetting-id")};a(e,function(e){e.ErrorCode?p(e.ErrorCode):u(e)},p)},m=function(){var e=r.find(".value-edit");r.find(".active-edit").toggle(!1),e.blur()},v=function(){var e=r.find(".value-edit").val()!==r.attr("datasetting-originalvalue");r.find(".active-edit").toggle(e),r.find(".error").hide()},C=function(){var e=r.find(".value-edit"),t={settingId:r.attr("datasetting-id"),newValue:$.trim(e.val())};i(t,function(e,t){t&&u(e)},p)},P=function(){var e=r.find(".value-edit"),t=r.find(".save-edit"),o=r.find(".revert-to-default-setting"),a=r.find(".cancel-edit");r.find(".setting-description");l(),Panopto.Core.UI.Components.placeholder(e.filter("input[type=text], textarea"),n.Admin_Settings_SetValue,s.PlaceholderClass),Panopto.Core.UI.Handlers.button(o,f),Panopto.Core.UI.Handlers.button(t,C),Panopto.Core.UI.Handlers.button(a,d),r.mousedown(function(t){t.target!==e[0]&&(t.preventDefault(),t.stopPropagation(),e.focus())}),e.filter("select").change(v),e.keyup(function(o){return 13==o.which||27==o.which?(o.preventDefault(),13==o.which?C():d(),void e.blur()):void(t.is(":visible")||e.val()===r.attr("datasetting-originalvalue")||v())})};return r=$(c({item:t,resources:n})),e.append(r),P(),{}},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.UI.Components=function(e){return e.externalScrollbar=function(e,t,o,n,r){var a,i,s="external-scroll-frame",c="external-scroll-pane",l="<div class='"+s+" "+(n?"horizontal":"vertical")+"'><div class='"+c+"'></div></div>",p=100/3,d=200,u=function(){n?(i.width(o.width()),a.scrollLeft(-parseFloat(o.css("left")))):(i.height(o.height()),a.scrollTop(-parseFloat(o.css("top"))))},f=function(){n?o.css("left",-a.scrollLeft()):o.css("top",-a.scrollTop()),r&&r()};return e.html(l),a=e.find("."+s),i=e.find("."+c),a.scroll(f),t.on("wheel",function(e){var t,o=1===e.originalEvent.deltaMode,r=n?o?e.originalEvent.deltaX*p:e.originalEvent.deltaX:o?e.originalEvent.deltaY*p:e.originalEvent.deltaY;Math.abs(r)&&(a.stop(!0,!0),n?(t=a.scrollLeft(),a.animate({scrollLeft:t+r},d)):(t=a.scrollTop(),a.animate({scrollTop:t+r},d))),e.preventDefault()}),u(),{resize:u,scroll:f}},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=function(e){return e.filteringPopup=function(t,o,n,r){var a,i,s,c,r=r||{},l=r.filtersList||[],p=r.selectedFilters||[],d=r.zIndex||1,u=r.onSubmit,f=!0,m=_.template("<div style='display:none;' class='filtering-popup'><div class='filter-select-all filter-row'><input type='checkbox' data-id='filterAll' class='select-all-checkbox' /><div data-for='filterAll' class='filter-name'>"+n.FilterPopup_SelectAll+"</div></div><@ _.each(filters, function(filter) { @><div class='filter-row'><input type='checkbox' id='filter-<@= filter.id @>' data-id='<@= filter.id @>' /><div data-for='<@= filter.id @>' class='filter-name'><@= filter.name @></div></div><@ }); @><div class='buttons-container'><div class='submit' tabindex='0'>"+n.FilterPopup_Submit+"</div><div class='cancel' tabindex='0'>"+n.FilterPopup_Cancel+"</div><div class='clear-floats'></div></div></div>"),v=function(){var e=t.find("input[type='checkbox']:checked").not(".select-all-checkbox");c.prop("checked",e.length===l.length),c.prop("indeterminate",e.length&&e.length<l.length),f=e.length,i.toggleClass("disabled",!f)},C=function(){t.find("input[type='checkbox']").prop("checked",!1),_.each(p,function(e){$("#filter-"+e).prop("checked",!0)}),v()},P=function(e){p=e,C()},h=function(){C(),a.hide()},a=$(m({filters:l}));return a.css("z-index",d),t.html(a),e.popup(a,o,null,h,!0),i=t.find(".submit"),s=t.find(".cancel"),c=t.find(".select-all-checkbox"),t.find(".filter-name").on("click",function(e){var o=$(e.target).attr("data-for"),n=t.find("input[data-id='"+o+"']");n.prop("checked",!n.prop("checked")),n.change()}),c.on("change",function(e){var o=t.find(".select-all-checkbox"),n=o.prop("checked");n?t.find("input[type='checkbox']").not(".select-all-checkbox").prop("checked",!0):t.find("input[type='checkbox']").not(".select-all-checkbox").prop("checked",!1)}),t.find("input[type='checkbox']").on("change",function(){v()}),Panopto.Core.UI.Handlers.button(i,function(){if(f){var e=t.find("input[type='checkbox']:checked").not(".select-all-checkbox"),o=_.map(e,function(e){return $(e).attr("data-id")});p=o,u&&u(o),a.hide()}}),Panopto.Core.UI.Handlers.button(s,h),C(),{selectedFilters:function(e){return e&&P(e),p}}},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.ServiceInterface.Objects=Panopto.Core.ServiceInterface.Objects||{},Panopto.Core.UI.Components=function(e){var t=Panopto.Core.Constants,o=Panopto.Core.ServiceInterface.Rest.Objects,n=o.Folder.SortOrder;return e.FolderPickerStyles={Header:"header",Inline:"inline",Box:"box",ModalSetting:"modal-setting-picker"},e.folderPicker=function(r,a,i){i=i||{};var s,c,l,p,d,u,f,m,v,C,P,h,I=i.childIndent||20,g=i.excludedFolders||[],S=i.allowNoSelection,b=i.noSelectionClass,y=i.onChange||$.noop,R=i.selectedFolderId||null,T=i.selectedFolderName,w=i.pickerStyle,k=i.createSessionAccess,x=i.createFolderAccess,U=i.includeSandboxes,O=i.includeMySandbox,E=Panopto.features.folderPickerQuickAccessEnabled,D=Panopto.user.sandboxFolderId,A=2,M=250,j=500,N=10,F=3,H=x?Panopto.Core.FolderSet.AllFolderCreationFolders:k?Panopto.Core.FolderSet.AllSessionCreationFolders:Panopto.Core.FolderSet.AllFolders,L={depth:null,parent:null,rendered:!1,expanded:!1,nextChildPage:0,pausedDescendants:[]},V={TreeView:0,SearchView:1},B={},G=_.extend({},L,{depth:-1}),q=!1,z=$(),W=0,K=$(),Q=V.TreeView,J=0,Y=0,Z=$("<div class='input-controls'><input type='text' autocomplete='off' class='ellipsis' placeholder='"+a.instructions+"' /><div class='folder-spinner'></div><div class='dropdown-open-icon'></div></div><div class='dropdown-list tree-view' style='display:none;'><div class='tree-list'><div class='tree-recent'><div class='tree-subtitle'><i class='material-icons md-18'>&#xE192;</i><span>"+a.quickAccess+"</span></div></div><div class='tree-all'><div class='tree-subtitle'><i class='material-icons md-18'>&#xE2C8;</i><span>"+a.allFolders+"</span></div></div><div class='message' style='display:none;'>"+a.loading+"</div></div><div class='search-list'><div class='message'></div></div></div>"),X=_.template("<div class='folder-wrapper tree-folder-<@= id @>'><div class='folder' data-public-id='<@= id @>' tabindex='0' style='padding-left: <@= depth * "+I+" @>px'><div class='expand-spacer'></div><div class='folder-title'><@- name @></div></div><div class='folder-children children-<@= id @>' style='display:none'></div></div>"),ee=_.template("<div class='folder-wrapper list-folder-<@= id @>'><div class='folder' data-public-id='<@= id @>' tabindex='0'><div class='expand-spacer'></div><div class='folder-title'><@= name @></div><div class='parent-folder-text'><@- parentText @></div></div></div>"),te=function(e){return B[e.id]||(e.id===D&&(e.parent=null),B[e.id]={id:e.id,name:e.name||a.privateFolder,isRecordable:!!e.userCanCreateSessions,isMyFolder:e.id===D,disabled:!e.isEnumerable||k&&!e.userCanCreateSessions||x&&!e.userCanCreateFolders||_.contains(g,e.id),parentId:e.parent?e.parent.id:null,parentName:e.parent?e.parent.name:"",hasChildren:!!e.hasAccessibleChildren}),B[e.id]},oe=function(e){e=e||{};var t=e.parentId,r=e.query,a=n.getName(e.sort||n.Depth),i=!_.isUndefined(e.sortDescending)&&e.sortDescending,s=O&&(_.isUndefined(e.includeMyFolder)||e.includeMyFolder),c=e.index||0,l=e.size,p=e.onSuccess||$.noop;re(1);var d=o.FolderFilter({parentId:t,folderSet:H,includeMyFolder:s,includePersonalFolders:U,searchTerm:r}),u=o.PagingParameters({page:c,pageSize:l,sort:a,sortDescending:i});Panopto.Core.ServiceInterface.Rest.Folders.getFolders(_.extend(d,u),function(e){var o={folders:_.map(e.results,te),parentId:t,index:c,hasMorePages:e.hasMorePages};p(o)},function(e,t,o){window.console&&console.log(o)},function(){re(-1)})},ne=function(e,t){re(1),Panopto.Core.ServiceInterface.Rest.Folders.getOne(e,function(e){var o=te(e);t(o)},function(e,t,o){window.console&&console.log(o)},function(){re(-1)})},re=function(e){J+=e,h.find(".loading-block").toggle(J>0)},ae=function(){B={},d.find(".folder-wrapper").remove(),u.hide(),v.text(a.loading).show(),f.hide(),m.hide(),ie();var e=se(),t=ce(),o=le();$.when(e,t,o).done(function(){function e(){f.show(),m.show(),m.find(".folder-wrapper").length||v.text(a.noFolders).show()}R?pe(R).done(e):e()})},ie=function(){if(S){var e=te({id:t.EmptyGuid,name:a.noSelectionText,isEnumerable:!0,userCanCreateSessions:!0,userCanCreateFolders:!0});ue(e).prependTo(d).find(".folder").addClass("no-selection").addClass(b),R||pe(t.EmptyGuid)}},se=function(){var e=$.Deferred();return E?oe({sort:n.RecentlyUsed,sortDescending:!0,size:F,onSuccess:function(t){var o=_.where(t.folders,{disabled:!1});o.length&&(u.show(),_.each(o,function(e){ue(e).appendTo(f)}),De()),e.resolve()}}):e.resolve(),e.promise()},ce=function(){var e=$.Deferred();return D&&O?oe({parentId:D,onSuccess:function(t){var o=te({id:D,name:a.myFolder,isEnumerable:!0,userCanCreateSessions:!0,userCanCreateFolders:!0,parent:null,hasAccessibleChildren:!!t.folders.length});me([o]),ve(o),fe(t),e.resolve()}}):e.resolve(),e.promise()},le=function(){var e=$.Deferred();return oe({parentId:null,includeMyFolder:!1,onSuccess:function(t){fe(t,function(){v.hide()}),e.resolve()}}),e.promise()},pe=function(e){R=e;var t=$.Deferred(),o=B[e];return o?t.resolve(o):ne(R,function(e){R===D&&(e.name=a.myFolder),t.resolve(e)}),$.when(t).done(function(t){R===e&&(T=t.name,we(),q&&de(t))}),t.promise()},de=function(e){var o=$();E?(o=Q===V.TreeView&&e.id===z.data("publicId")?z.closest(".folder-wrapper"):d.find(".list-folder-{0}".format(e.id)),o.length||(o=ue(e).insertAfter(f.find(".tree-subtitle"))),u.toggle(!!f.find(".folder").length)):o=e.id===t.EmptyGuid?d.find(".list-folder-{0}".format(e.id)):d.find(".tree-folder-{0}".format(e.id)),d.find("."+t.SelectedClass).removeClass(t.SelectedClass),o.find("> .folder").addClass(t.SelectedClass),De()},ue=function(e,t){var o=t?Panopto.Core.TextHelpers.highlightMatches(e.name,t,"search-match"):_.escape(e.name),n=e.parentName?a.inFolder.format(e.parentName):"",r=$(ee({id:e.id,name:o,parentText:n}));return r.find(".folder-title").toggleClass("creator",e.isRecordable),r.find(".folder-title").toggleClass("myFolder",e.isMyFolder),Panopto.Core.UI.Handlers.button(r,function(){ke(r.find(".folder"))}),r},fe=function(e,t){var o=e.parentId?B[e.parentId]:G;if(o.nextChildPage===e.index){me(e.folders);var n=e.folders.length?e.folders[e.folders.length-1].id:null,r=n?B[n].depth:o.depth+1,a=e.hasMorePages?r-1:r;if(_.each(e.folders,function(e){e.rendered||((e.depth<=a||e.depth===o.depth+1)&&ve(e),e.depth<=a&&(e.parent.nextChildPage=null))}),De(),a<o.depth+1){o.nextChildPage=e.index+1,o.allPagesComplete=t;for(var i=o;i&&i.expanded&&(i=i.parent););i?i.pausedDescendants.push(o):Ie(o)}else t&&t()}},me=function(e){_.each(e,function(e){e.rendered||(B[e.id]=_.extend(e,L),e.parent=B[e.parentId]||G,e.depth=e.parent.depth+1)})},ve=function(e){var o=$(X(e)),n=o.find(".folder"),a=n.find(".expand-spacer"),i=n.find(".folder-title");n.toggleClass(t.SelectedClass,!E&&e.id===R).toggleClass(t.DisabledClass,e.disabled),a.toggleClass("expandable",e.hasChildren),i.toggleClass("myFolder",e.isMyFolder),i.toggleClass("creator",e.isRecordable&&!e.isMyFolder),Panopto.Core.UI.Handlers.button(n,function(){ke(n)}),e.hasChildren&&(Panopto.Core.UI.Handlers.button(a,function(){Pe(n),xe(n)}),a.mousedown(function(e){e.preventDefault()})),e.isMyFolder?o.insertAfter(m.find(".tree-subtitle")):e.parent===G?o.appendTo(m):r.find(".children-"+e.parent.id).append(o),e.rendered=!0},Ce=function(e,t){e.data("publicId");Pe(e,t),e.siblings(".folder-children").find("> .folder-wrapper > .folder").each(function(){Ce($(this),t)})},Pe=function(e,t){var o=B[e.data("publicId")];if(o.hasChildren){o.expanded=void 0===t?!o.expanded:t;var n=m.find(".children-"+o.id),r=n.siblings(".folder").find(".expandable");r.toggleClass("showing-children",o.expanded),n.toggle(o.expanded),o.expanded&&he(o),De()}},he=function(e){null!==e.nextChildPage&&Ie(e),_.each(e.pausedDescendants,function(e){Ie(e)}),e.pausedDescendants=[]},Ie=function(e){for(var t=e;t&&!t.isMyFolder&&(t=t.parent););var o=!!t&&t.isMyFolder;oe({parentId:e.id,includeMyFolder:o,index:e.nextChildPage,onSuccess:function(t){fe(t,e.allPagesComplete)}})},ge=function(e){var t=e.closest(".folder-children",d).siblings(".folder");t.length||(t=d.find(".folder").first()),xe(t)},Se=function(e){var t=e.siblings(".folder-children").find(".folder").first();xe(t)},be=function(e){Q===V.TreeView&&e===V.SearchView&&(z=$()),Q=e;var t=Q===V.TreeView;p.toggleClass("tree-view",t),p.toggleClass("search-view",!t),s=t?d:C,G.expanded=t,t?(c.val("").focus(),z=K,Ue(z,!0),q&&he(G)):(Y++,C.find(".folder-wrapper").remove(),P.text(a.searchingText).show()),De()},ye=_.debounce(function(e){var t=Y;oe({query:e,onSuccess:function(o){if(Y===t&&Q===V.SearchView){var n=_.where(o.folders,{disabled:!1});P.toggle(!n.length).html(a.noResultsText.format(Panopto.Core.TextHelpers.highlightMatches(e,e,"search-match"))),_.each(n,function(t){ue(t,e).appendTo(C).find(".expand-spacer").hide()}),De()}}})},M),Re=function(){c.css("width",""),r.toggleClass("dropdown-visible",!0),p.show(),be(V.TreeView),q||(ae(),q=!0),De()},Te=function(){G.expanded=!1,c.blur(),r.toggleClass("dropdown-visible",!1),p.hide(),we()},we=function(){var t,o=5,n=10;r.is(".dropdown-visible")||(c.val(T),w===e.FolderPickerStyles.Header&&(t=Panopto.Core.ElementHelpers.measureText(c,c.val())+o,inputPadding=parseInt(c.css("padding-left"),10)+parseInt(c.css("padding-right"),10),t=Math.clamp(t,0,r.width()-inputPadding-n),c.width(t)))},ke=function(e){xe(e);var o=B[e.data("publicId")];if(!o.disabled){pe(o.id),Te();var n=_.pick(o,"id","name");n.id=n.id===t.EmptyGuid?null:n.id,y(n)}},xe=function(e){e&&e.length&&(z=e,Ue(z),z.focus(),Q===V.TreeView&&(K=z))},Ue=function(e,t){var o,n,r,a,i,s;e.length&&(o=e.offset().top,r=e.height(),n=o+r,a=p.offset().top,s=p.prop("clientHeight"),i=a+s,(o<a||n>i)&&(t?p[0].scrollTop+=o-a-s/2+r/2:o<a?p[0].scrollTop+=o-a:n>i&&(p[0].scrollTop+=n-i)))},Oe=function(){z.length||(z=s.find(".folder").first()),xe(z)},Ee=function(e,t){var o,n=r.find(".folder").filter(":visible");z.length?(o=n.index(z)+e,t&&(o=Math.max(0,Math.min(o,n.length-1)))):o=e>=0?0:n.length-1;var a=n.eq(o%n.length),i=o<0||o>n.length-1,s=i&&new Date-W<j;a.length&&!s&&(W=new Date,xe(a))},De=function(){if(r.is(".dropdown-visible")){var e=s.height()>p.prop("clientHeight");p.css("overflow-y",e?"scroll":"");var t=0;if(Panopto.Core.Browser.isIE||Panopto.Core.Browser.isIE11){var o=c.outerWidth();t=p.innerWidth()-p.prop("clientWidth"),p.css("min-width",o-t),p.css("max-width",o-t)}var n=$("body").prop("clientWidth")-p.offset().left-t-N;p.css("max-width",n)}},Ae=function(){r.addClass(w),Z.appendTo(r),c=r.find("input"),l=r.find(".dropdown-open-icon"),p=r.find(".dropdown-list"),d=r.find(".tree-list"),u=d.find(".tree-subtitle"),f=d.find(".tree-recent"),m=d.find(".tree-all"),v=d.find(".message"),C=r.find(".search-list"),P=C.find(".message"),h=r.find(".folder-spinner"),Panopto.Core.UI.Components.spinner($(".folder-spinner"),Panopto.Core.Browser.isCssSupported("animation")),s=d,$(window).resize(De),Panopto.Core.UI.Handlers.button(c.add(l),function(e,t){p.is(":visible")?t.target===l[0]&&Te():Re()},{allowDefaultSpaceBar:!0}),c.focus(function(){p.is(":visible")||Re()}),Panopto.Core.UI.Handlers.focusOut(r,function(){p.is(":visible")&&Te()}),p.focus(Oe),c.add(p).keydown(function(e){e.keyCode===Panopto.Core.Key.Esc&&(Q===V.TreeView?(Te(),K=$()):be(V.TreeView),e.stopPropagation())}),c.keydown(function(e){var t;switch(e.keyCode){case Panopto.Core.Key.Tab:t=!e.shiftKey;break;case Panopto.Core.Key.Home:case Panopto.Core.Key.End:t=!c.val();break;case Panopto.Core.Key.UpArrow:case Panopto.Core.Key.DownArrow:case Panopto.Core.Key.PageUp:case Panopto.Core.Key.PageDown:t=!0}t&&(Oe(),z.length&&(e.keyCode!==Panopto.Core.Key.PageUp&&e.keyCode!==Panopto.Core.Key.PageDown&&e.keyCode!==Panopto.Core.Key.Home&&e.keyCode!==Panopto.Core.Key.End||o(e),e.preventDefault()))});var o=function(e){var o,n,r,a=s.find(".folder").first().height(),i=!!z.closest(".tree-all").length;switch(e.keyCode){case Panopto.Core.Key.Tab:e.shiftKey?(c.focus(),e.preventDefault()):s.find(".folder:visible").last().focus();break;case Panopto.Core.Key.UpArrow:case Panopto.Core.Key.DownArrow:o=e.keyCode===Panopto.Core.Key.DownArrow,e.ctrlKey?p[0].scrollTop+=a*(o?1:-1):z.is("."+t.ClickedClass)||Ee(o?1:-1),e.preventDefault();break;case Panopto.Core.Key.LeftArrow:case Panopto.Core.Key.RightArrow:n=e.keyCode===Panopto.Core.Key.RightArrow,e.ctrlKey?e.shiftKey?p.prop("scrollLeft",n?s.width():0):p[0].scrollLeft+=a*(n?1:-1):Q===V.TreeView&&i&&(r=z.siblings(".folder-children").is(":visible"),n||r?n&&r?Se(z):Pe(z):ge(z)),e.preventDefault();break;case Panopto.Core.Key.PageUp:case Panopto.Core.Key.PageDown:o=e.keyCode===Panopto.Core.Key.PageDown;var l=p.prop("clientHeight"),d=Math.floor(l/a),u=(d-1)*(o?1:-1);e.ctrlKey?p[0].scrollTop+=u*a:Ee(u,!0),e.preventDefault();break;case Panopto.Core.Key.Home:case Panopto.Core.Key.End:n=e.keyCode===Panopto.Core.Key.End,e.ctrlKey?p.prop("scrollTop",n?s.height():0):Ee(1/0*(n?1:-1),!0),e.preventDefault();break;case Panopto.Core.Key.Plus:case Panopto.Core.Key.Minus:case Panopto.Core.Key.KeypadPlus:case Panopto.Core.Key.KeypadMinus:i&&(r=e.keyCode===Panopto.Core.Key.Plus||e.keyCode===Panopto.Core.Key.KeypadPlus,Pe(z,r)),e.preventDefault();break;case Panopto.Core.Key.Asterisk:case Panopto.Core.Key.KeypadAsterisk:i&&(r=e.keyCode===Panopto.Core.Key.Asterisk===e.shiftKey,Ce(z,r)),e.preventDefault();break;case Panopto.Core.Key.ForwardSlash:c.focus(),e.preventDefault()}z.removeClass(t.ClickedClass)};p.on("keydown",".folder",o),e.liveInput(c,function(e){var t=c.val();t.length>=A&&(be(V.SearchView),ye(t)),t||be(V.TreeView)}),Te(),R&&pe(R)};return Ae(),{refresh:ae,setFolder:function(e){(e||S)&&(e=e||t.EmptyGuid,pe(e))},getFolder:function(){return R===t.EmptyGuid?null:R},headerReflow:we,enabled:function(e){return"undefined"==typeof e?!c.prop("disabled"):void(!e!==c.prop("disabled")&&(Te(),c.prop("disabled",!e),l.css("visibility",e?"":"hidden")))}}},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=function(e){return e.infiniteScroll=function(e,t,o,n,r){r=r||{};var a,i,s,c=r.onSuccess||function(){},l=r.onFailure||function(){},p=r.onFinish||function(){},d=r.onComplete||function(){},u=r.spinner||function(){},f=50,m=0,v=function(){a=-1,i=!0,s=!1,m+=1},C=function(){var t=e[0],o=t.scrollHeight-t.clientHeight;return!o||100*t.scrollTop/o>=f},P=function(){var e=m,t=function(){s=!1,o&&o.hide()};a++,o&&o.show(),s=!0,n(a,function(o){e===m&&(c(o,a),t(),i=o.hasMorePages,i?C()&&P():p())},function(e){t(),l(e)},u(d))};return t.scroll(function(){!s&&i&&C()&&P()}),{start:function(){v(),P()},destroy:function(){t.off("scroll")}}},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=function(e){var t=Panopto.Core.Constants;return e.liveInput=function(e,t){var o=e.val();e.bind("input propertychange selectionchange keyup keydown",function(n){var r=e.val();r!==o&&(o=r,t(n))}),Panopto.Core.ElementHelpers.silenceInputValuePropertyChange(e[0],function(e){o=e})},e.editableLabel=function(e,o,n,r){r=r||t.InitAttribute;var a=e.attr(r),i=e.attr(r),s=function(){e.val()!==a&&(o(e.val()),a=e.val())},c=function(){e.height(1),e.height(e[0].scrollHeight)};return $(document).ready(function(){e.val(e.attr(r)),e.keydown(function(t){13===t.keyCode?(t.preventDefault(),s(),this.blur()):27===t.keyCode&&(e.val(a),this.blur()),t.stopPropagation()}),e.focus(function(){e.select()}),e.blur(s)}),n&&e.keydown(function(e){_.defer(c)}),{save:function(){i=e.val()},revert:function(){e.val(i),a=i},resize:function(){n&&c()}}},e.placeholder=function(e,o,n){return n=n||t.PlaceholderClass,e.unbind("."+n),e.hasClass(n)?e.val(o):jQuery.trim(e.val())||e.is(":focus")||e.val(o).toggleClass(n,!0),e.bind("focus."+n,function(){e.hasClass(n)&&e.val("").toggleClass(n,!1)}).bind("blur."+n,function(){jQuery.trim(e.val())||e.val(o).toggleClass(n,!0)}),{val:function(){return e.hasClass(n)?"":$.trim(e.val())}}},e.timepicker=function(e,t,o){var n="enterPressed";e.timepicker({lang:o,typeaheadHighlight:!1}),t&&e.timepicker("setTime",t),e.keydown(function(e){var t=$(this),o=t.data(n);if(e.keyCode===Panopto.Core.Key.Enter){if(o)return!1;t.data(n,!0)}else o&&(t.data(n,!1),t.focus())})},e.datepicker=function(e,t,o,n){e.datepicker($.datepicker.regional[o]),t&&e.datepicker("setDate",t),n&&(e.on("change",n),Panopto.Core.UI.Handlers.key(e,n,Panopto.Core.Key.Enter,{preserveExisting:!0}))},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=function(e){return e.linkToggle=function(e,t,o){var n,r,a="link-input",i="link-toggle",s="selected",c="<input class='"+a+"' type='text' readonly tabindex='0' /><div class='"+i+"' tabindex='0'>&lt/&gt</div>",l=function(e){n.val(e?o:t),r.toggleClass(s,e)};e.html(_.template(c)),n=e.find("."+a),r=e.find("."+i),n.focus(function(){n.select()}),Panopto.Core.UI.Handlers.button(r,function(){l(!r.hasClass(s)),n.focus()}),l(!1)},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=function(e){return e.modalScroll=function(e,t,o,n){var r=e.removeItem,a=e.getItems,i=e.updateNoRowsMessage,s=e.modalInstance,c=(e.applicationInstance,t.$noRowsMessage,t.$section),l=t.$loading,p=t.$errorContainer,d=t.$rowTemplate,u=o.confirmRemove,f=o.removeError,m=o.pagingError,n=n||{},v=n.isEditable!==!1,C=n.showModal||function(){},P=n.spinner||function(){},h=c.find("tbody"),I=(c.find("table"),function(e,t,o){if(t.length){var n=_.template(d.html());_.each(t,function(t){var r=$(n({row:t,isEditable:o}));Panopto.Core.UI.Handlers.button(r.find(".remove-row"),function(e){confirm(u)&&(g($(e).attr("data-id")),s.flagChanges(!0))}),Panopto.Core.UI.Handlers.button(r.find(".item-link"),function(e){var t=$(e).attr("data-id"),o=$(e).attr("data-name");C(t,o)}),Panopto.Core.UI.Handlers.hoverableParent(r,null,function(e){r.toggleClass(Panopto.Core.Constants.HoveringClass,e)}),r.appendTo(e)})}}),g=function(e){r(e,function(){i(),h.find("#"+e).remove(),s.flagChanges(!0)},function(){Panopto.Core.UI.Components.renderErrors(p,[f])})},S=function(e){I(h,e,v)};return paging=Panopto.Core.UI.Components.infiniteScroll(Panopto.Core.Browser.isWebkit?$("body"):$("html"),Panopto.Core.Browser.isIE8?$(window):$(document),l,a,{onSuccess:function(e,t){0===t&&i(),S(e.results)},onFailure:function(e){Panopto.Core.UI.Components.renderErrors(p,[m])},spinner:P}),{start:function(){$(".item-row").remove(),paging.start()}}},e}(Panopto.Core.UI.Components||{});var PanoptoTS;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(){function t(e,t,o,r,a,i,s,c){var l=this;this.toggleAnimationDuration=200,this.playItemHandlers=[],this.toggleHandlers=[],this.autoHideDelay=2e3,this.playHideDelay=1e3,this.template=_.template('\n            <div class="header">\n                <div class="icon">\n                    <i class="material-icons" tabindex="0">&#xE05F;</i>\n                </div>\n                <div class="name">\n                    <@- name @>\n                </div>\n                <div class="current-position"></div>\n                <div class="skip-buttons">\n                    <i class="previous-button material-icons disabled">&#xE045;</i><!-- collapse whitespace\n                 --><i class="next-button material-icons disabled">&#xE044;</i>\n                </div>\n            </div>\n            <div class="session-list-container">\n                <table class="session-list">\n                    <@ _.each(sessions, function(session, index) { @>\n                        <tr data-id="<@= session.id @>" data-index="<@= index @>" tabindex="0">\n                            <td class="thumbnail"> \n                                <div class="thumbnail-container"\n                                     style="background-image: url(<@= session.thumbUrl @>)">\n                                    <div class="up-next" style="display: none">\n                                        <@- Panopto.GlobalResources.PlaylistOverlay_UpNext @>\n                                        <span class="cancel-button" tabindex="0">\n                                            <@- Panopto.GlobalResources.PlaylistOverlay_Cancel @>\n                                        </span>\n                                    </div>\n                                    <div class="countdown-container"></div>\n                                </div>\n                            </td>\n                            <td class="details">\n                                <div class="name"><@- session.name @></div>\n                                <div class="folder"><@- session.parent ? session.parent.name : "" @></div>\n                                <div class="description"><@- session.description @></div>\n                                <div class="up-next" style="display: none">\n                                    <@- Panopto.GlobalResources.PlaylistOverlay_UpNext @>\n                                    <span class="cancel-button" tabindex="0">\n                                        <@- Panopto.GlobalResources.PlaylistOverlay_Cancel @>\n                                    </span>\n                                </div>\n                            </td>\n                        </tr>\n                    <@ }); @>\n                </table>\n            </div>'),this.countdownTemplate=_.template('\n            <div class="icon-background"></div>\n            <div class="timer"></div>\n            <i class="play-icon material-icons">&#xE037;</i>'),this.$container=e,this.$trigger=t,this.selectedItemId=r,this.skin=a,this.isVisible=s,e.addClass("playlist-overlay"),this.$container.toggle(s),this.getPlaylist(o,i).then(function(e){l.playlist=e,l.render(),l.isVisible&&c===n.Play&&_.delay(function(){return l.toggle(!1)},l.autoHideDelay);var t=_.findIndex(l.playlist.sessions,function(e){return e.id===r});t>=0&&l.selectItem(t,c)})}return t.prototype.selectItem=function(e,t){if(!(e<0||e>=this.playlist.sessions.length)){this.selectedItemIndex=e;var o=$(this.$container.find("tr")[e]);this.selectedItemId=o.data("id"),this.renderSelection(),this.selectionTimer&&this.cancelCountdown(),t==n.Play?this.firePlayItem():t==n.Delay&&this.startCountdown(o)}},t.prototype.onPlayItem=function(e){this.playItemHandlers.push(e)},t.prototype.onToggle=function(e){this.toggleHandlers.push(e)},t.prototype.queueNextItem=function(){this.selectItem(this.selectedItemIndex+1,n.Delay)},t.prototype.hide=function(){this.toggle(!1)},t.prototype.cancelCountdown=function(){this.selectionTimer.stop(),this.selectionTimer=void 0,this.$container.find(".countdown-container").empty(),this.$container.find(".up-next").hide()},t.prototype.getPlaylist=function(e,t){var o=Panopto.Core.ServiceInterface.Rest.SessionLists,n=Panopto.Core.ServiceInterface.Rest.Playlists,r=$.Deferred();return n.getOne({id:e,onSuccess:function(e){o.getOne(e.sessionListId,t,function(t){r.resolve({name:e.name,sessions:t.items})})}}),r.promise()},t.prototype.render=function(){var e=this,t=this.template(this.playlist);this.$container.html(t);var r=o[this.skin].toLowerCase();this.$container.addClass(r);var a=this.$container.find(".icon");Panopto.Core.UI.Handlers.button(this.$trigger.add(a),function(){e.toggle()}),this.$container.on("click",".skip-buttons i",function(t){var o=$(t.currentTarget).is(".next-button")?1:-1;e.selectItem(e.selectedItemIndex+o,n.Play),t.preventDefault(),t.stopPropagation()}),this.$container.on("mousedown",".skip-buttons i",function(e){return e.preventDefault()}),this.$container.on("click","tr",function(t){e.selectItem($(t.currentTarget).data("index"),n.Play),_.delay(function(){return e.toggle(!1)},e.playHideDelay),t.preventDefault(),t.stopPropagation()}),this.$container.on("click",".cancel-button",function(t){e.cancelCountdown(),t.preventDefault(),t.stopPropagation()})},t.prototype.renderSelection=function(){var e=Panopto.Core.Constants,t=this.selectedItemIndex,o=$(this.$container.find("tr")[t]),n=this.playlist.sessions.length,r=Panopto.GlobalResources.PlaylistOverlay_CurrentPositionFormat.format(t+1,n);this.$container.find(".current-position").text(r);var a=0!==t;this.$container.find(".previous-button").toggleClass(e.DisabledClass,!a).attr("tabindex",a?0:-1);var i=t<n-1;this.$container.find(".next-button").toggleClass(e.DisabledClass,!i).attr("tabindex",i?0:-1),this.$container.find("tr."+e.SelectedClass).removeClass(e.SelectedClass),o.addClass(e.SelectedClass)},t.prototype.toggle=function(e){var t=this;void 0===e&&(e=!this.isVisible),e!==this.isVisible&&(this.isVisible=e,this.$container[e?"slideDown":"slideUp"](this.toggleAnimationDuration),_.each(this.toggleHandlers,function(e){return e(t.isVisible)}))},t.prototype.startCountdown=function(t){var n=this;this.toggle(!0);var r=t.find(".countdown-container");r.html(this.countdownTemplate());var a=r.find(".timer");this.selectionTimer=new e.RadialTimer(a,8,{size:38,fill:"transparent",stroke:"white",strokeWidth:2}),this.skin===o.Interactive?t.find(".thumbnail .up-next").show():t.find(".details .up-next").show(),this.selectionTimer.onElapsed(function(){n.cancelCountdown(),n.firePlayItem(),_.delay(function(){return n.toggle(!1)},n.playHideDelay)}),this.selectionTimer.start()},t.prototype.firePlayItem=function(){var e=this;_.each(this.playItemHandlers,function(t){return t(e.selectedItemId)})},t}();e.PlaylistOverlay=t;var o;!function(e){e[e.Interactive=0]="Interactive",e[e.Embedded=1]="Embedded"}(o=e.PlaylistOverlaySkin||(e.PlaylistOverlaySkin={}));var n;!function(e){e[e.None=0]="None",e[e.Play=1]="Play",e[e.Delay=2]="Delay"}(n=e.PlaylistOverlayPlayState||(e.PlaylistOverlayPlayState={}))}(t=e.Components||(e.Components={}))}(t=e.UI||(e.UI={}))}(t=e.Core||(e.Core={}))}(PanoptoTS||(PanoptoTS={}));var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=function(e){var t=function(e,t,o){Panopto.Core.UI.Handlers.focusOut(e,function(){void 0!==o&&($("body").is(document.activeElement)||o.is(document.activeElement)||o.find(document.activeElement).length)||t()})},o=function(e,t,o){var n=o?t.parent().outerWidth()-(t.offset().left-t.parent().offset().left)-t.outerWidth():t.offset().left-t.parent().offset().left;e.css(o?"right":"left",n),e.css("top",t.offset().top)};return e.popup=function(e,o,n,r,a,i){var s=function(t){o.is(t.target)||0!=o.has(t.target).length||e.is(t.target)||0!==e.has(t.target).length||r();
};n=n||function(){e.show(),i&&!o.hasClass(Panopto.Core.Constants.ClickedClass)&&_.defer(function(){e.find("[tabIndex]:visible").first().focus()})},r=r||function(){e.hide()},a?Panopto.Core.UI.Handlers.button(o,function(){e.is(":visible")?r():n()}):Panopto.Core.UI.Handlers.button(o,function(){n()}),$(document).mouseup(s),Panopto.isModal&&parent.Panopto.ModalPopup.defaultInstance.attachDocumentHandler(s,"mouseup"),t(e,r,a?o:void 0)},e.hoveringFlyout=function(e,n,r,a,i){var s,c=!1,l=!1,p=function(){s&&clearTimeout(s),s=setTimeout(function(){e.fadeOut(a,function(){c=!1})},i)};n.mouseenter(function(){c||(o(e,n,r),e.fadeIn(a),p())}),n.focus(function(){l?l=!1:(o(e,n,r),e.fadeIn(a),s&&clearTimeout(s),l=!0,e.focus())}),e.mouseleave(function(){c=!0,e.fadeOut(a,function(){c=!1})}),e.mousemove(function(){p()}),t(e,function(){l=!1,e.fadeOut(a)})},e.flyout=function(t,n,r,a,i,s){var c;e.popup(t,n,function(){s&&!s()||(o(t,n,a),t.fadeIn(i),c&&clearTimeout(c))},function(){t.fadeOut(i)}),Panopto.Core.UI.Handlers.button(t.find(".flyout-close"),function(){t.fadeOut(i)}),t.mouseleave(function(){c&&clearTimeout(c),c=setTimeout(function(){t.fadeOut(i)},r)}),t.mouseenter(function(){c&&clearTimeout(c)})},e}(Panopto.Core.UI.Components||{});var PanoptoTS;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(e,t){this.template='\n<table class="private-session-playlist">\n    <@ _.each(sessions, function(session) { @>\n        <tr class="row">\n            <td class="cell thumbnail">\n                <div class="thumbnail-container <@ if (session.isViewable) { @>viewable<@ } @>">\n                    <a class="thumbnail-link" href="<@= session.link @>" target="_blank">\n                        <img class="thumbnail-img" title="<@= thumbnailTitle @>" src="<@= session.thumbnail @>" />\n                    </a>\n                    <span class="thumbnail-span">\n                        <img class="thumbnail-img" title="<@= thumbnailTitle @>" src="<@= session.thumbnail @>" />\n                    </span>\n                </div>\n            </td>\n            <td class="cell title <@ if (session.isViewable) { @>viewable<@ } @>">\n                <a class="title-link" href="<@= session.link @>" target="_blank">\n                    <@- session.name @>\n                </a>\n                <span class="title-span">\n                    <@- session.name @>\n                </span>\n            </td>\n            <td class="cell status" >\n                <@ if(session.isFixable) { @>\n                <div title="<@= fixedTooltip @>" class="playlist-access-issue-fixed">\n                    <i class="material-icons check-icon">&#xE5CA;</i>\n                </div>\n                <@ } else { @>\n                <div title="<@= noAccessTooltip @>">\n                    <i class="material-icons warning-icon">&#xE002;</i>\n                </div>\n                <@ } @>\n            </td>\n        </tr>\n    <@ }); @>\n</table>';var o=this.transform(t),n=this.render(o);e.html(n)}return e.prototype.render=function(e){var t=_.template(this.template),o=t({sessions:e,fixedTooltip:Panopto.GlobalResources.Playlists_Access_NoAccessTooltip,noAccessTooltip:Panopto.GlobalResources.Playlists_Access_NoAccessTooltip,thumbnailTitle:Panopto.GlobalResources.Playlists_Access_ThumbnailTitle});return o},e.prototype.transform=function(e){for(var t=[],o=0,n=e;o<n.length;o++){var r=n[o];t.push({thumbnail:r.thumbnail,name:r.name,link:r.link,isFixable:r.isFixable||!1,isViewable:r.isViewable||!1})}return t},e}();e.PrivateSessionPlaylistView=t}(t=e.Components||(e.Components={}))}(t=e.UI||(e.UI={}))}(t=e.Core||(e.Core={}))}(PanoptoTS||(PanoptoTS={}));var PanoptoTS;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(t,o,n){this.elapsedHandlers=[],this.$parent=t,this.durationSeconds=o,this.style=n,this.$parent.html(e.template(this.style))}return e.prototype.start=function(){var t=this;this.intervalHandle&&this.stop(),this.startTime=new Date,this.intervalHandle=setInterval(function(){return t.render()},e.updateIntervalMillis),this.render()},e.prototype.stop=function(){this.intervalHandle&&(clearInterval(this.intervalHandle),this.intervalHandle=void 0)},e.prototype.onElapsed=function(e){this.elapsedHandlers.push(e)},e.prototype.render=function(){var e=new Date,t=(e.getTime()-this.startTime.getTime())/1e3/this.durationSeconds;if(t<1){var o=this.getArcData(2*t*Math.PI);document.getElementById("radialTimerArc").setAttribute("d",o)}else this.stop(),_.each(this.elapsedHandlers,function(e){return e()})},e.prototype.getArcData=function(e){var t=this.style.strokeWidth/2,o=this.style.size/2,n=o-t;return"M "+o.toString()+" "+t.toString()+" A "+n.toString()+" "+n.toString()+" 0 "+(e<Math.PI?"0":"1")+" 1 "+(t+n*(1+Math.sin(e))).toString()+" "+(t+n*(1-Math.cos(e))).toString()},e}();t.template=_.template('\n            <svg height="<@= size @>" width="<@= size @>">\n                <path id="radialTimerArc" stroke="<@= stroke @>" stroke-width="<@= strokeWidth @>" fill="<@= fill @>"></path>\n            </svg>'),t.updateIntervalMillis=30,e.RadialTimer=t}(t=e.Components||(e.Components={}))}(t=e.UI||(e.UI={}))}(t=e.Core||(e.Core={}))}(PanoptoTS||(PanoptoTS={}));var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.UI.Components=function(e){return Panopto.Core.UI.Components.restSpinner=function(e){var t=0,o=function(){t--,e(t)};return{showUntilComplete:function(n){var n=n||function(){};return t++,e(!0),function(){o(),n.apply(this,arguments)}}}},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=function(e){var t=Panopto.Core.Constants;return e.scrollingHighlight=function(e,o,n,r){r=r||t.HighlightedClass;var a,i,s=!1,c="scrollAnimating";o?jQuery.fx.step.scrollTop=function(e){$(e.elem).data(c,!0),e.elem.scrollTop=e.now}:jQuery.fx.step.scrollLeft=function(e){$(e.elem).data(c,!0),e.elem.scrollLeft=e.now};var l=function(){i&&clearTimeout(i),s=!0,i=setTimeout(function(){s=!1},n)};return e.focusin(l),e.scroll(function(){$(this).data(c)||l(),$(this).data(c,!1)}),{highlight:function(t,n,i){var c,l,p;a&&e.find("#"+a.id).toggleClass(r,!1),t&&(c=e.find("#"+t.id),c.toggleClass(r,!0),!e.is(":visible")||s&&!n||(o?(l=(e.height()-c.height())/2,p=c.offset().top-e.offset().top+e.scrollTop()-l,i?e.scrollTop(p):e.stop(!0).animate({scrollTop:p})):(l=(e.width()-c.width())/2,p=c.offset().left-e.offset().left+e.scrollLeft()-l,i?e.scrollLeft(p):e.stop(!0).animate({scrollLeft:p})))),a=t,n&&n(a)}}},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=function(e){return e.sessionList=function(t,o,n,r,a){a=a||{};var i={SessionRow:"session-row",SessionName:"session-name",More:"more",SessionActions:"session-actions",ExtraActions:"extra-actions",SessionRating:"session-rating",SessionUpload:"session-upload"},s="<@ _.each(sessions, function (session) { @><div class='"+i.SessionRow+"'><div class='thumbnail-cell'><div class='thumbnail-wrapper'><img class='thumbnail' src='<@= session.thumbUrl @>' />"+(a.inlineDuration?"":"<div class='session-duration'><@= session.friendlyDuration @></div>")+"</div></div><div class='session-data'><@ if (session.viewable) { @><a href='<@= session.viewerUrl @>' class='"+i.SessionName+" ellipsis' target='_blank'><@- session.name @></a><@ } else { @><div class='"+i.SessionName+" ellipsis'><@- session.name @></div><@ } @><div class='session-folder'><@- session.folderText @></div>"+(a.combinedFolderDate?"":"<div class='session-date'><@= session.friendlyDate @></div>")+(a.showDescription?"<div class='session-description'><@- session.description @></div>":"")+(a.inlineDuration?"<div class='session-misc'><div class='session-inline-duration'><@= session.friendlyDuration @></div><div class='"+i.SessionRating+"'></div></div>":"")+"<div class='"+i.SessionActions+"'><@ _.each(_.filter(actions, function (action) { return action.available(session); }), function (action) { @><div class='session-action <@= action.cssClass @>'><@= action.name @></div><@ }); @></div><div class='"+i.ExtraActions+"' style='display:none;'><@ _.each(_.filter(extraActions, function (action) { return action.available(session); }), function (action) { @><div class='session-extra-action <@= action.cssClass @>'><@= action.name @></div><@ }); @></div><div class='"+i.SessionUpload+"'></div></div></div><@ }); @>";return _.each(o,function(e){e.friendlyDuration=e.duration?Panopto.Core.TimeHelpers.formatDuration(e.duration,r.timeSeparator):"",e.friendlyDate=e.date?moment.utc(Panopto.Core.TimeHelpers.formatWin32EpochTimeToDate(e.date)).local().format("LL"):"",e.folderText=e.folder?a.combinedFolderDate?r.folderDateText.format(e.friendlyDate,e.folder.name):r.folderText.format(e.folder.name):""}),_.some(n,function(e){return e.isExtra})&&(n=n.concat([{name:r.moreActionName,cssClass:i.More,handler:function(e,t){var o=t.find("."+i.More);t.find("."+i.ExtraActions).css({right:$(window).width()-(t.offset().left+t.outerWidth()),top:o.offset().top+o.outerHeight()}).toggle()}}])),_.each(n,function(e){e.available=e.available||function(){return!0}}),t.html(_.template(s,{sessions:o,actions:_.filter(n,function(e){return!e.isExtra}),extraActions:_.filter(n,function(e){return e.isExtra}),params:a})),t.find("."+i.SessionRow).each(function(t){var r=$(this),s=o[t];_.some(n,function(e){return e.isExtra})&&e.popup(r.find("."+i.ExtraActions),r.find("."+i.More)),a.viewHandler&&Panopto.Core.UI.Handlers.button(r.find("a."+i.SessionName),function(){a.viewHandler(s)}),a.inlineDuration&&s.rating&&Panopto.Core.UI.Components.starRating(r.find("."+i.SessionRating)).value(s.rating)}),_.each(n,function(e){Panopto.Core.UI.Handlers.button($("."+e.cssClass),function(){var t=$(this).closest("."+i.SessionRow);t.find("."+i.ExtraActions).hide(),e.handler(o[t.index()],t)})}),{getClassNames:function(){return i}}},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=function(e){var t=Panopto.Core.Constants;return e.starRating=function(e,o,n,r,a){a=a||t.DefaultMaxRating;var i,s="<div class='empty-stars'></div><div class='filled-stars star-accent-background'></div>"+(r?"<div class='hovering-stars'></div>":""),c="<div class='star' data-value='<@= value @>'>",l=0;for(e.addClass("rating"),e.html(_.template(s,{})),i=1;i<=a;i++)e.find(".empty-stars, .filled-stars, .hovering-stars").append(_.template(c,{value:i}));return r&&(e.find(".hovering-stars .star").each(function(e,t){var r=parseInt($(t).attr("data-value"),10);$(t).attr("tabindex",0).attr("title",1===r?o:n.format(r))}),Panopto.Core.UI.Handlers.button(e.find(".hovering-stars .star"),function(e){r(parseInt($(e).attr("data-value"),10))}),Panopto.Core.UI.Handlers.hoverable(e.find(".hovering-stars .star"),function(t,o){var n=parseInt($(t).attr("data-value"),10),r=o?n:l;e.find(".filled-stars").width(Math.floor(e.width()*r/a))})),{value:function(t){return"undefined"==typeof t?l:(l=t,void e.find(".filled-stars").width(Math.floor(e.width()*t/a)))}}},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.user=Panopto.user||{},Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=function(e){return e.SubfolderList=function(e,t,o,n){var r,a,i,s=function(t){$(e).toggle(t!==!1)},c=function(e){m=e.folderId,C=e.folderType===Panopto.Core.FolderType.Normal,v=e.addFolderEnabled,P=p,b.set_data(e.subfolders)},l=function(){n.data&&c(n.data)},p=4,d=1024,u={"Folder creation failed with Folder Result:NameAlreadyExists":o.DuplicateFolderName,"Folder creation failed with Folder Result:NameTooLong":o.FolderNameTooLong},f=$(e).find(".subfolder-list"),m=null,v=!1,C=!0,P=p,h=0,I=function(){var t,o,n;t=$(e).find(".show-all-subfolders-template").clone().removeClass("show-all-subfolders-template").addClass("show-all-subfolders").appendTo(f),o=$(e).find(".show-less-subfolders-template").clone().removeClass(".show-less-subfolders-template").addClass("show-less-subfolders").appendTo(f),Panopto.Core.UI.Handlers.button(t.find("div"),_.partial(y,!0)),Panopto.Core.UI.Handlers.button(o.find("div"),_.partial(y,!1)),Panopto.Core.UI.Handlers.key(t.find("div").add(o.find("div")),function(){$(e).find(".show-all-subfolders div, .show-less-subfolders div").not(":focus").focus()},[Panopto.Core.Key.Enter,Panopto.Core.Key.Space],{preserveExisting:!0}),v&&(n=$(e).find(".new-subfolder-template").clone().removeClass("new-subfolder-template").addClass("new-subfolder").appendTo(f),Panopto.Core.UI.Handlers.button(n.find(".subfolder-item"),function(){$(this).addClass("active").find(".new-subfolder-label").hide().siblings(".new-subfolder-input").show().focus().siblings(".new-subfolder-input-cancel").show()}),Panopto.Core.UI.Handlers.key(n.find(".new-subfolder-input"),_.partial(R,{keyboardNavigation:!0}),[Panopto.Core.Key.Enter]),Panopto.Core.UI.Handlers.key(n.find(".new-subfolder-input"),$.noop,[Panopto.Core.Key.Space],{allowDefault:!0,preserveExisting:!0}),Panopto.Core.UI.Handlers.button(n.find(".new-subfolder-input-cancel"),T),Panopto.Core.UI.Handlers.key(n.find(".new-subfolder-input-cancel"),_.partial(T,{keyboardNavigation:!0}),[Panopto.Core.Key.Enter,Panopto.Core.Key.Space]),Panopto.Core.UI.Handlers.key(n.find(".subfolder-item"),_.partial(T,{keyboardNavigation:!0}),[Panopto.Core.Key.Esc],{preserveExisting:!0}),Panopto.Core.UI.Handlers.focusOut(n,function(){var t=$(e).find(".new-subfolder .new-subfolder-input").val();t||T()}))},g=function(e,t){var o,n,s,c,l,d,u,m=b.get_data()?b.get_data().length:0;(e!=a||t)&&(s=f.find(".show-all-subfolders").first(),l=f.find(".new-subfolder").first(),c=f.find(".show-less-subfolders").first(),u=l.add(s),u.detach(),o=e<=m-l.length,n=P!=p&&p*i<=m-l.length,_.each(f.children(),function(t,n){var r=n<e-(o?u:l).length;$(t).toggle(r)}),o?(d=f.children().eq(e-u.length-1),s.insertAfter(d),l.insertAfter(d),d.offset()&&f.offset()&&f.css("max-height",d.offset().top+d.outerHeight()-f.offset().top)):(u.insertBefore(c),f.css("max-height","auto")),s.toggle(o),c.toggle(n),r=m,a=e)},S=function(o,n){var r,a,s=f.children();s.length>0?(r=$(e).width(),a=s.eq(0).outerWidth(!0),r&&a?($(t).height()<$(t).prop("scrollHeight")?h=Math.max(h,$(t).width()-$(t).prop("scrollWidth")):r-=h,i=Math.floor(r/a),f.css("width",i*a)):i=0):i=0,g(P*i,o),n&&setTimeout(function(){S()})};$(window).resize(function(){S()});var b=Sys.create.dataView($(e).find(".subfolder-list")[0],{rendering:function(t,o){a||$(e).find(".subfolder-list").css("max-height",0),$(e).find(".show-all-subfolders, .new-subfolder, .show-less-subfolders").remove(),$(e).find(".new-subfolder-error").hide()},itemRendered:function(e,t){$(t.get(".subfolder-icon")).toggleClass("creator",t.dataItem.IsCreator||Panopto.user.isVidegrapher),n.onFolderClick&&t.dataItem.ID&&Panopto.Core.UI.Handlers.button($(t.get(".subfolder-item")),function(){n.onFolderClick(t.dataItem.ID)})},rendered:function(e,t){I(),a?S(!0):setTimeout(function(){S(!1,!0)})}}),y=function(e){P=e?d:p,g(P*i)},R=function(t){t=t||{};var r=$(e).find(".new-subfolder .new-subfolder-input").val();if(r){$(e).find(".new-subfolder-error").hide(),$("#loadingMessage").show();var i=Panopto.Core.ServiceInterface.Rest.Objects.FolderAccessItem({Name:r,Parent:{Id:m,TypeName:"FolderAccessItem"},IsInheritingAccess:C});Panopto.Core.ServiceInterface.Rest.FolderAccessItems.create(i,function(o){var r=Array.clone(b.get_data());r.push({Name:o.name,ID:o.id,IsCreator:!0}),b.set_data(r),r.length>a-f.find(".new-subfolder").first().length&&y(!0),t.keyboardNavigation&&$(e).find(".new-subfolder .subfolder-item").focus(),n.onFolderAdded&&n.onFolderAdded(o)},function(t){var n=u[t.responseJSON]||o.ErrorAddingFolder;$(e).find(".new-subfolder-error").text(n).show()},function(){$("#loadingMessage").hide()})}else T(t)},T=function(t){t=t||{},$(e).find(".new-subfolder .subfolder-item").removeClass("active").find(".new-subfolder-input").val("").hide().siblings(".new-subfolder-input-cancel").hide().siblings(".new-subfolder-label").show(),$(e).find(".new-subfolder-error").hide(),t.keyboardNavigation&&$(e).find(".new-subfolder .subfolder-item").focus()};return l(),{show:s,setData:c}},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.ServiceInterface=Panopto.Core.ServiceInterface||{},Panopto.Core.UI.Components=function(e){return e.tagSearch=function(e,t,o,n){var r,a,i=[],s="tag-data",c="error-tag",l="pending-tag",p="initial-state";n=n||{};var d,u,f,m,v=n.tabIndex||0,C=n.onChange||function(){},P=n.suggestProviders||!1,h="tag-search-container",I="ui-autocomplete",g="selected",S=_.template("<li class='user-menu-item'><a><span class='label-container'><div class='ellipsis'><div class='suggest-icon <@= iconClass @>'></div><div class='suggestion-text'><@= name @><@ if (user.key !== user.name) { @>(<@= key @>)<@ } @></div></div></span><span class='autocomplete-additional <@= additionalCss @>'><div class='ellipsis'><@= additionalText @></div></span></a></li>"),b=_.template("<li><a><div class='ellipsis'><div class='suggest-icon group'></div><@= label @></div></a></li>"),y=_.template("<li><a><div class='ellipsis'><@= label @></div></a></li>"),R=function(){var t=e.find("input[type='text']"),n=e.find(".tagit-new");e.tagit("assignedTags").length?(m=Panopto.Core.UI.Components.placeholder(t,""),n.toggleClass(p,!1)):(m=Panopto.Core.UI.Components.placeholder(t,o.initialPlaceholder),n.toggleClass(p,!0))},T=function(e,o){t(e,function(t){var n=null,r=_.filter(t,function(e){return e.model.typeName===Panopto.Core.ServiceInterface.Rest.Objects.TypeName.User}),a=_.filter(t,function(e){return e.model.typeName===Panopto.Core.ServiceInterface.Rest.Objects.TypeName.Group});r.length&&(n=_.find(r,function(t){return t.model.key.toLowerCase()===e.toLowerCase()||t.model.name.toLowerCase()===e.toLowerCase()||t.model.email&&t.model.email.toLowerCase()===e.toLowerCase()})),!n&&a.length&&(n=_.find(a,function(t){return t.model.name.toLowerCase()===e.toLowerCase()})),o(e,n)},function(){o(e,null)})},w=function(e,t){var n=function(t){var o=_.uniq($.trim(e).split(" "));t.suggestions=_.map(o,function(e){var o=t.model.isInternal?e:"{0}\\{1}".format(t.model.name,e);return{value:o,tagId:o,model:Panopto.Core.ServiceInterface.Rest.Objects.User({key:o,name:o,typeName:Panopto.Core.ServiceInterface.Rest.Objects.TypeName.User})}})},r=function(){_.each(f,n),u=u.concat(f),t(u)};f?r():Panopto.Core.ServiceInterface.Rest.MembershipProviders.getAllProviders(o,function(e){e.sort(function(e,t){return e.isInternal===t.isInternal?0:e.isInternal?-1:1}),f=_.map(e,function(e){var t=o.providerSuggestionText.format(e.name);return{value:t,tagId:t,model:e}}),r()},function(){f=[]})};e.addClass(h).tagit({autocomplete:{response:function(e,t){t.content&&t.content.length&&(r=t.content[0])},open:function(e,t){var o=a.menu.element.find("li:first");o.length&&a.menu.focus(e,a.menu.element.find("li:first"))},focus:function(e,t){r=t.item,e.preventDefault()},source:function(e,o){e.term!==d?t(e.term,function(t){d=e.term,u=t.slice(0,Panopto.Core.Constants.MaxSuggestionResults),u.length===Panopto.Core.Constants.MaxSuggestionResults||1===$.trim(d).split(" ").length?o(u):P&&w(d,o)}):o(u)},position:{my:"left top",at:"left bottom",of:e},minLength:Panopto.Core.Constants.MinSearchCharacters},animate:!1,allowSpaces:!0,allowDuplicates:!0,tabIndex:v,beforeTagAdded:function(t,o){var n=!1,a=r,p=o.tagLabel.trim().split(/\s+/g),d=o.tagLabel.trim().split(","),u=function(e){o.tagLabel=e.value,o.tag.find(".tagit-label").text(e.value),o.tag.attr(s,e.tagId)},f=function(e,t){var o=$("[{0}='{1}']".format(s,e.tagId));return o.length>t&&o.effect("highlight"),o.length>t};return a?a.suggestions?(n=!0,r=null,_.each(a.suggestions,function(t){e.tagit("createTag",t.value)})):(u(a),n=f(a,0),n||i.push(a)):d.length>1?(n=!0,_.each(d,function(t){e.tagit("createTag",t.trim())})):p.length>2?(n=!0,_.each(p,function(t){e.tagit("createTag",t.trim())})):(o.tag.addClass(l),T(o.tagLabel,function(e,t){o.tag.removeClass(l),t?(u(t),n=f(t,1),n?o.tag.remove():i.push(t)):o.tag.addClass(c),C(i.length)})),!n},afterTagAdded:function(){R(),C(i.length)},afterTagRemoved:function(e,t){var o=t.tag.attr(s);i=_.reject(i,function(e){return e.tagId===o}),R(),C(i.length)}}),a=e.data("ui-tagit").tagInput.data("ui-autocomplete"),a.menu.element.on("menufocus",function(e,t){a.menu.element.find("a").removeClass(g),t.item.find("a").addClass(g)});var k=e.find("input");k.on("focus",function(){this.value&&this.value.length>0&&this.value!=o.initialPlaceholder&&a.search()}),k.on("keydown",function(e){d!==m.val()&&(r=null,d=null,u=null)});var x=function(e){return e=e||"",Panopto.Core.TextHelpers.highlightMatches(e,a.term,"match")},U=function(e,t){var n=t.model,r=x(n.name),a=x(n.key),i=x(n.email);return $(S({user:n,iconClass:n.isInviteRequest()?"invite":"user",additionalCss:n.isInviteRequest()||n.isExternalSuggestion()?"grey-additional":"",name:r,key:a,additionalText:n.isInviteRequest()?o.inviteRequest:n.isExternalSuggestion()?o.suggestedUser:i})).appendTo(e)},O=function(e,t){var o=x(t.label);return $(b({label:o})).appendTo(e)},E=function(e,t){var o=x(t.label);return $(y({label:o})).appendTo(e)};return a._renderItem=function(e,t){return t.model.typeName===Panopto.Core.ServiceInterface.Rest.Objects.TypeName.User?U(e,t):t.model.typeName===Panopto.Core.ServiceInterface.Rest.Objects.TypeName.Group?O(e,t):E(e,t)},a._resizeMenu=function(){var e=10,t=$("."+h),o=$("."+I),n=o[0].offsetWidth-o[0].clientWidth,r=t.width()-$(".autocomplete-additional").outerWidth()-e-n;$(".label-container .ellipsis").outerWidth(r),this.menu.element.outerWidth(t.outerWidth())},R(),{getModels:function(){return _.pluck(i,"model")},clear:function(){e.tagit("removeAll"),i.length=0},$getInput:function(){return e.data("ui-tagit").tagInput},hasPendingTags:function(){return e.find("."+l).length>0}}},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=function(e){return e.uploadIndicator=function(e,t,o){var n,r,a,i,s,o=o||{},c=o.pingInterval||200,l=o.toggleUploadFunction,p=o.pollUploadProgressFunction,d=o.uploadCompleted,u=$("<div class='upload-indicator'><div class='indicator-box'><div class='progress'></div></div><div class='pause-link' tabindex='0'>"+t.pauseText+"</div><div class='done-text'>"+t.completeText+"</div></div>"),f=function(){e.append(u),a=e.find(".progress"),i=e.find(".pause-link"),s=e.find(".done-text"),a.css("transition",c+"ms"),Panopto.Core.UI.Handlers.button(i,function(){l(r),r=!r})},m=function(e,o,n){var c=Math.clamp(100*e,0,100),l=c+"%",p=o?t.resumeText:t.pauseText;r=o,a.css("width",l),i.text(p),n&&(C(),i.hide(),s.show(),d&&d())},v=function(t,o){o=o||0,t&&e.show(),n||(i.show(),s.hide(),m(o,!1,!1),n=setInterval(function(){p(m)},c))},C=function(t){t&&e.hide(),n&&(clearInterval(n),n=null)};return f(),{update:function(e,t,o){m(e,t,o)},start:v,stop:C}},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=function(e){return e.volumePreview=function(e,t,o){var n,r,a,i,s,c,l,p,d,u,f,m,v,C,P,o=o||{},h=o.horizontal,I=o.zIndex||20,g=o.microphoneName,S=o.pingInterval||200,b=o.granularity||100,y=o.pollVolumeFunction,R=_.template("<div class='vertical'><div class='mercury' style='z-index: <@= zIndex @>'><div class='level'></div><div class='mic-name'><@= microphoneName @></div></div><div class='scale'><div class='loud'></div><div class='quiet'></div></div><div class='legend'><div class='volume-loud'><div>"+t.VolumePreview_TooLoud+"</div></div><div class='volume-adjusted'><div>"+t.VolumePreview_JustRight+"</div></div><div class='volume-quiet'><div>"+t.VolumePreview_TooQuiet+"</div></div></div></div>"),T=_.template("<div class='volume-preview horizontal'><div class='mercury' style='z-index: <@= zIndex @>'></div><div class='scale'><div class='quiet'><div class='bulb'></div></div><div class='volume-space'></div><div class='goldilocks'></div><div class='volume-space'></div><div class='loud'><div class='bulb'></div></div></div></div>"),w=function(){e.empty(),h?$volumeControl=$(T({zIndex:I})):$volumeControl=$(R({microphoneName:g,zIndex:I})),$volumeControl.appendTo(e),u=$volumeControl.find(".mercury"),f=$volumeControl.find(".scale"),m=$volumeControl.find(".loud"),v=$volumeControl.find(".quiet"),C=$volumeControl.find(".volume-loud"),P=$volumeControl.find(".volume-quiet"),h?(n=Math.round(u.outerWidth()/2),r=$(".quiet .bulb").offset().left,a=$(".loud .bulb").offset().left,i=a-r,s=i/b,u.css("left",r),c=m.offset().left-n,l=v.offset().left+v.outerWidth()-n):(n=u.find(".level").offset().top-u.offset().top,k(),u.css("top",u.offset().top)),O()},k=function(){var e=window.innerHeight;p!==e&&(p=e,r=f.offset().top-n,a=r+f.innerHeight(),i=a-r,s=i/b,c=C.offset().top+C.innerHeight()-n,l=P.offset().top-n)},x=function(e){var t,o={loud:0,quiet:1,goldilocks:2},n={loud:"area-loud",quiet:"area-quiet",goldilocks:"area-goldilocks"},r="current-volume",a=function(e){_.each(n,function(e){u.removeClass(e)}),u.addClass(e)};switch(u.css("transition",S+"ms"),h?(t=e>c?o.loud:e<l?o.quiet:o.goldilocks,u.css("left",e+"px")):(k(),t=e<c?o.loud:e>l?o.quiet:o.goldilocks,u.css("top",e+"px")),t){case o.loud:P.removeClass(r),C.addClass(r),a(n.loud);break;case o.quiet:C.removeClass(r),P.addClass(r),a(n.quiet);break;default:C.removeClass(r),P.removeClass(r),a(n.goldilocks)}},U=function(e){var t,o=Math.clamp(e*b,0,b);h||(o=b-o),t=o*s+r,x(t)},O=function(){d=setInterval(function(){y(U)},S)},E=function(){clearInterval(d)};return w(),{update:function(e){U(e)},start:O,stop:E}},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=function(e){return e.progressBar=function(e,t){var o="<div class='bar-start'></div><div class='percentage-bar' style='width:<@= item.percentage @>%;'></div><div class='progress-text'><@= item.progressText @></div><div class='remaining-text'><@= item.remainingText @></div><div class='bar-end'></div>",n="<div class='percentage-bar' style='width:<@= item.percentage @>%;'></div><div class='encouraging-text'><@= item.encouragingText @></div>";e.addClass("progress-bar"),e.html(_.template(t.encouragingText?n:o,{item:t}))},e.spinner=function(e,t){var o=t?"spinner-background":"",n=t?"branded-animation":"",r="<div class='loading-block'>"+"<div class='branding-color-holders {0}'></div>".format(o)+"<div class='loading-indicator {0}'></div>".format(n)+"</div>";e.html(_.template(r))},e.nextDelivery=function(e,t,o,n,r,a){var i="<a href='#' class='watch-again'>"+n+"</a>",s="<div class='next-delivery-control'><div class='video-ended'><@= nextDeliveryText @></div><div class='next-delivery-info' tabindex='0'><div class='thumb-wrapper'><img class='next-delivery-thumb' src='<@= deliveryData.thumbUrl @>'></div><div class='next-delivery-data'><div class='next-delivery-title'><span><@= deliveryData.title @></span></div><div class='next-delivery-description'><span><@= deliveryData.description @></span></div><div class='next-delivery-duration'><span><@= deliveryData.durationText @></span></div></div></div></div>";t.durationText=t.isLive?a:t.duration,e.html(_.template(s,{deliveryData:t,nextDeliveryText:o.format(i,t.folderName)})),Panopto.Core.UI.Handlers.button($(".next-delivery-info"),function(){window.location.href=t.url}),Panopto.Core.UI.Handlers.button($(".watch-again"),function(){r()})},Panopto.Core.UI.Components.renderErrors=function(e,t){var o=_.template("<ul class='error-list'><@ _.each(errorList, function (error) { @><li><@= error @></li><@ }); @></ul>");e.html(o({errorList:t}))},e}(Panopto.Core.UI.Components||{});var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=Panopto.Core.UI.Components||{},Panopto.Core.UI.Components.Editor=Panopto.Core.UI.Components.Editor||{},Panopto.Core.UI.Components.Editor.CutView=function(e,t,o,n,r,a,i,s){var c,l,p,d,u,f={id:_.uniqueId("cut"),streamId:s,markers:[Panopto.Core.UI.Components.Editor.Marker(o,e,n,r,i,Panopto.Core.UI.Components.Editor.EditorMode.Cut,!0,!0),Panopto.Core.UI.Components.Editor.Marker(o,t,n,r,i,!s&&0===e&&Panopto.Core.UI.Components.Editor.EditorMode.Cut,!0)]},m="marker",v="cutLeftBound"+f.id,C="cutRightBound"+f.id,P="<div id='"+f.id+"' class='timeline-cut safety-accent-border'></div><div id='"+v+"' class='timeline-cut-bound left-bound safety-background' tabindex='0'>|||</div><div id='"+C+"' class='timeline-cut-bound right-bound safety-background' tabindex='0'>|||</div>",h=!1,I=function(e){a.setPosition(e.data(m).timelineTime())};return o.append(P),c=o.find("#"+f.id),l=o.find("#"+v),p=o.find("#"+C),d=l.add(p),l.data(m,f.markers[0]),p.data(m,f.markers[1]),d.hide(),d.draggable({axis:"x"}),d.mouseup(function(e){I($(this))}),d.mousedown(function(e){e.stopPropagation()}),Panopto.Core.ElementHelpers.removePointerEvents(c,["mousemove","mousedown"]),s||(d.addClass("session-cut"),0===e&&(c.css("border-left","none"),l.css("visibility","hidden"),u=f.markers[0]),t===r&&(c.css("border-right","none"),p.css("visibility","hidden"),u=f.markers[1])),f.refresh=function(){var e,t;_.each(f.markers,function(e){e.refresh()}),e=f.markers[0].left()-f.markers[0].width()/2,t=f.markers[1].left()-f.markers[0].left()+f.markers[0].width(),c.css({left:e,width:t}),l.css({left:e+1}),p.css({left:e+t-1}),d.css("top",s?(o.height()-d.outerHeight())/2:(o.parent().height()-d.outerHeight())/2-parseFloat(o.css("top")))},f.remove=function(){c.remove(),d.remove(),_.each(f.markers,function(e){e.remove()})},f.duration=function(e){r=e,_.each(f.markers,function(e){e.duration(r)}),f.refresh()},f.toggle=function(e){f.toggleMarkers(e),c.toggle(e),d.toggle(h&&e),c.is(":visible")&&f.refresh()},f.toggleMarkers=function(e){_.each(f.markers,function(t){t.toggle(t!==u&&e)})},f.startResize=function(e,t){var n=f.markers[0].time(),i=function(e){return e*r/o.width()},s=function(e){return e*o.width()/r},u=function(e,t,o){var n=i(Panopto.Core.Constants.SnapTolerance);return e<=t+n?t:e>=o-n?o:e};h=!0,c.is(":visible")&&d.show(),l.off("drag"),l.on("drag",function(t,o){var n=u(i(o.position.left),e?e.time():0,f.markers[1].time());o.position.left=s(n),f.toggleMarkers(!0),f.markers[0].time(n),f.refresh()}),p.off("drag"),p.on("drag",function(e,o){var n=u(i(o.position.left),f.markers[0].time(),t?t.time():r);o.position.left=s(n),f.toggleMarkers(!0),f.markers[1].time(n),f.refresh()}),d.off("dragstop"),d.on("dragstop",function(){var e=f.markers[0].time()===f.markers[1].time();a.resizeCut(f,n),e||(n=f.markers[0].time(),f.toggleMarkers(!1))})},f.endResize=function(){h=!1,d.hide()},f.overlaps=function(e){return f.streamId===e.streamId&&e.markers[1].time()>=f.markers[0].time()&&e.markers[0].time()<=f.markers[1].time()},f.refresh(),f.toggleMarkers(!1),f};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=Panopto.Core.UI.Components||{},Panopto.Core.UI.Components.Editor=Panopto.Core.UI.Components.Editor||{},Panopto.Core.UI.Components.Editor.EventStack=function(e,t,o){var n=10;return{id:_.uniqueId("stack"),events:e,left:t,width:function(){return o+(e.length>1?n:0)}}},Panopto.Core.UI.Components.Editor.EventsView=function(e,t,o,n,r,a,i){var s="<img id='<@= id @>' src='<@= src @>' class='event-view' style='left:<@= left @>px;' />",c="<div id='<@= id @>' class='event-stack' style='left:<@= left @>px;'><div class='event-stack-image-row'><img src='<@= src @>' class='event-stack-image' /><div class='event-stack-border-side'><div class='event-stack-border-side-top'></div></div></div><div class='event-stack-border-row'><div class='event-stack-border-left'></div><div class='event-stack-border-middle'></div><div class='event-stack-border-right'></div></div></div>",l=[],p=[],d={},u=function(e){
var t=0;_.each(l,function(o){var n=o.thumbnailUrl||i.noThumbnailUrl;d[n]||(t++,Panopto.Core.ImageHelpers.getAspectRatio(n,function(o){d[n]=o,t--,t||e()}))}),t||e()},f=function(){u(function(){var u,f,m,v,C=e.width()/n,P=function(e){return(e.timelineTime-o)*C};p.length=0,_.each(l,function(t){f=u?u.left:-(1/0),m=u?u.width():0,v=P(t),v<f+m?u.events.push(t):(u=Panopto.Core.UI.Components.Editor.EventStack([t],v,d[t.thumbnailUrl||i.noThumbnailUrl]*e.height()),p.push(u))}),e.empty(),_.each(p,function(o){var n;e.append(_.template(1===o.events.length?s:c,{id:o.id,left:o.left,src:o.events[0].thumbnailUrl||i.noThumbnailUrl})),n=e.find("#"+o.id),n.on("mousedown",function(e){a.stackExpanded&&a.stackExpanded(o.events,n),e.stopPropagation(),r.setPosition(o.events[0].timelineTime-t)}),n.on("mousemove",function(e){r.removeTemporaryMarker(),e.stopPropagation()})})})};return{events:function(e){l=e},updateStart:function(e){t=e},updateContainerStart:function(e){o=e},updateDuration:function(e){n=e},refresh:f}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=Panopto.Core.UI.Components||{},Panopto.Core.UI.Components.Editor=Panopto.Core.UI.Components.Editor||{},Panopto.Core.UI.Components.Editor.FocusView=function(e,t,o,n,r,a,i){var s,c={id:_.uniqueId("focus"),streamId:i,markers:[Panopto.Core.UI.Components.Editor.Marker(o,e,n,r,a,Panopto.Core.UI.Components.Editor.EditorMode.Focus,!0,!0),Panopto.Core.UI.Components.Editor.Marker(o,t,n,r,a,!1,!0)]},l="<div id='"+c.id+"' class='timeline-focus safety-accent-border'></div>";return o.append(l),s=o.find("#"+c.id),c.refresh=function(){_.each(c.markers,function(e){e.refresh()}),s.css({left:c.markers[0].left()-c.markers[0].width()/2+"px",width:c.markers[1].left()-c.markers[0].left()+c.markers[0].width()+"px"})},c.remove=function(){s.remove(),_.each(c.markers,function(e){e.remove()})},c.overlaps=function(e){return c.streamId===e.streamId&&e.markers[1].time()>c.markers[0].time()&&e.markers[0].time()<c.markers[1].time()},c.contains=function(e){return c.streamId===e.streamId&&e.markers[0].time()>=c.markers[0].time()&&e.markers[1].time()<=c.markers[1].time()},c.contained=function(e){return c.streamId===e.streamId&&e.markers[0].time()<c.markers[0].time()&&e.markers[1].time()>c.markers[1].time()},c.clipCutAtEdge=function(e){e.markers[0].time()<c.markers[0].time()&&e.markers[1].time()>c.markers[0].time()?e.markers[1].time(c.markers[0].time()):e.markers[0].time()<c.markers[1].time()&&e.markers[1].time()>c.markers[1].time()&&e.markers[0].time(c.markers[1].time())},c.refresh(),c};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=Panopto.Core.UI.Components||{},Panopto.Core.UI.Components.Editor=Panopto.Core.UI.Components.Editor||{},Panopto.Core.UI.Components.Editor.Markers=Panopto.Core.UI.Components.Editor.Markers||{},Panopto.Core.UI.Components.Editor.Marker=function(e,t,o,n,r,a,i,s){t=Math.round(t);var c,l,p,d={id:_.uniqueId("marker"),$container:e},u=!0,f="line"+d.id,m="<div id='"+f+"' class='marker-line"+(i?" safety-background":"")+"'></div>",v="markerTimestamp"+d.id,C="marker-timestamp-text",P="<div id='"+v+"' class='marker-timestamp"+(i?" safety-background":"")+"'><i class='material-icons cut-marker-icon'>&#xE14E;</i><i class='material-icons toc-marker-icon'>&#xE896;</i><i class='material-icons focus-marker-icon'>&#xE3B4;</i><div class='"+C+"'></div></div>";return e.append(m),c=e.find("#"+f),e.append(P),l=e.find("#"+v),p=l.find("."+C),Panopto.Core.ElementHelpers.removePointerEvents(c.add(l),["mousemove","mousedown"]),a&&c.add(l).addClass(a),d.refresh=function(){var o=e.width()*t/n,a=parseFloat(e.css("top")),i=d.width();c.css("left",Math.clamp(o,i/2,e.width()-i/2)),p.text(Panopto.Core.TimeHelpers.formatDuration(d.timelineTime()/Panopto.Core.Constants.TimelineChunkMultiplier,r.timeSeparator,!1,r.millisecondPrecision)),l.css({left:Math.clamp(s?o-l.outerWidth()-i/2:o+i/2,0,e.width()-l.outerWidth()),top:isNaN(a)?0:-a})},d.remove=function(){c.remove(),l.remove()},d.toggle=function(e){c.toggle(e),l.toggle(u&&e),c.is(":visible")&&d.refresh()},d.toggleTimestamp=function(e){u=e,l.toggle(u)},d.time=function(e){return"undefined"==typeof e?t:(t=Math.clamp(Math.round(e),0,n),void d.refresh())},d.left=function(t){return"undefined"==typeof t?parseFloat(c.css("left")):void d.time(t/e.width()*n)},d.width=function(){return c.outerWidth()},d.timelineTime=function(e){return"undefined"==typeof e?d.time()+o:void d.time(e-o)},d.duration=function(e){n=e,d.refresh()},d.refresh(),d};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=Panopto.Core.UI.Components||{},Panopto.Core.UI.Components.Editor=Panopto.Core.UI.Components.Editor||{},Panopto.Core.UI.Components.Editor.PresentationView=function(e,t,o,n,r,a,i){var s,c,l,p="presentationIcon",d="<div id='"+p+"' class='timeline-icon' title='"+i.presentationName+"'><i class='material-icons'>&#xE3B6;</i></div>",u="presentationRow",f="<div id='"+u+"' class='timeline-row presentation-row'></div>",m=function(e){s.toggle(e),c.toggle(e)},v=function(){c.is(":visible")&&l.refresh()};return e.append(d),s=e.find("#"+p),t.append(f),c=t.find("#"+u),l=Panopto.Core.UI.Components.Editor.EventsView(c,o,o,n,r,a,i),{events:function(e){l.events(e)},updateStart:function(e){l.updateStart(e),l.updateContainerStart(e)},updateDuration:function(e){l.updateDuration(e)},toggle:m,refresh:v}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=Panopto.Core.UI.Components||{},Panopto.Core.UI.Components.Editor=Panopto.Core.UI.Components.Editor||{},Panopto.Core.UI.Components.Editor.Ruler=function(e,t,o){var n,r,a,i=Panopto.Core.Constants,s="<canvas></canvas>",c=_.map([1,5,10,30,60,300,600,1800,3600],function(e){return e*i.TimelineChunkMultiplier}),l=6,p=20,d=10,u=5,f=function(){var t,s,f,m,v=n.width()/o,C=e.width()/v,P=_.min(c,function(e){return Math.abs(Math.log(C/e)/Math.log(l)-1)}),h=c[c.indexOf(P)-1]||P,I=c[c.indexOf(P)-2]||h;r.width=r.offsetWidth,r.height=r.offsetHeight,a.clearRect(0,0,r.width,r.height),a.beginPath();for(var g=I;g<o;g+=I)m=g%P===0,t=g*v,s=m?p:g%h===0?d:u,t=Math.floor(t)+.5,s=Math.floor(s)+.5,a.moveTo(t,0),a.lineTo(t,s),a.stroke(),m&&(f=Panopto.Core.TimeHelpers.formatDuration(g/i.TimelineChunkMultiplier,":"),a.fillText(f,t+1,p))};return t.html(_.template(s)),n=t.find("canvas"),r=n[0],a=r.getContext("2d"),a.font=i.CanvasFont,a.fillStyle=i.CanvasFontColor,f(),{refresh:f,duration:function(e){o=e,f()}}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=Panopto.Core.UI.Components||{},Panopto.Core.UI.Components.Editor=Panopto.Core.UI.Components.Editor||{},Panopto.Core.UI.Components.Editor.StreamView=function(e,t,o,n,r,a,i,s){var c,l,p,d,u,f,m,v,C,P,h="stream",I="streamIcon",g="timeline-stream",S="stream-thumbnail-container",b="stream-histogram",y="stream-thumbnail",R="stream-marker-container",T="primary",w="stream-icon",k="stream-row",x="<div id='"+I+n.id+"' class='timeline-icon "+w+"'><i class='material-icons'>"+n.iconCode+"</i></div>",U="<div id='"+h+n.id+"' class='timeline-row "+k+"'><div class='"+g+"'><div class='"+S+"'></div><div class='"+b+"'></div></div><div class='"+R+"'></div></div>",O="<img src='<@= src @>' class='"+y+"' style='left:<@= left @>;' />",E=[],D=n.type===Panopto.Core.ServiceInterface.Rest.Objects.StreamContentType.Audio,A=function(){var e,t,o,r=function(){if(e=Math.floor(n.duration/n.thumbnailInterval)+1,o=Math.ceil(e/(d.width()/c)),o!==C){C=o,t=C*n.thumbnailInterval*d.width()/n.duration,u.find("."+y).remove();for(var r=0;r<e;r+=C)u.append(_.template(O,{src:n.thumbnailUrlBase.format(r),left:100*(t*r/C)/d.width()+"%"}))}};P?P.refresh():!D&&n.thumbnailUrlBase&&(c?r():Panopto.Core.ImageHelpers.getAspectRatio(n.thumbnailUrlBase.format(0),function(e){c=e*u.height(),r()}))},M=function(){v&&$()},j=function(){A(),M()},N=function(e){n=e,l.attr("title",s.getStreamName(n)),d.add(m).css({left:100*(n.absoluteStart-r)/a+"%",width:100*n.duration/a+"%"}),P&&P.updateContainerStart(n.absoluteStart)},F=function(e){r=e,P&&P.updateStart(e)},H=function(e){a=e},L=function(){l.remove(),p.remove()},$=function(){f.find("canvas").remove(),v=new Waveform({container:f[0],data:E,interpolate:!0,innerColor:Panopto.Core.Constants.CanvasFontColor})},V=function(e){var t=_.max(e)||1;_.each(e,function(e){E.push(Math.max(e/t,1/f.height()))}),$()},B=function(e,t){return Panopto.Core.UI.Components.Editor.Marker(m,e,n.absoluteStart-r,n.duration,s,t)},G=function(t,o){return Panopto.Core.UI.Components.Editor.CutView(t,o,m,n.absoluteStart-r,n.duration,e,s,n.id)},q=function(e,t){return Panopto.Core.UI.Components.Editor.FocusView(e,t,m,n.absoluteStart-r,n.duration,s,n.id)},z=function(e,t){var o=d.offset();return e>=o.left&&e<=o.left+d.outerWidth()&&t>=o.top&&t<=o.top+d.outerHeight()},W=function(e){var t=e-n.absoluteStart+r;return Math.clamp(t,0,n.duration)};return n.isPrimary?t.find("."+T).length?(t.find("."+T).last().after(x),o.find("."+T).last().after(U)):(t.prepend(x),o.prepend(U)):t.find("."+w).length?(t.find("."+w).last().after(x),o.find("."+k).last().after(U)):(t.prepend(x),o.prepend(U)),l=t.find("#"+I+n.id),p=o.find("#"+h+n.id),d=p.find("."+g),u=d.find("."+S),f=d.find("."+b),m=p.find("."+R),n.isPrimary?(l.add(p).addClass(T),D&&l.add(p).addClass("audio"),Panopto.Core.ServiceInterface.Rest.Streams.getHistogram(n.id,V,function(){})):P=Panopto.Core.UI.Components.Editor.EventsView(u,r,n.absoluteStart,n.duration,e,i,s),N(n),j(),{events:function(e){P&&P.events(_.filter(e,function(e){return e.streamId===n.id&&!e.isDefaultThumbnail}))},refresh:j,updateStream:N,updateStart:F,updateDuration:H,remove:L,addMarker:B,addCut:G,addFocus:q,containsPoint:z,boundedTime:W,$markerContainer:m,isPrimary:n.isPrimary,id:n.id}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=Panopto.Core.UI.Components||{},Panopto.Core.UI.Components.Editor=Panopto.Core.UI.Components.Editor||{},Panopto.Core.UI.Components.Editor.ThumbnailChooser=function(e,t,o,n){var r,a,i,s,c,l="chooser-popup",p="chooser-triangle",d="chooser-option",u="chooser-primary",f="chooser-secondary",m="chooser-upload",v="<div class='"+l+"' style='display:none;'><div class='"+u+" "+d+"'>"+n.setPrimaryAsDefaultThumbnail+"</div><div class='"+f+" "+d+"'>"+n.setSecondaryAsDefaultThumbnail+"</div><div class='"+m+" "+d+"'>"+n.uploadCustomDefaultThumbnail+"</div></div><div class='"+p+"' style='display:none;'>▲</div>",C=function(e){i.toggle(!e.primaryAudioOnly),s.toggle(!!e.secondaryAvailable),t.toggleClass(Panopto.Core.Constants.DisabledClass,!!e.playing),e.playing&&P()},P=function(){r.hide(),a.hide()};return e.append(v),r=e.find("."+l),a=e.find("."+p),i=r.find("."+u),s=r.find("."+f),c=r.find("."+m),Panopto.Core.UI.Components.popup(r,t,function(){if(!t.hasClass(Panopto.Core.Constants.DisabledClass)){var e=t.offset().left+t.outerWidth()/2,o=t.offset().top+t.outerHeight();a.show().css({left:e,top:o}),r.show().css({left:Math.clamp(e-r.outerWidth()/2,0,$(window).width()-r.outerWidth()),top:o+14})}},P,!0),Panopto.Core.UI.Handlers.button(i,function(){P(),o.thumbnailChosen&&o.thumbnailChosen(!0)}),Panopto.Core.UI.Handlers.button(s,function(){P(),o.thumbnailChosen&&o.thumbnailChosen(!1)}),Panopto.Core.UI.Handlers.button(c,function(){P(),o.uploadChosen&&o.uploadChosen()}),{synchronize:C}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Logic=Panopto.Core.Logic||{},Panopto.Core.Logic.Timeline=Panopto.Core.Logic.Timeline||{},Panopto.Core.UI.Components.Editor.TimelineState=function(e,t,o,n,r){var a,i,s,c,l=function(){var a=_.map(e,function(e){return e.copy()}),i=_.map(t,function(e){return e.copy()}),s=_.map(n,function(e){return e.copy()}),c=_.map(o,function(e){var t=e.copy();return t.edited=e.edited,t}),l=_.map(r,function(e){var t=e.copy();return t.edited=e.edited,t});return Panopto.Core.UI.Components.Editor.TimelineState(a,i,c,s,l)},p=function(){return s},d=function(){return c},u=function(){return s-i},f=function(t,o){var n=o?_.find(e,function(e){return e.id===o}):void 0;return n?t+n.absoluteStart-p():t-p()},m=function(t,o){var n=o?_.find(e,function(e){return e.id===o}):void 0;return n?t+p()-n.absoluteStart:t+p()},v=function(){a=Panopto.Core.Logic.Timeline.Timeline(e,[]);var t=a.firstPrimaryIndex(),o=a.lastPrimaryIndex();i=_.min(_.pluck(e,"absoluteStart")),s=i,c=0,_.each(a.elements(),function(e,n){n<t?s+=e.length():n>=t&&n<=o&&(c+=e.length())})},C=function(e){return _.filter(o,function(t){return t.type===e})},P=function(e){var t=e-i,o=0,n=_.find(a.elements(),function(e){return o+=e.length(),o>t});return _.map(n.streams(),function(e){return e.stream})};return v(),{copy:l,streams:function(){return e},cuts:function(){return t},events:function(){return o},slideDecksToDelete:function(){return n},questionLists:function(){return r},timeline:function(){return a},absoluteStart:p,duration:d,firstPrimaryOffset:u,toTimelineRelativeTime:f,fromTimelineRelativeTime:m,refreshTimeline:v,filterEvents:C,activeStreams:P}};var Panopto=Panopto||{};Panopto.Core=Panopto.Core||{},Panopto.Core.Constants=Panopto.Core.Constants||{},Panopto.Core.UI=Panopto.Core.UI||{},Panopto.Core.UI.Components=Panopto.Core.UI.Components||{},Panopto.Core.UI.Components.Editor=Panopto.Core.UI.Components.Editor||{},Panopto.Core.UI.Components.Editor.EditorMode=function(e){return e.Default="Default",e.Pointer="Pointer",e.Cut="Cut",e.Focus="Focus",e}(Panopto.Core.UI.Components.Editor.EditorMode||{}),Panopto.Core.UI.Components.Editor.TimelineView=function(e,t,o,n){var r,a,i,s,c,l,p,d,u,f,m,v,C,P,h,I,g,S,b,y,R,T,w,k,x,U,O,E,D,A,M,j,N,F,H=Panopto.Core.Constants,L={},V="tool-toggle",B=_.uniqueId("pointer"),G=_.uniqueId("cut"),q=_.uniqueId("focus"),z=_.uniqueId("previewCuts"),W="thumbnail-button",K="zoom-control",Q="zoom-slider",J="zoom-out",Y="zoom-in",Z="ruler-wrapper",X="ruler",ee="icon-wrapper",te="icon-pane",oe="stream-wrapper",ne="stream-pane",re="vertical-scroll",ae="horizontal-scroll",ie="<div class='tools-pane'><div id='"+B+"' class='"+V+" accented-tab' title='"+n.pointerTool+"' tabindex='0'><i class='material-icons'>&#xE55D;</i></div><div id='"+G+"' class='"+V+" accented-tab' title='"+n.cutTool+"' tabindex='0'><i class='material-icons'>&#xE14E;</i></div><div id='"+q+"' class='"+V+" accented-tab' title='"+n.focusTool+"' tabindex='0'><i class='material-icons'>&#xE3B4;</i></div><div class='preview-cuts'><input id='"+z+"' type='checkbox' checked='true' tabindex='0' /><label for='"+z+"'>"+n.previewCuts+"</label></div><div class='"+W+"' title='"+n.thumbnailButton+"' tabindex='0'><i class='material-icons'>&#xE3B0;</i><div class='dropdown-arrow'></div></div><div class='"+K+"'><div class='zoom-wrapper'><i class='material-icons "+J+"' title='"+n.zoomOut+"' tabindex='0'>&#xE900;</i><div class='zoom-slider-wrapper'><div class='"+Q+"'></div></div><i class='material-icons "+Y+"' title='"+n.zoomIn+"' tabindex='0'>&#xE8FF;</i></div></div></div><div class='ruler-pane'><div class='ruler-icon'><i class='material-icons'>&#xE8B5;</i></div><div class='"+Z+"'><div class='"+X+"'></div></div><div class='ruler-spacer'></div></div><div class='timeline-pane'><div class='icon-cell'><div class='"+ee+"'><div class='"+te+"'></div></div></div><div class='stream-cell'><div class='"+oe+"'><div class='"+ne+"'></div></div></div><div class='"+re+"'></div></div><div class='scroll-pane'><div class='"+ae+"'></div></div>",se=[],ce=[],le=0,pe=!1,de=function(){_.each(se,function(e){e.refresh()}),T.refresh(),w.refresh(),_.each(ce,function(e){e.refresh()}),O.refresh(),E.refresh(),k.refresh(),U.resize()},ue=function(e){var t=function(){0===le?l.addClass(H.DisabledClass):le===F-1?p.addClass(H.DisabledClass):l.add(p).removeClass(H.DisabledClass)},o=function(e){le+=e,le=Math.clamp(le,0,F-1),pe&&c.slider("option","value",le),t()};j=e,N=e*I/Panopto.Core.Constants.MaxTimelineZoom,F=Math.ceil(Math.log(N/j)/Math.log(H.TimelineZoomFactor))+1,C.off("wheel"),F>1?(o(0),C.on("wheel",function(e){var t=e.originalEvent.pageX-C.offset().left;e.ctrlKey&&Math.abs(e.originalEvent.deltaY)&&(o(-Math.sign(e.originalEvent.deltaY)),me(t),e.stopPropagation(),e.preventDefault())}),pe?(c.slider("option","max",F-1),c.slider("option","value",le)):(c.slider({min:0,max:F-1,value:le,slide:function(e,o){le=o.value,me(),t()}}),pe=!0),Panopto.Core.UI.Handlers.button(l,function(){o(-1),me()}),Panopto.Core.UI.Handlers.button(p,function(){o(1),me()}),s.show()):s.hide(),me(v.width()/2-parseFloat(C.css("left")))},fe=function(t){var o;o=t-f.outerWidth()-P.outerWidth(),e.width(t),v.css({width:o,"max-width":o}),d.css({width:o,"max-width":o}),ue(o),de()},me=function(e){var t,o=(parseFloat(C.css("left")),Math.round(Math.clamp(j*Math.pow(H.TimelineZoomFactor,le),j,N)));C.width()!==o&&o>=j&&("number"!=typeof e&&(e=k.left()),t=e*o/C.width()-v.width()/2,t=Math.clamp(t,0,o-v.width()),C.width(o),u.width(o),C.css("left",-t),u.css("left",-t),de())},ve=function(){clearTimeout(R),y=!0,R=setTimeout(function(){y=!1},H.ActiveUserTimeout)},Ce=function(e,t){var o=Math.clamp(e/I*C.width()-v.width()/2,0,C.width()-v.width());k.time(e),t.playing&&!y&&(C.css("left",-o),u.css("left",-o),U.resize()),M.synchronize(t)},Pe=function(e,t,r,a,i){var s,c=_.find(se,function(e){return e.id===a});return s=c?c.addCut(t,r):Panopto.Core.UI.Components.Editor.CutView(t,r,C,0,I,L,n),ce.push(s),e&&o.cutAdded&&o.cutAdded(s),i||Se(s),s},he=function(e,t){t.remove(),ce.splice(ce.indexOf(t),1),e&&o.cutRemoved&&o.cutRemoved(t),g===Panopto.Core.UI.Components.Editor.EditorMode.Cut&&be(t.streamId)},Ie=function(e,t){e===O||e===E?e.markers[0].time()!==e.markers[1].time()&&Pe(!0,e.markers[0].time(),e.markers[1].time()):e.markers[0].time()===e.markers[1].time()?(ye(e.markers[0].timelineTime()),e.markers[0].time(t),he(!0,e)):(o.cutResized&&o.cutResized(t,e),Se(e))},ge=function(e,t){var o=e.markers.concat(t.markers),n=_.min(o,function(e){return e.time()}).time(),r=_.max(o,function(e){return e.time()}).time(),a=e.streamId;return he(!1,e),he(!1,t),Pe(!1,n,r,a,!0)},Se=function(e){var t=_.filter(ce,function(t){return e!==t&&t.overlaps(e)});_.reduce(t,ge,e),ce.sort(function(e,t){return e.markers[0].time()-t.markers[0].time()}),g===Panopto.Core.UI.Components.Editor.EditorMode.Cut&&be(e.streamId)},be=function(e){var t=_.filter([O].concat(ce).concat([E]),function(t){return t.streamId===e});O.markers[1].time(0),E.markers[0].time(I),E.markers[1].time(I),_.each(t,function(e,o){var n=o>0?t[o-1].markers[1]:void 0,r=o<t.length-1?t[o+1].markers[0]:void 0;e.startResize(n,r)}),e||(O.toggle(0!==t[1].markers[0].time()),O.toggleMarkers(!1),E.toggle(t[t.length-2].markers[1].time()<I),E.toggleMarkers(!1))},ye=function(e){o.positionChanged&&o.positionChanged(e)},Re=function(e,t){return Math.round((t.pageX-e.offset().left)/C.width()*I)},Te=function(){D&&(D.remove(),D=void 0)},we=function(e,t,o){e?$(document).on("mousemove."+t.id,function(e){!t.containsPoint(e.pageX,e.pageY)&&D&&D.$container===o&&Te()}):$(document).off("mousemove."+t.id)},ke=function(e,t,o){var r,a,i,s=o.isPrimary?C:t;e?(be(o.isPrimary?void 0:o.id),t.mousedown(function(e){r=Re(s,e),i=o.isPrimary?Panopto.Core.UI.Components.Editor.CutView(r,r,s,0,I,L,n):o.addCut(r,r),i.startResize(),Te(),$(document).on("mouseup."+o.id,function(e){i.markers[0].time()!==i.markers[1].time()&&(Pe(!0,i.markers[0].time(),i.markers[1].time(),o.isPrimary?void 0:o.id),ye(_.min(i.markers,function(e){return Math.abs(e.time()-a)}).timelineTime())),i.remove(),i=void 0,$(document).off("mouseup."+o.id)})}),s.mousemove(function(e){a=Re(s,e);var t=Math.min(r,a),o=Math.max(r,a);i&&(i.toggleMarkers(!0),i.markers[0].time(t),i.markers[1].time(o),i.refresh())}),t.mousemove(function(e){var r=Re(s,e);i||C.find(":active").length||!t.is(document.elementFromPoint(e.pageX,e.pageY))?Te():D?D.time(r):D=o.isPrimary?Panopto.Core.UI.Components.Editor.Marker(C,r,0,I,n,g):o.addMarker(r,g)}),$(document).on("mousemove."+o.id,".timeline-cut-bound",Te)):(t.off("mousedown mousemove mouseleave mouseup"),s.off("mousemove"),$(document).off("mousemove."+o.id,".timeline-cut-bound")),we(e,o,s)},xe=function(e){e?(C.mousemove(function(e){var t=Re(C,e);D?D.time(t):D=Panopto.Core.UI.Components.Editor.Marker(C,t,0,I,n)}),C.mouseleave(Te),_.each(se,function(e){Panopto.Core.ElementHelpers.removePointerEvents(e.$markerContainer,["mousemove","mousedown"])})):(C.off("mousemove mousedown mouseleave"),_.each(se,function(e){Panopto.Core.ElementHelpers.reattachPointerEvents(e.$markerContainer)}))},Ue=function(e){_.each(se,function(t){ke(e,t.$markerContainer,t)}),e||(_.each(ce,function(e){e.endResize()}),O.toggle(!1),E.toggle(!1))},Oe=function(e){_.each(se,function(t){var n,r,a,i=[],s=[];e?(t.$markerContainer.mousedown(function(e){n=Re(t.$markerContainer,e),a=t.addFocus(n,n),Te(),$(document).on("mouseup."+t.id,function(e){a.markers[0].time()!==a.markers[1].time()&&(_.each(s,function(e){he(!1,e)}),_.each(i,function(e){Pe(!1,e.markers[0].time(),e.markers[1].time(),e.streamId)}),o.focusAdded&&(s.length||i.length)&&o.focusAdded(s,i),ye(_.min(a.markers,function(e){return Math.abs(e.time()-r)}).timelineTime())),a.remove(),a=void 0,_.each(i,function(e){e.remove()}),i.length=0,$(document).off("mouseup."+t.id)})}),t.$markerContainer.mousemove(function(e){r=Re(t.$markerContainer,e);var o=Math.min(n,r),c=Math.max(n,r);a?(a.markers[0].time(o),a.markers[1].time(c),a.refresh(),_.each(i,function(e){e.remove()}),i.length=0,s.length=0,_.each(ce,function(e){var o;a.contains(e)?(e.toggle(!1),s.push(e)):a.contained(e)?(i.push(t.addCut(e.markers[0].time(),a.markers[0].time())),i.push(t.addCut(a.markers[1].time(),e.markers[1].time())),e.toggle(!1),s.push(e)):a.overlaps(e)?(o=t.addCut(e.markers[0].time(),e.markers[1].time()),a.clipCutAtEdge(o),o.refresh(),i.push(o),e.toggle(!1),s.push(e)):(e.toggle(!0),e.toggleMarkers(!1))}),_.each(se,function(e){var o,n;t.isPrimary===e.isPrimary&&t.id!==e.id&&(o=e.boundedTime(a.markers[0].timelineTime()),n=e.boundedTime(a.markers[1].timelineTime()),o!==n&&i.push(e.addCut(o,n)))})):D?D.time(r):D=t.addMarker(r,g)})):t.$markerContainer.off("mousedown mousemove"),we(e,t,t.$markerContainer)})},Ee=function(t){var r=_.filter(t.streams(),function(e){return!_.find(se,function(t){return t.id===e.id})}),a=[],i=t.firstPrimaryOffset(),s=_.filter(t.events(),function(e){return e.type===Panopto.Core.EventType.SlideChange&&!e.isDefaultThumbnail});S=g,De(Panopto.Core.UI.Components.Editor.EditorMode.Default),_.each(_.toArray(ce),function(e){he(!1,e)}),I=t.duration(),T.duration(I),w.updateStart(t.absoluteStart()),w.updateDuration(I),k.duration(I),O.duration(I),E.duration(I),_.each(se,function(e){var o=_.find(t.streams(),function(t){return t.id===e.id});o?(e.updateStart(t.absoluteStart()),e.updateDuration(I),e.updateStream(o),e.events(t.events()),e.refresh()):a.push(e)}),_.each(a,function(e){e.remove(),se.splice(se.indexOf(e),1)}),_.each(r,function(e){var r=Panopto.Core.UI.Components.Editor.StreamView(L,m,C,e,t.absoluteStart(),I,o,n);se.push(r),r.events(t.events())}),s.length?(w.toggle(!0),w.events(s)):w.toggle(!1),e.is(":visible")&&(f.add(v).add(P.find(".external-scroll-frame")).height(C.height()),x.resize()),$("#"+q).toggle(_.filter(se,function(e){return e.isPrimary}).length>1||_.filter(se,function(e){return!e.isPrimary}).length>1),_.each(t.cuts(),function(e){var t=e.targetType===Panopto.Core.ServiceInterface.Rest.Objects.TypeName.Stream;Pe(!1,t?e.start:e.start-i,t?e.end():e.start+e.duration-i,t?e.targetId:void 0)}),De(S),fe(e.width())},De=function(e){var t;if(e!==g){switch(xe(!1),Ue(!1),Oe(!1),Te(),r.removeClass(Panopto.Core.Constants.SelectedClass),e!==Panopto.Core.UI.Components.Editor.EditorMode.Cut&&e!==Panopto.Core.UI.Components.Editor.EditorMode.Focus&&C.mousedown(function(e){ye(Re(C,e))}),g=e){case Panopto.Core.UI.Components.Editor.EditorMode.Pointer:xe(!0),t=B;break;case Panopto.Core.UI.Components.Editor.EditorMode.Cut:Ue(!0),t=G;break;case Panopto.Core.UI.Components.Editor.EditorMode.Focus:Oe(!0),t=q;break;case Panopto.Core.UI.Components.Editor.EditorMode.Default:}$("#"+t).addClass(Panopto.Core.Constants.SelectedClass)}};return e.addClass("timeline-view"),e.html(_.template(ie)),r=e.find("."+V),a=e.find("#"+z),i=e.find("."+W),s=e.find("."+K),c=e.find("."+Q),l=e.find("."+J),p=e.find("."+Y),d=e.find("."+Z),u=e.find("."+X),f=e.find("."+ee),m=e.find("."+te),v=e.find("."+oe),C=e.find("."+ne),P=e.find("."+re),h=e.find("."+ae),Panopto.Core.UI.Handlers.button(r,function(e){switch(e.id){case B:De(Panopto.Core.UI.Components.Editor.EditorMode.Pointer);break;case G:De(Panopto.Core.UI.Components.Editor.EditorMode.Cut);break;case q:De(Panopto.Core.UI.Components.Editor.EditorMode.Focus)}}),$(document).keydown(function(e){switch(e.keyCode){case Panopto.Core.Key.One:De(Panopto.Core.UI.Components.Editor.EditorMode.Pointer);break;case Panopto.Core.Key.Two:De(Panopto.Core.UI.Components.Editor.EditorMode.Cut);break;case Panopto.Core.Key.Three:De(Panopto.Core.UI.Components.Editor.EditorMode.Focus);break;case Panopto.Core.Key.Ctrl:b||(b=g,De(Panopto.Core.UI.Components.Editor.EditorMode.Cut))}}),$(document).keyup(function(e){e.keyCode===Panopto.Core.Key.Ctrl&&b&&(De(b),b=void 0)}),a.change(function(){o.previewChanged&&o.previewChanged(this.checked)}),M=Panopto.Core.UI.Components.Editor.ThumbnailChooser(e,i,o,n),T=Panopto.Core.UI.Components.Editor.Ruler(d,u,I),u.on("mousemove",function(e){var t=Re(u,e);A?A.time(t):A=Panopto.Core.UI.Components.Editor.Marker(u,t,0,I,n,"playhead")}),u.on("mousedown",function(e){A&&ye(A.time())}),u.on("mouseleave",function(){A&&(A.remove(),A=void 0)}),w=Panopto.Core.UI.Components.Editor.PresentationView(m,C,0,I,L,o,n),x=Panopto.Core.UI.Components.externalScrollbar(P,f.add(v),m.add(C),!1,function(){g===Panopto.Core.UI.Components.Editor.EditorMode.Cut&&(_.each(ce,function(e){e.refresh()}),O.refresh(),E.refresh())}),U=Panopto.Core.UI.Components.externalScrollbar(h,d.add(v),u.add(C),!0),v.add(h).mousemove(ve),k=Panopto.Core.UI.Components.Editor.Marker(C,0,0,I,n,"playhead"),O=Panopto.Core.UI.Components.Editor.CutView(0,0,C,0,I,L,n),O.markers[0].toggleTimestamp(!1),E=Panopto.Core.UI.Components.Editor.CutView(I,I,C,0,I,L,n),E.markers[1].toggleTimestamp(!1),O.toggle(!1),E.toggle(!1),De(Panopto.Core.UI.Components.Editor.EditorMode.Pointer),e.find("#"+B).addClass(Panopto.Core.Constants.SelectedClass),L.resize=fe,L.synchronize=Ce,L.resizeCut=Ie,L.applyState=Ee,L.setPosition=ye,L.removeTemporaryMarker=Te,L};